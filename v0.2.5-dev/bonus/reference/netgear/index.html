<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A High-Performance Video-Processing Python Framework for building complex real-time media applications. ðŸ”¥"><meta name=author content="Abhishek Thakur"><link href=https://abhitronix.github.io/vidgear/v0.2.5-dev/bonus/reference/netgear/ rel=canonical><link rel=icon href=../../../assets/images/favicon-32.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.11"><title>NetGear API - VidGear</title><link rel=stylesheet href=../../../assets/stylesheets/main.50e68009.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.e6a45f82.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/@clappr/player@latest/dist/clappr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/gh/clappr/clappr-level-selector-plugin@latest/dist/level-selector.min.js></script><script src=https://cdn.jsdelivr.net/gh/clappr/dash-shaka-playback@latest/dist/dash-shaka-playback.js></script><script src=https://cdn.jsdelivr.net/npm/@clappr/hlsjs-playback@latest/dist/hlsjs-playback.min.js></script><script src=https://sidecar.gitter.im/dist/sidecar.v1.js async defer></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Muli:300,400,400i,700%7CFira+Code&display=fallback"><style>:root{--md-text-font:"Muli";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../assets/stylesheets/custom.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-131929464-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property=og:type content=website><meta property=og:title content="VidGear - NetGear API"><meta property=og:description content="A High-Performance Video-Processing Python Framework for building complex real-time media applications. ðŸ”¥"><meta content=https://abhitronix.github.io/vidgear/v0.2.5-dev/bonus/reference/netgear/ property=og:url><meta property=og:image content=https://abhitronix.github.io/vidgear/v0.2.5-dev/assets/images/banner_link.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@abhi_una12><meta name=twitter:creator content=@abhi_una12><meta name=twitter:title content="VidGear - NetGear API"><meta name=twitter:description content="A High-Performance Video-Processing Python Framework for building complex real-time media applications. ðŸ”¥"><meta name=twitter:image content=https://abhitronix.github.io/vidgear/v0.2.5-dev/assets/images/banner_link.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=dark-purple> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vidgear.gears.netgear.NetGear.__init__ class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <!-- Add announcement here, including arbitrary HTML --> <b><span class=twemoji> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12m-10 5h-2v-2h2v2m0-4h-2V7h2v6z"/></svg> </span> Python-3.6 legacies support has been dropped in <code>v0.2.5</code>.</b> </div> </aside> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=VidGear class="md-header__button md-logo" aria-label=VidGear data-md-component=logo> <img src=../../../assets/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> VidGear </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> NetGear API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=purple data-md-color-accent=dark-purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-orange data-md-color-accent=orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/abhiTronix/vidgear title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> abhiTronix/vidgear </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../gears/ class=md-tabs__link> Gears </a> </li> <li class=md-tabs__item> <a href=../camgear/ class="md-tabs__link md-tabs__link--active"> References </a> </li> <li class=md-tabs__item> <a href=../../../help/ class=md-tabs__link> Help </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=VidGear class="md-nav__button md-logo" aria-label=VidGear data-md-component=logo> <img src=../../../assets/images/logo.svg alt=logo> </a> VidGear </label> <div class=md-nav__source> <a href=https://github.com/abhiTronix/vidgear title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> abhiTronix/vidgear </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_2 type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../installation/ class=md-nav__link> Installation Overview </a> </li> <li class=md-nav__item> <a href=../../../installation/pip_install/ class=md-nav__link> Install using pip </a> </li> <li class=md-nav__item> <a href=../../../installation/source_install/ class=md-nav__link> Install from source </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../switch_from_cv/ class=md-nav__link> Switching from OpenCV </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_4 type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4> Contribution Guidelines <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contribution Guidelines" data-md-level=2> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Contribution Guidelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contribution/ class=md-nav__link> Contribution Overview </a> </li> <li class=md-nav__item> <a href=../../../contribution/issue/ class=md-nav__link> Submitting an Issue Guidelines </a> </li> <li class=md-nav__item> <a href=../../../contribution/PR/ class=md-nav__link> Submitting Pull Request(PR) Guidelines </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> Release Notes </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Gears <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Gears data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Gears </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/ class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> CamGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CamGear data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> CamGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/camgear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/camgear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3 type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=3> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/camgear/advanced/source_params/ class=md-nav__link> Source Tweak Parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../gears/camgear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../camgear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/camgear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> PiGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=PiGear data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> PiGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/pigear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/pigear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/pigear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../pigear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/pigear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> VideoGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=VideoGear data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> VideoGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/videogear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/videogear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/videogear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../videogear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/videogear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> ScreenGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ScreenGear data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> ScreenGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/screengear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/screengear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/screengear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../screengear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/screengear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> WriteGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=WriteGear data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> WriteGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/writegear/introduction/ class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2 type=checkbox id=__nav_2_6_2> <label class=md-nav__link for=__nav_2_6_2> Compression Mode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Compression Mode" data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> Compression Mode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/writegear/compression/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/writegear/compression/usage/ class=md-nav__link> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2_3 type=checkbox id=__nav_2_6_2_3> <label class=md-nav__link for=__nav_2_6_2_3> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=4> <label class=md-nav__title for=__nav_2_6_2_3> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/writegear/compression/advanced/cciw/ class=md-nav__link> Custom FFmpeg Commands </a> </li> <li class=md-nav__item> <a href=../../../gears/writegear/compression/advanced/ffmpeg_install/ class=md-nav__link> FFmpeg Installation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../gears/writegear/compression/params/ class=md-nav__link> Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_3 type=checkbox id=__nav_2_6_3> <label class=md-nav__link for=__nav_2_6_3> Non-Compression Mode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Non-Compression Mode" data-md-level=3> <label class=md-nav__title for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> Non-Compression Mode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/writegear/non_compression/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/writegear/non_compression/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/writegear/non_compression/params/ class=md-nav__link> Parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../writegear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/writegear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7> StreamGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=StreamGear data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> StreamGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/streamgear/introduction/ class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7_2 type=checkbox id=__nav_2_7_2> <label class=md-nav__link for=__nav_2_7_2> Single-Source Mode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Single-Source Mode" data-md-level=3> <label class=md-nav__title for=__nav_2_7_2> <span class="md-nav__icon md-icon"></span> Single-Source Mode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/streamgear/ssm/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/streamgear/ssm/usage/ class=md-nav__link> Usage Examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7_3 type=checkbox id=__nav_2_7_3> <label class=md-nav__link for=__nav_2_7_3> Real-time Frames Mode <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Real-time Frames Mode" data-md-level=3> <label class=md-nav__title for=__nav_2_7_3> <span class="md-nav__icon md-icon"></span> Real-time Frames Mode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/streamgear/rtfm/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/streamgear/rtfm/usage/ class=md-nav__link> Usage Examples </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7_4 type=checkbox id=__nav_2_7_4> <label class=md-nav__link for=__nav_2_7_4> Bonus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Bonus data-md-level=3> <label class=md-nav__title for=__nav_2_7_4> <span class="md-nav__icon md-icon"></span> Bonus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/streamgear/ffmpeg_install/ class=md-nav__link> FFmpeg Installation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../gears/streamgear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../streamgear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/streamgear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_8 type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8> NetGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=NetGear data-md-level=2> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> NetGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/netgear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_8_3 type=checkbox id=__nav_2_8_3> <label class=md-nav__link for=__nav_2_8_3> Advanced Usages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Usages" data-md-level=3> <label class=md-nav__title for=__nav_2_8_3> <span class="md-nav__icon md-icon"></span> Advanced Usages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/multi_server/ class=md-nav__link> Multi-Servers Mode </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/multi_client/ class=md-nav__link> Multi-Clients Mode </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/bidirectional_mode/ class=md-nav__link> Bidirectional Mode </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/ssh_tunnel/ class=md-nav__link> SSH Tunneling Mode </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/secure_mode/ class=md-nav__link> Secure Mode </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear/advanced/compression/ class=md-nav__link> Frame Compression </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../gears/netgear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=./ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_9 type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9> WebGear <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=WebGear data-md-level=2> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> WebGear </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/webgear/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear/advanced/ class=md-nav__link> Advanced Usages </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../webgear/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_10 type=checkbox id=__nav_2_10> <label class=md-nav__link for=__nav_2_10> WebGear_RTC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=WebGear_RTC data-md-level=2> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> WebGear_RTC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/webgear_rtc/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear_rtc/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear_rtc/advanced/ class=md-nav__link> Advanced Usages </a> </li> <li class=md-nav__item> <a href=../../../gears/webgear_rtc/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../webgear_rtc/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_rtc_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_11 type=checkbox id=__nav_2_11> <label class=md-nav__link for=__nav_2_11> NetGear_Async <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=NetGear_Async data-md-level=2> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> NetGear_Async </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/netgear_async/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/netgear_async/usage/ class=md-nav__link> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_11_3 type=checkbox id=__nav_2_11_3> <label class=md-nav__link for=__nav_2_11_3> Advanced Usages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Usages" data-md-level=3> <label class=md-nav__title for=__nav_2_11_3> <span class="md-nav__icon md-icon"></span> Advanced Usages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/netgear_async/advanced/bidirectional_mode/ class=md-nav__link> Bidirectional Mode </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../gears/netgear_async/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../netgear_async/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_async_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_12 type=checkbox id=__nav_2_12> <label class=md-nav__link for=__nav_2_12> Stabilizer Class <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Stabilizer Class" data-md-level=2> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> Stabilizer Class </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../gears/stabilizer/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../gears/stabilizer/usage/ class=md-nav__link> Usage Examples </a> </li> <li class=md-nav__item> <a href=../../../gears/stabilizer/params/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../stabilizer/ class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=../../../help/stabilizer_faqs/ class=md-nav__link> FAQs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> API References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API References" data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> API References </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1_1 type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1> vidgear.gears <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=vidgear.gears data-md-level=3> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> vidgear.gears </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../camgear/ class=md-nav__link> CamGear API </a> </li> <li class=md-nav__item> <a href=../pigear/ class=md-nav__link> PiGear API </a> </li> <li class=md-nav__item> <a href=../videogear/ class=md-nav__link> VideoGear API </a> </li> <li class=md-nav__item> <a href=../screengear/ class=md-nav__link> ScreenGear API </a> </li> <li class=md-nav__item> <a href=../writegear/ class=md-nav__link> WriteGear API </a> </li> <li class=md-nav__item> <a href=../streamgear/ class=md-nav__link> StreamGear API </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> NetGear API <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> NetGear API </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.__init__ class=md-nav__link> __init__() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.close class=md-nav__link> close() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.recv class=md-nav__link> recv() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.send class=md-nav__link> send() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../stabilizer/ class=md-nav__link> Stabilizer Class </a> </li> <li class=md-nav__item> <a href=../helper/ class=md-nav__link> Helper Methods </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1_2 type=checkbox id=__nav_3_1_2> <label class=md-nav__link for=__nav_3_1_2> vidgear.gears.asyncio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=vidgear.gears.asyncio data-md-level=3> <label class=md-nav__title for=__nav_3_1_2> <span class="md-nav__icon md-icon"></span> vidgear.gears.asyncio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../webgear/ class=md-nav__link> WebGear API </a> </li> <li class=md-nav__item> <a href=../webgear_rtc/ class=md-nav__link> WebGear_RTC API </a> </li> <li class=md-nav__item> <a href=../netgear_async/ class=md-nav__link> NetGear_Async API </a> </li> <li class=md-nav__item> <a href=../helper_async/ class=md-nav__link> Helper Methods </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../colorspace_manipulation/ class=md-nav__link> Colorspace Manipulation </a> </li> <li class=md-nav__item> <a href=../../TQM/ class=md-nav__link> Threaded Queue Mode </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Help <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Help data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> Help VidGear 'n' Get Help <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Help VidGear 'n' Get Help" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Help VidGear 'n' Get Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../help/ class=md-nav__link> Helping VidGear </a> </li> <li class=md-nav__item> <a href=../../../help/get_help/ class=md-nav__link> Getting Help </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Frequently Asked Questions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Frequently Asked Questions" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Frequently Asked Questions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../help/general_faqs/ class=md-nav__link> General FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/camgear_faqs/ class=md-nav__link> CamGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/pigear_faqs/ class=md-nav__link> PiGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/videogear_faqs/ class=md-nav__link> VideoGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/screengear_faqs/ class=md-nav__link> ScreenGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/writegear_faqs/ class=md-nav__link> WriteGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/streamgear_faqs/ class=md-nav__link> StreamGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_faqs/ class=md-nav__link> NetGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_faqs/ class=md-nav__link> WebGear FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_rtc_faqs/ class=md-nav__link> WebGear_RTC FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_async_faqs/ class=md-nav__link> NetGear_Async FAQs </a> </li> <li class=md-nav__item> <a href=../../../help/stabilizer_faqs/ class=md-nav__link> Stabilizer Class FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Bonus Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Bonus Examples" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Bonus Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../help/camgear_ex/ class=md-nav__link> CamGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/pigear_ex/ class=md-nav__link> PiGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/videogear_ex/ class=md-nav__link> VideoGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/screengear_ex/ class=md-nav__link> ScreenGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/writegear_ex/ class=md-nav__link> WriteGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/streamgear_ex/ class=md-nav__link> StreamGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_ex/ class=md-nav__link> NetGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_ex/ class=md-nav__link> WebGear Examples </a> </li> <li class=md-nav__item> <a href=../../../help/webgear_rtc_ex/ class=md-nav__link> WebGear_RTC Examples </a> </li> <li class=md-nav__item> <a href=../../../help/netgear_async_ex/ class=md-nav__link> NetGear_Async Examples </a> </li> <li class=md-nav__item> <a href=../../../help/stabilizer_ex/ class=md-nav__link> Stabilizer Class Examples </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.__init__ class=md-nav__link> __init__() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.close class=md-nav__link> close() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.recv class=md-nav__link> recv() </a> </li> <li class=md-nav__item> <a href=#vidgear.gears.netgear.NetGear.send class=md-nav__link> send() </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>NetGear API</h1> <div class="admonition example"> <p class=admonition-title>NetGear API usage examples can be found <a href=../../../gears/netgear/usage/ >here âž¶</a></p> </div> <div class="admonition info"> <p class=admonition-title>NetGear API parameters are explained <a href=../../../gears/netgear/params/ >here âž¶</a></p> </div> <div class="doc doc-object doc-class"> <div class="doc doc-contents first"> <p>NetGear is exclusively designed to transfer video frames synchronously and asynchronously between interconnecting systems over the network in real-time.</p> <p>NetGear implements a high-level wrapper around PyZmQ python library that contains python bindings for ZeroMQ - a high-performance asynchronous distributed messaging library that provides a message queue, but unlike message-oriented middleware, its system can run without a dedicated message broker.</p> <p>NetGear also supports real-time Frame Compression capabilities for optimizing performance while sending the frames directly over the network, by encoding the frame before sending it and decoding it on the client's end automatically in real-time.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>NetGear API now internally implements robust <em>Lazy Pirate pattern</em> (auto-reconnection) for its synchronous messaging patterns <em>(i.e. <code>zmq.PAIR</code> &amp; <code>zmq.REQ/zmq.REP</code>)</em> at both Server and Client ends, where its API instead of doing a blocking receive, will:</p> <ul> <li>Poll the socket and receive from it only when it's sure a reply has arrived.</li> <li>Attempt to reconnect, if no reply has arrived within a timeout period.</li> <li>Abandon the connection if there is still no reply after several requests.</li> </ul> </div> <p>NetGear as of now seamlessly supports three ZeroMQ messaging patterns:</p> <ul> <li><code>zmq.PAIR</code> <em>(ZMQ Pair Pattern)</em></li> <li><code>zmq.REQ/zmq.REP</code> <em>(ZMQ Request/Reply Pattern)</em></li> <li><code>zmq.PUB/zmq.SUB</code> <em>(ZMQ Publish/Subscribe Pattern)</em></li> </ul> <p><em>whereas the supported protocol are: <code>tcp</code> and <code>ipc</code></em>.</p> <details class=tip> <summary>Modes of Operation</summary> <ul> <li> <p><strong>Primary Modes</strong></p> <p>NetGear API primarily has two modes of operations:</p> <ul> <li> <p><strong>Send Mode:</strong> <em>which employs <code>send()</code> function to send video frames over the network in real-time.</em></p> </li> <li> <p><strong>Receive Mode:</strong> <em>which employs <code>recv()</code> function to receive frames, sent over the network with <em>Send Mode</em> in real-time. The mode sends back confirmation when the frame is received successfully in few patterns.</em></p> </li> </ul> </li> <li> <p><strong>Exclusive Modes</strong></p> <p>In addition to these primary modes, NetGear API offers applications-specific Exclusive Modes:</p> <ul> <li> <p><strong>Multi-Servers Mode:</strong> <em>In this exclusive mode, NetGear API robustly <strong>handles multiple servers at once</strong>, thereby providing seamless access to frames and unidirectional data transfer from multiple Servers/Publishers across the network in real-time.</em></p> </li> <li> <p><strong>Multi-Clients Mode:</strong> <em>In this exclusive mode, NetGear API robustly <strong>handles multiple clients at once</strong>, thereby providing seamless access to frames and unidirectional data transfer to multiple Client/Consumers across the network in real-time.</em></p> </li> <li> <p><strong>Bidirectional Mode:</strong> <em>This exclusive mode <strong>provides seamless support for bidirectional data transmission between between Server and Client along with video frames</strong>.</em></p> </li> <li> <p><strong>Secure Mode:</strong> <em>In this exclusive mode, NetGear API <strong>provides easy access to powerful, smart &amp; secure ZeroMQ's Security Layers</strong> that enables strong encryption on data, and unbreakable authentication between the Server and Client with the help of custom certificates/keys that brings cheap, standardized privacy and authentication for distributed systems over the network.</em></p> </li> </ul> </li> </ul> </details> <details class=quote> <summary>Source code in <code>vidgear/gears/netgear.py</code></summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>class</span> <span class=nc>NetGear</span><span class=p>:</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=sd>    NetGear is exclusively designed to transfer video frames synchronously and asynchronously between interconnecting systems over the network in real-time.</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=sd>    NetGear implements a high-level wrapper around PyZmQ python library that contains python bindings for ZeroMQ - a high-performance asynchronous distributed messaging library</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=sd>    that provides a message queue, but unlike message-oriented middleware, its system can run without a dedicated message broker.</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=sd>    NetGear also supports real-time Frame Compression capabilities for optimizing performance while sending the frames directly over the network, by encoding the frame before sending</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=sd>    it and decoding it on the client&#39;s end automatically in real-time.</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=sd>    !!! info</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=sd>        NetGear API now internally implements robust *Lazy Pirate pattern* (auto-reconnection) for its synchronous messaging patterns _(i.e. `zmq.PAIR` &amp; `zmq.REQ/zmq.REP`)_</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=sd>        at both Server and Client ends, where its API instead of doing a blocking receive, will:</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=sd>        * Poll the socket and receive from it only when it&#39;s sure a reply has arrived.</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=sd>        * Attempt to reconnect, if no reply has arrived within a timeout period.</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=sd>        * Abandon the connection if there is still no reply after several requests.</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=sd>    NetGear as of now seamlessly supports three ZeroMQ messaging patterns:</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=sd>    - `zmq.PAIR` _(ZMQ Pair Pattern)_</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=sd>    - `zmq.REQ/zmq.REP` _(ZMQ Request/Reply Pattern)_</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=sd>    - `zmq.PUB/zmq.SUB` _(ZMQ Publish/Subscribe Pattern)_</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=sd>    _whereas the supported protocol are: `tcp` and `ipc`_.</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=sd>    ??? tip &quot;Modes of Operation&quot;</span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=sd>        * **Primary Modes**</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a><span class=sd>            NetGear API primarily has two modes of operations:</span>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=sd>            * **Send Mode:** _which employs `send()` function to send video frames over the network in real-time._</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=sd>            * **Receive Mode:** _which employs `recv()` function to receive frames, sent over the network with *Send Mode* in real-time. The mode sends back confirmation when the</span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=sd>            frame is received successfully in few patterns._</span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a><span class=sd>        * **Exclusive Modes**</span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a><span class=sd>            In addition to these primary modes, NetGear API offers applications-specific Exclusive Modes:</span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a><span class=sd>            * **Multi-Servers Mode:** _In this exclusive mode, NetGear API robustly **handles multiple servers at once**, thereby providing seamless access to frames and unidirectional</span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a><span class=sd>            data transfer from multiple Servers/Publishers across the network in real-time._</span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a><span class=sd>            * **Multi-Clients Mode:** _In this exclusive mode, NetGear API robustly **handles multiple clients at once**, thereby providing seamless access to frames and unidirectional</span>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a><span class=sd>            data transfer to multiple Client/Consumers across the network in real-time._</span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a><span class=sd>            * **Bidirectional Mode:** _This exclusive mode **provides seamless support for bidirectional data transmission between between Server and Client along with video frames**._</span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a><span class=sd>            * **Secure Mode:** _In this exclusive mode, NetGear API **provides easy access to powerful, smart &amp; secure ZeroMQ&#39;s Security Layers** that enables strong encryption on</span>
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a><span class=sd>            data, and unbreakable authentication between the Server and Client with the help of custom certificates/keys that brings cheap, standardized privacy and authentication</span>
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a><span class=sd>            for distributed systems over the network._</span>
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>        <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>        <span class=n>address</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>        <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>        <span class=n>protocol</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>        <span class=n>pattern</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>        <span class=n>receive_mode</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>        <span class=n>logging</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>        <span class=o>**</span><span class=n>options</span>
<a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>    <span class=p>):</span>
<a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>
<a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>        <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a><span class=sd>        This constructor method initializes the object state and attributes of the NetGear class.</span>
<a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>
<a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a><span class=sd>        Parameters:</span>
<a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a><span class=sd>            address (str): sets the valid network address of the Server/Client.</span>
<a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a><span class=sd>            port (str): sets the valid Network Port of the Server/Client.</span>
<a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a><span class=sd>            protocol (str): sets the valid messaging protocol between Server/Client.</span>
<a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a><span class=sd>            pattern (int): sets the supported messaging pattern(flow of communication) between Server/Client</span>
<a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a><span class=sd>            receive_mode (bool): select the Netgear&#39;s Mode of operation.</span>
<a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a><span class=sd>            logging (bool): enables/disables logging.</span>
<a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a><span class=sd>            options (dict): provides the flexibility to alter various NetGear internal properties.</span>
<a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>        <span class=c1># raise error(s) for critical Class imports</span>
<a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a>        <span class=n>import_dependency_safe</span><span class=p>(</span><span class=s2>&quot;zmq&quot;</span> <span class=k>if</span> <span class=n>zmq</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>min_version</span><span class=o>=</span><span class=s2>&quot;4.0&quot;</span><span class=p>)</span>
<a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a>        <span class=n>import_dependency_safe</span><span class=p>(</span>
<a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>            <span class=s2>&quot;simplejpeg&quot;</span> <span class=k>if</span> <span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=s2>&quot;log&quot;</span><span class=p>,</span> <span class=n>min_version</span><span class=o>=</span><span class=s2>&quot;1.6.1&quot;</span>
<a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a>        <span class=p>)</span>
<a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a>
<a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a>        <span class=c1># enable logging if specified</span>
<a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=o>=</span> <span class=kc>True</span> <span class=k>if</span> <span class=n>logging</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a>
<a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a>        <span class=c1># define valid messaging patterns =&gt; `0`: zmq.PAIR, `1`:(zmq.REQ,zmq.REP), and `1`:(zmq.SUB,zmq.PUB)</span>
<a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a>        <span class=n>valid_messaging_patterns</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a>            <span class=mi>0</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>PAIR</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>PAIR</span><span class=p>),</span>
<a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a>            <span class=mi>1</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>REQ</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>REP</span><span class=p>),</span>
<a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a>            <span class=mi>2</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>PUB</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>SUB</span><span class=p>),</span>
<a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a>        <span class=p>}</span>
<a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a>
<a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a>        <span class=c1># Handle messaging pattern</span>
<a id=__codelineno-0-95 name=__codelineno-0-95 href=#__codelineno-0-95></a>        <span class=n>msg_pattern</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-96 name=__codelineno-0-96 href=#__codelineno-0-96></a>        <span class=c1># check whether user-defined messaging pattern is valid</span>
<a id=__codelineno-0-97 name=__codelineno-0-97 href=#__codelineno-0-97></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=n>valid_messaging_patterns</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
<a id=__codelineno-0-98 name=__codelineno-0-98 href=#__codelineno-0-98></a>            <span class=c1># assign value</span>
<a id=__codelineno-0-99 name=__codelineno-0-99 href=#__codelineno-0-99></a>            <span class=n>msg_pattern</span> <span class=o>=</span> <span class=n>valid_messaging_patterns</span><span class=p>[</span><span class=n>pattern</span><span class=p>]</span>
<a id=__codelineno-0-100 name=__codelineno-0-100 href=#__codelineno-0-100></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-101 name=__codelineno-0-101 href=#__codelineno-0-101></a>            <span class=c1># otherwise default to 0:`zmq.PAIR`</span>
<a id=__codelineno-0-102 name=__codelineno-0-102 href=#__codelineno-0-102></a>            <span class=n>pattern</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-0-103 name=__codelineno-0-103 href=#__codelineno-0-103></a>            <span class=n>msg_pattern</span> <span class=o>=</span> <span class=n>valid_messaging_patterns</span><span class=p>[</span><span class=n>pattern</span><span class=p>]</span>
<a id=__codelineno-0-104 name=__codelineno-0-104 href=#__codelineno-0-104></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-105 name=__codelineno-0-105 href=#__codelineno-0-105></a>                <span class=s2>&quot;Wrong pattern value, Defaulting to `zmq.PAIR`! Kindly refer Docs for more Information.&quot;</span>
<a id=__codelineno-0-106 name=__codelineno-0-106 href=#__codelineno-0-106></a>            <span class=p>)</span>
<a id=__codelineno-0-107 name=__codelineno-0-107 href=#__codelineno-0-107></a>        <span class=c1># assign pattern to global parameter for further use</span>
<a id=__codelineno-0-108 name=__codelineno-0-108 href=#__codelineno-0-108></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>=</span> <span class=n>pattern</span>
<a id=__codelineno-0-109 name=__codelineno-0-109 href=#__codelineno-0-109></a>
<a id=__codelineno-0-110 name=__codelineno-0-110 href=#__codelineno-0-110></a>        <span class=c1># Handle messaging protocol</span>
<a id=__codelineno-0-111 name=__codelineno-0-111 href=#__codelineno-0-111></a>        <span class=k>if</span> <span class=n>protocol</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=p>(</span><span class=n>protocol</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;tcp&quot;</span><span class=p>,</span> <span class=s2>&quot;ipc&quot;</span><span class=p>]):</span>
<a id=__codelineno-0-112 name=__codelineno-0-112 href=#__codelineno-0-112></a>            <span class=c1># else default to `tcp` protocol</span>
<a id=__codelineno-0-113 name=__codelineno-0-113 href=#__codelineno-0-113></a>            <span class=n>protocol</span> <span class=o>=</span> <span class=s2>&quot;tcp&quot;</span>
<a id=__codelineno-0-114 name=__codelineno-0-114 href=#__codelineno-0-114></a>            <span class=c1># log it</span>
<a id=__codelineno-0-115 name=__codelineno-0-115 href=#__codelineno-0-115></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-116 name=__codelineno-0-116 href=#__codelineno-0-116></a>                <span class=s2>&quot;Protocol is not supported or not provided. Defaulting to `tcp` protocol!&quot;</span>
<a id=__codelineno-0-117 name=__codelineno-0-117 href=#__codelineno-0-117></a>            <span class=p>)</span>
<a id=__codelineno-0-118 name=__codelineno-0-118 href=#__codelineno-0-118></a>
<a id=__codelineno-0-119 name=__codelineno-0-119 href=#__codelineno-0-119></a>        <span class=c1># Handle connection params</span>
<a id=__codelineno-0-120 name=__codelineno-0-120 href=#__codelineno-0-120></a>
<a id=__codelineno-0-121 name=__codelineno-0-121 href=#__codelineno-0-121></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># handles connection flags</span>
<a id=__codelineno-0-122 name=__codelineno-0-122 href=#__codelineno-0-122></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles whether to copy data</span>
<a id=__codelineno-0-123 name=__codelineno-0-123 href=#__codelineno-0-123></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles whether to track packets</span>
<a id=__codelineno-0-124 name=__codelineno-0-124 href=#__codelineno-0-124></a>
<a id=__codelineno-0-125 name=__codelineno-0-125 href=#__codelineno-0-125></a>        <span class=c1># Handle NetGear&#39;s internal exclusive modes and params</span>
<a id=__codelineno-0-126 name=__codelineno-0-126 href=#__codelineno-0-126></a>
<a id=__codelineno-0-127 name=__codelineno-0-127 href=#__codelineno-0-127></a>        <span class=c1># define SSH Tunneling Mode</span>
<a id=__codelineno-0-128 name=__codelineno-0-128 href=#__codelineno-0-128></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># handles ssh_tunneling mode state</span>
<a id=__codelineno-0-129 name=__codelineno-0-129 href=#__codelineno-0-129></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-130 name=__codelineno-0-130 href=#__codelineno-0-130></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-131 name=__codelineno-0-131 href=#__codelineno-0-131></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=o>=</span> <span class=kc>False</span> <span class=k>if</span> <span class=n>paramiko</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>True</span>
<a id=__codelineno-0-132 name=__codelineno-0-132 href=#__codelineno-0-132></a>
<a id=__codelineno-0-133 name=__codelineno-0-133 href=#__codelineno-0-133></a>        <span class=c1># define Multi-Server mode</span>
<a id=__codelineno-0-134 name=__codelineno-0-134 href=#__codelineno-0-134></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles multi-server mode state</span>
<a id=__codelineno-0-135 name=__codelineno-0-135 href=#__codelineno-0-135></a>
<a id=__codelineno-0-136 name=__codelineno-0-136 href=#__codelineno-0-136></a>        <span class=c1># define Multi-Client mode</span>
<a id=__codelineno-0-137 name=__codelineno-0-137 href=#__codelineno-0-137></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles multi-client mode state</span>
<a id=__codelineno-0-138 name=__codelineno-0-138 href=#__codelineno-0-138></a>
<a id=__codelineno-0-139 name=__codelineno-0-139 href=#__codelineno-0-139></a>        <span class=c1># define Bidirectional mode</span>
<a id=__codelineno-0-140 name=__codelineno-0-140 href=#__codelineno-0-140></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles Bidirectional mode state</span>
<a id=__codelineno-0-141 name=__codelineno-0-141 href=#__codelineno-0-141></a>
<a id=__codelineno-0-142 name=__codelineno-0-142 href=#__codelineno-0-142></a>        <span class=c1># define Secure mode</span>
<a id=__codelineno-0-143 name=__codelineno-0-143 href=#__codelineno-0-143></a>        <span class=n>valid_security_mech</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>:</span> <span class=s2>&quot;Grasslands&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>:</span> <span class=s2>&quot;StoneHouse&quot;</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=s2>&quot;IronHouse&quot;</span><span class=p>}</span>
<a id=__codelineno-0-144 name=__codelineno-0-144 href=#__codelineno-0-144></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># handles ZMQ security layer status</span>
<a id=__codelineno-0-145 name=__codelineno-0-145 href=#__codelineno-0-145></a>        <span class=n>auth_cert_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ certificates dir</span>
<a id=__codelineno-0-146 name=__codelineno-0-146 href=#__codelineno-0-146></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ public certificates dir</span>
<a id=__codelineno-0-147 name=__codelineno-0-147 href=#__codelineno-0-147></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ private certificates dir</span>
<a id=__codelineno-0-148 name=__codelineno-0-148 href=#__codelineno-0-148></a>        <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># checks if certificates overwriting allowed</span>
<a id=__codelineno-0-149 name=__codelineno-0-149 href=#__codelineno-0-149></a>        <span class=n>custom_cert_location</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles custom ZMQ certificates path</span>
<a id=__codelineno-0-150 name=__codelineno-0-150 href=#__codelineno-0-150></a>
<a id=__codelineno-0-151 name=__codelineno-0-151 href=#__codelineno-0-151></a>        <span class=c1># define frame-compression handler</span>
<a id=__codelineno-0-152 name=__codelineno-0-152 href=#__codelineno-0-152></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-153 name=__codelineno-0-153 href=#__codelineno-0-153></a>            <span class=kc>True</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-154 name=__codelineno-0-154 href=#__codelineno-0-154></a>        <span class=p>)</span>  <span class=c1># enabled by default for all connections if simplejpeg is installed</span>
<a id=__codelineno-0-155 name=__codelineno-0-155 href=#__codelineno-0-155></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span> <span class=o>=</span> <span class=mi>90</span>  <span class=c1># 90% quality</span>
<a id=__codelineno-0-156 name=__codelineno-0-156 href=#__codelineno-0-156></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># fastest DCT on by default</span>
<a id=__codelineno-0-157 name=__codelineno-0-157 href=#__codelineno-0-157></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># fastupsample off by default</span>
<a id=__codelineno-0-158 name=__codelineno-0-158 href=#__codelineno-0-158></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>=</span> <span class=s2>&quot;BGR&quot;</span>  <span class=c1># use BGR colorspace by default</span>
<a id=__codelineno-0-159 name=__codelineno-0-159 href=#__codelineno-0-159></a>
<a id=__codelineno-0-160 name=__codelineno-0-160 href=#__codelineno-0-160></a>        <span class=c1># defines frame compression on return data</span>
<a id=__codelineno-0-161 name=__codelineno-0-161 href=#__codelineno-0-161></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__ex_compression_params</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-162 name=__codelineno-0-162 href=#__codelineno-0-162></a>
<a id=__codelineno-0-163 name=__codelineno-0-163 href=#__codelineno-0-163></a>        <span class=c1># define receiver return data handler</span>
<a id=__codelineno-0-164 name=__codelineno-0-164 href=#__codelineno-0-164></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-165 name=__codelineno-0-165 href=#__codelineno-0-165></a>
<a id=__codelineno-0-166 name=__codelineno-0-166 href=#__codelineno-0-166></a>        <span class=c1># generate 8-digit random system id</span>
<a id=__codelineno-0-167 name=__codelineno-0-167 href=#__codelineno-0-167></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__id</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-168 name=__codelineno-0-168 href=#__codelineno-0-168></a>            <span class=n>secrets</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>string</span><span class=o>.</span><span class=n>ascii_uppercase</span> <span class=o>+</span> <span class=n>string</span><span class=o>.</span><span class=n>digits</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span>
<a id=__codelineno-0-169 name=__codelineno-0-169 href=#__codelineno-0-169></a>        <span class=p>)</span>
<a id=__codelineno-0-170 name=__codelineno-0-170 href=#__codelineno-0-170></a>
<a id=__codelineno-0-171 name=__codelineno-0-171 href=#__codelineno-0-171></a>        <span class=c1># define termination flag</span>
<a id=__codelineno-0-172 name=__codelineno-0-172 href=#__codelineno-0-172></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-173 name=__codelineno-0-173 href=#__codelineno-0-173></a>
<a id=__codelineno-0-174 name=__codelineno-0-174 href=#__codelineno-0-174></a>        <span class=c1># additional settings for reliability</span>
<a id=__codelineno-0-175 name=__codelineno-0-175 href=#__codelineno-0-175></a>        <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-176 name=__codelineno-0-176 href=#__codelineno-0-176></a>            <span class=c1># define zmq poller for reliable transmission</span>
<a id=__codelineno-0-177 name=__codelineno-0-177 href=#__codelineno-0-177></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span> <span class=o>=</span> <span class=n>zmq</span><span class=o>.</span><span class=n>Poller</span><span class=p>()</span>
<a id=__codelineno-0-178 name=__codelineno-0-178 href=#__codelineno-0-178></a>            <span class=c1># define max retries</span>
<a id=__codelineno-0-179 name=__codelineno-0-179 href=#__codelineno-0-179></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>=</span> <span class=mi>3</span>
<a id=__codelineno-0-180 name=__codelineno-0-180 href=#__codelineno-0-180></a>            <span class=c1># request timeout</span>
<a id=__codelineno-0-181 name=__codelineno-0-181 href=#__codelineno-0-181></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>=</span> <span class=mi>4000</span>  <span class=c1># 4 secs</span>
<a id=__codelineno-0-182 name=__codelineno-0-182 href=#__codelineno-0-182></a>
<a id=__codelineno-0-183 name=__codelineno-0-183 href=#__codelineno-0-183></a>        <span class=c1># Handle user-defined options dictionary values</span>
<a id=__codelineno-0-184 name=__codelineno-0-184 href=#__codelineno-0-184></a>        <span class=c1># reformat dictionary</span>
<a id=__codelineno-0-185 name=__codelineno-0-185 href=#__codelineno-0-185></a>        <span class=n>options</span> <span class=o>=</span> <span class=p>{</span><span class=nb>str</span><span class=p>(</span><span class=n>k</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>():</span> <span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>options</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>
<a id=__codelineno-0-186 name=__codelineno-0-186 href=#__codelineno-0-186></a>
<a id=__codelineno-0-187 name=__codelineno-0-187 href=#__codelineno-0-187></a>        <span class=c1># loop over dictionary key &amp; values and assign to global variables if valid</span>
<a id=__codelineno-0-188 name=__codelineno-0-188 href=#__codelineno-0-188></a>        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>options</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<a id=__codelineno-0-189 name=__codelineno-0-189 href=#__codelineno-0-189></a>            <span class=c1># handle multi-server mode</span>
<a id=__codelineno-0-190 name=__codelineno-0-190 href=#__codelineno-0-190></a>            <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;multiserver_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-191 name=__codelineno-0-191 href=#__codelineno-0-191></a>                <span class=c1># check if valid pattern assigned</span>
<a id=__codelineno-0-192 name=__codelineno-0-192 href=#__codelineno-0-192></a>                <span class=k>if</span> <span class=n>pattern</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-193 name=__codelineno-0-193 href=#__codelineno-0-193></a>                    <span class=c1># activate Multi-server mode</span>
<a id=__codelineno-0-194 name=__codelineno-0-194 href=#__codelineno-0-194></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-195 name=__codelineno-0-195 href=#__codelineno-0-195></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-196 name=__codelineno-0-196 href=#__codelineno-0-196></a>                    <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-197 name=__codelineno-0-197 href=#__codelineno-0-197></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-198 name=__codelineno-0-198 href=#__codelineno-0-198></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;Multi-Server Mode is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-199 name=__codelineno-0-199 href=#__codelineno-0-199></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-200 name=__codelineno-0-200 href=#__codelineno-0-200></a>                        <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Multi-Server Mode is enabled. Kindly refer Docs for more Information.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-201 name=__codelineno-0-201 href=#__codelineno-0-201></a>                            <span class=n>pattern</span>
<a id=__codelineno-0-202 name=__codelineno-0-202 href=#__codelineno-0-202></a>                        <span class=p>)</span>
<a id=__codelineno-0-203 name=__codelineno-0-203 href=#__codelineno-0-203></a>                    <span class=p>)</span>
<a id=__codelineno-0-204 name=__codelineno-0-204 href=#__codelineno-0-204></a>
<a id=__codelineno-0-205 name=__codelineno-0-205 href=#__codelineno-0-205></a>            <span class=c1># handle multi-client mode</span>
<a id=__codelineno-0-206 name=__codelineno-0-206 href=#__codelineno-0-206></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;multiclient_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-207 name=__codelineno-0-207 href=#__codelineno-0-207></a>                <span class=c1># check if valid pattern assigned</span>
<a id=__codelineno-0-208 name=__codelineno-0-208 href=#__codelineno-0-208></a>                <span class=k>if</span> <span class=n>pattern</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-209 name=__codelineno-0-209 href=#__codelineno-0-209></a>                    <span class=c1># activate Multi-client mode</span>
<a id=__codelineno-0-210 name=__codelineno-0-210 href=#__codelineno-0-210></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-211 name=__codelineno-0-211 href=#__codelineno-0-211></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-212 name=__codelineno-0-212 href=#__codelineno-0-212></a>                    <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-213 name=__codelineno-0-213 href=#__codelineno-0-213></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-214 name=__codelineno-0-214 href=#__codelineno-0-214></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;Multi-Client Mode is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-215 name=__codelineno-0-215 href=#__codelineno-0-215></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-216 name=__codelineno-0-216 href=#__codelineno-0-216></a>                        <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Multi-Client Mode is enabled. Kindly refer Docs for more Information.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-217 name=__codelineno-0-217 href=#__codelineno-0-217></a>                            <span class=n>pattern</span>
<a id=__codelineno-0-218 name=__codelineno-0-218 href=#__codelineno-0-218></a>                        <span class=p>)</span>
<a id=__codelineno-0-219 name=__codelineno-0-219 href=#__codelineno-0-219></a>                    <span class=p>)</span>
<a id=__codelineno-0-220 name=__codelineno-0-220 href=#__codelineno-0-220></a>
<a id=__codelineno-0-221 name=__codelineno-0-221 href=#__codelineno-0-221></a>            <span class=c1># handle bidirectional mode</span>
<a id=__codelineno-0-222 name=__codelineno-0-222 href=#__codelineno-0-222></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;bidirectional_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-223 name=__codelineno-0-223 href=#__codelineno-0-223></a>                <span class=c1># check if pattern is valid</span>
<a id=__codelineno-0-224 name=__codelineno-0-224 href=#__codelineno-0-224></a>                <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-225 name=__codelineno-0-225 href=#__codelineno-0-225></a>                    <span class=c1># activate Bidirectional mode if specified</span>
<a id=__codelineno-0-226 name=__codelineno-0-226 href=#__codelineno-0-226></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-227 name=__codelineno-0-227 href=#__codelineno-0-227></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-228 name=__codelineno-0-228 href=#__codelineno-0-228></a>                    <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-229 name=__codelineno-0-229 href=#__codelineno-0-229></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-230 name=__codelineno-0-230 href=#__codelineno-0-230></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Bidirectional data transmission is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-231 name=__codelineno-0-231 href=#__codelineno-0-231></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-232 name=__codelineno-0-232 href=#__codelineno-0-232></a>                        <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Bidirectional Mode is enabled. Kindly refer Docs for more Information!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-233 name=__codelineno-0-233 href=#__codelineno-0-233></a>                            <span class=n>pattern</span>
<a id=__codelineno-0-234 name=__codelineno-0-234 href=#__codelineno-0-234></a>                        <span class=p>)</span>
<a id=__codelineno-0-235 name=__codelineno-0-235 href=#__codelineno-0-235></a>                    <span class=p>)</span>
<a id=__codelineno-0-236 name=__codelineno-0-236 href=#__codelineno-0-236></a>
<a id=__codelineno-0-237 name=__codelineno-0-237 href=#__codelineno-0-237></a>            <span class=c1># handle secure mode</span>
<a id=__codelineno-0-238 name=__codelineno-0-238 href=#__codelineno-0-238></a>            <span class=k>elif</span> <span class=p>(</span>
<a id=__codelineno-0-239 name=__codelineno-0-239 href=#__codelineno-0-239></a>                <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;secure_mode&quot;</span>
<a id=__codelineno-0-240 name=__codelineno-0-240 href=#__codelineno-0-240></a>                <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span>
<a id=__codelineno-0-241 name=__codelineno-0-241 href=#__codelineno-0-241></a>                <span class=ow>and</span> <span class=p>(</span><span class=n>value</span> <span class=ow>in</span> <span class=n>valid_security_mech</span><span class=p>)</span>
<a id=__codelineno-0-242 name=__codelineno-0-242 href=#__codelineno-0-242></a>            <span class=p>):</span>
<a id=__codelineno-0-243 name=__codelineno-0-243 href=#__codelineno-0-243></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-244 name=__codelineno-0-244 href=#__codelineno-0-244></a>
<a id=__codelineno-0-245 name=__codelineno-0-245 href=#__codelineno-0-245></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;custom_cert_location&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-246 name=__codelineno-0-246 href=#__codelineno-0-246></a>                <span class=c1># verify custom auth certificates path for secure mode</span>
<a id=__codelineno-0-247 name=__codelineno-0-247 href=#__codelineno-0-247></a>                <span class=n>custom_cert_location</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-248 name=__codelineno-0-248 href=#__codelineno-0-248></a>                <span class=k>assert</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span>
<a id=__codelineno-0-249 name=__codelineno-0-249 href=#__codelineno-0-249></a>                    <span class=n>custom_cert_location</span>
<a id=__codelineno-0-250 name=__codelineno-0-250 href=#__codelineno-0-250></a>                <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: `custom_cert_location` value must be the path to a valid directory!&quot;</span>
<a id=__codelineno-0-251 name=__codelineno-0-251 href=#__codelineno-0-251></a>                <span class=k>assert</span> <span class=n>check_WriteAccess</span><span class=p>(</span>
<a id=__codelineno-0-252 name=__codelineno-0-252 href=#__codelineno-0-252></a>                    <span class=n>custom_cert_location</span><span class=p>,</span>
<a id=__codelineno-0-253 name=__codelineno-0-253 href=#__codelineno-0-253></a>                    <span class=n>is_windows</span><span class=o>=</span><span class=kc>True</span> <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s2>&quot;nt&quot;</span> <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-254 name=__codelineno-0-254 href=#__codelineno-0-254></a>                    <span class=n>logging</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>,</span>
<a id=__codelineno-0-255 name=__codelineno-0-255 href=#__codelineno-0-255></a>                <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: Permission Denied!, cannot write ZMQ authentication certificates to &#39;</span><span class=si>{}</span><span class=s2>&#39; directory!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-256 name=__codelineno-0-256 href=#__codelineno-0-256></a>                    <span class=n>value</span>
<a id=__codelineno-0-257 name=__codelineno-0-257 href=#__codelineno-0-257></a>                <span class=p>)</span>
<a id=__codelineno-0-258 name=__codelineno-0-258 href=#__codelineno-0-258></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;overwrite_cert&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-259 name=__codelineno-0-259 href=#__codelineno-0-259></a>                <span class=c1># enable/disable auth certificate overwriting in secure mode</span>
<a id=__codelineno-0-260 name=__codelineno-0-260 href=#__codelineno-0-260></a>                <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-261 name=__codelineno-0-261 href=#__codelineno-0-261></a>
<a id=__codelineno-0-262 name=__codelineno-0-262 href=#__codelineno-0-262></a>            <span class=c1># handle ssh-tunneling mode</span>
<a id=__codelineno-0-263 name=__codelineno-0-263 href=#__codelineno-0-263></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-264 name=__codelineno-0-264 href=#__codelineno-0-264></a>                <span class=c1># enable SSH Tunneling Mode</span>
<a id=__codelineno-0-265 name=__codelineno-0-265 href=#__codelineno-0-265></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
<a id=__codelineno-0-266 name=__codelineno-0-266 href=#__codelineno-0-266></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_pwd&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-267 name=__codelineno-0-267 href=#__codelineno-0-267></a>                <span class=c1># add valid SSH Tunneling password</span>
<a id=__codelineno-0-268 name=__codelineno-0-268 href=#__codelineno-0-268></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-269 name=__codelineno-0-269 href=#__codelineno-0-269></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_keyfile&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-270 name=__codelineno-0-270 href=#__codelineno-0-270></a>                <span class=c1># add valid SSH Tunneling key-file</span>
<a id=__codelineno-0-271 name=__codelineno-0-271 href=#__codelineno-0-271></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=o>=</span> <span class=n>value</span> <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-272 name=__codelineno-0-272 href=#__codelineno-0-272></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-273 name=__codelineno-0-273 href=#__codelineno-0-273></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-274 name=__codelineno-0-274 href=#__codelineno-0-274></a>                        <span class=s2>&quot;Discarded invalid or non-existential SSH Tunnel Key-file at </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-275 name=__codelineno-0-275 href=#__codelineno-0-275></a>                            <span class=n>value</span>
<a id=__codelineno-0-276 name=__codelineno-0-276 href=#__codelineno-0-276></a>                        <span class=p>)</span>
<a id=__codelineno-0-277 name=__codelineno-0-277 href=#__codelineno-0-277></a>                    <span class=p>)</span>
<a id=__codelineno-0-278 name=__codelineno-0-278 href=#__codelineno-0-278></a>
<a id=__codelineno-0-279 name=__codelineno-0-279 href=#__codelineno-0-279></a>            <span class=c1># handle jpeg compression</span>
<a id=__codelineno-0-280 name=__codelineno-0-280 href=#__codelineno-0-280></a>            <span class=k>elif</span> <span class=p>(</span>
<a id=__codelineno-0-281 name=__codelineno-0-281 href=#__codelineno-0-281></a>                <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression&quot;</span>
<a id=__codelineno-0-282 name=__codelineno-0-282 href=#__codelineno-0-282></a>                <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span>
<a id=__codelineno-0-283 name=__codelineno-0-283 href=#__codelineno-0-283></a>                <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>
<a id=__codelineno-0-284 name=__codelineno-0-284 href=#__codelineno-0-284></a>            <span class=p>):</span>
<a id=__codelineno-0-285 name=__codelineno-0-285 href=#__codelineno-0-285></a>                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span> <span class=ow>and</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=ow>in</span> <span class=p>[</span>
<a id=__codelineno-0-286 name=__codelineno-0-286 href=#__codelineno-0-286></a>                    <span class=s2>&quot;RGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-287 name=__codelineno-0-287 href=#__codelineno-0-287></a>                    <span class=s2>&quot;BGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-288 name=__codelineno-0-288 href=#__codelineno-0-288></a>                    <span class=s2>&quot;RGBX&quot;</span><span class=p>,</span>
<a id=__codelineno-0-289 name=__codelineno-0-289 href=#__codelineno-0-289></a>                    <span class=s2>&quot;BGRX&quot;</span><span class=p>,</span>
<a id=__codelineno-0-290 name=__codelineno-0-290 href=#__codelineno-0-290></a>                    <span class=s2>&quot;XBGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-291 name=__codelineno-0-291 href=#__codelineno-0-291></a>                    <span class=s2>&quot;XRGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-292 name=__codelineno-0-292 href=#__codelineno-0-292></a>                    <span class=s2>&quot;GRAY&quot;</span><span class=p>,</span>
<a id=__codelineno-0-293 name=__codelineno-0-293 href=#__codelineno-0-293></a>                    <span class=s2>&quot;RGBA&quot;</span><span class=p>,</span>
<a id=__codelineno-0-294 name=__codelineno-0-294 href=#__codelineno-0-294></a>                    <span class=s2>&quot;BGRA&quot;</span><span class=p>,</span>
<a id=__codelineno-0-295 name=__codelineno-0-295 href=#__codelineno-0-295></a>                    <span class=s2>&quot;ABGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-296 name=__codelineno-0-296 href=#__codelineno-0-296></a>                    <span class=s2>&quot;ARGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-297 name=__codelineno-0-297 href=#__codelineno-0-297></a>                    <span class=s2>&quot;CMYK&quot;</span><span class=p>,</span>
<a id=__codelineno-0-298 name=__codelineno-0-298 href=#__codelineno-0-298></a>                <span class=p>]:</span>
<a id=__codelineno-0-299 name=__codelineno-0-299 href=#__codelineno-0-299></a>                    <span class=c1># set encoding colorspace</span>
<a id=__codelineno-0-300 name=__codelineno-0-300 href=#__codelineno-0-300></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span>
<a id=__codelineno-0-301 name=__codelineno-0-301 href=#__codelineno-0-301></a>                    <span class=c1># enable frame-compression encoding value</span>
<a id=__codelineno-0-302 name=__codelineno-0-302 href=#__codelineno-0-302></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-303 name=__codelineno-0-303 href=#__codelineno-0-303></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-304 name=__codelineno-0-304 href=#__codelineno-0-304></a>                    <span class=c1># enable frame-compression encoding value</span>
<a id=__codelineno-0-305 name=__codelineno-0-305 href=#__codelineno-0-305></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-306 name=__codelineno-0-306 href=#__codelineno-0-306></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_quality&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>)):</span>
<a id=__codelineno-0-307 name=__codelineno-0-307 href=#__codelineno-0-307></a>                <span class=c1># set valid jpeg quality</span>
<a id=__codelineno-0-308 name=__codelineno-0-308 href=#__codelineno-0-308></a>                <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>10</span> <span class=ow>and</span> <span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>:</span>
<a id=__codelineno-0-309 name=__codelineno-0-309 href=#__codelineno-0-309></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-310 name=__codelineno-0-310 href=#__codelineno-0-310></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-311 name=__codelineno-0-311 href=#__codelineno-0-311></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Skipped invalid `jpeg_compression_quality` value!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-312 name=__codelineno-0-312 href=#__codelineno-0-312></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_fastdct&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-313 name=__codelineno-0-313 href=#__codelineno-0-313></a>                <span class=c1># enable jpeg fastdct</span>
<a id=__codelineno-0-314 name=__codelineno-0-314 href=#__codelineno-0-314></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-315 name=__codelineno-0-315 href=#__codelineno-0-315></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_fastupsample&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-316 name=__codelineno-0-316 href=#__codelineno-0-316></a>                <span class=c1># enable jpeg  fastupsample</span>
<a id=__codelineno-0-317 name=__codelineno-0-317 href=#__codelineno-0-317></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-318 name=__codelineno-0-318 href=#__codelineno-0-318></a>
<a id=__codelineno-0-319 name=__codelineno-0-319 href=#__codelineno-0-319></a>            <span class=c1># assign maximum retries in synchronous patterns</span>
<a id=__codelineno-0-320 name=__codelineno-0-320 href=#__codelineno-0-320></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;max_retries&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-321 name=__codelineno-0-321 href=#__codelineno-0-321></a>                <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-322 name=__codelineno-0-322 href=#__codelineno-0-322></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-323 name=__codelineno-0-323 href=#__codelineno-0-323></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-324 name=__codelineno-0-324 href=#__codelineno-0-324></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Invalid `max_retries` value skipped!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-325 name=__codelineno-0-325 href=#__codelineno-0-325></a>            <span class=c1># assign request timeout in synchronous patterns</span>
<a id=__codelineno-0-326 name=__codelineno-0-326 href=#__codelineno-0-326></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;request_timeout&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-327 name=__codelineno-0-327 href=#__codelineno-0-327></a>                <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>4</span><span class=p>:</span>
<a id=__codelineno-0-328 name=__codelineno-0-328 href=#__codelineno-0-328></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>=</span> <span class=n>value</span> <span class=o>*</span> <span class=mi>1000</span>  <span class=c1># covert to milliseconds</span>
<a id=__codelineno-0-329 name=__codelineno-0-329 href=#__codelineno-0-329></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-330 name=__codelineno-0-330 href=#__codelineno-0-330></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Invalid `request_timeout` value skipped!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-331 name=__codelineno-0-331 href=#__codelineno-0-331></a>
<a id=__codelineno-0-332 name=__codelineno-0-332 href=#__codelineno-0-332></a>            <span class=c1># handle ZMQ flags</span>
<a id=__codelineno-0-333 name=__codelineno-0-333 href=#__codelineno-0-333></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;flag&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
<a id=__codelineno-0-334 name=__codelineno-0-334 href=#__codelineno-0-334></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-335 name=__codelineno-0-335 href=#__codelineno-0-335></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;copy&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-336 name=__codelineno-0-336 href=#__codelineno-0-336></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-337 name=__codelineno-0-337 href=#__codelineno-0-337></a>            <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;track&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-338 name=__codelineno-0-338 href=#__codelineno-0-338></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-339 name=__codelineno-0-339 href=#__codelineno-0-339></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-340 name=__codelineno-0-340 href=#__codelineno-0-340></a>                <span class=k>pass</span>
<a id=__codelineno-0-341 name=__codelineno-0-341 href=#__codelineno-0-341></a>
<a id=__codelineno-0-342 name=__codelineno-0-342 href=#__codelineno-0-342></a>        <span class=c1># Handle Secure mode</span>
<a id=__codelineno-0-343 name=__codelineno-0-343 href=#__codelineno-0-343></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-344 name=__codelineno-0-344 href=#__codelineno-0-344></a>
<a id=__codelineno-0-345 name=__codelineno-0-345 href=#__codelineno-0-345></a>            <span class=c1># activate and log if overwriting is enabled</span>
<a id=__codelineno-0-346 name=__codelineno-0-346 href=#__codelineno-0-346></a>            <span class=k>if</span> <span class=n>overwrite_cert</span><span class=p>:</span>
<a id=__codelineno-0-347 name=__codelineno-0-347 href=#__codelineno-0-347></a>                <span class=k>if</span> <span class=ow>not</span> <span class=n>receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-348 name=__codelineno-0-348 href=#__codelineno-0-348></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-349 name=__codelineno-0-349 href=#__codelineno-0-349></a>                        <span class=s2>&quot;Overwriting ZMQ Authentication certificates over previous ones!&quot;</span>
<a id=__codelineno-0-350 name=__codelineno-0-350 href=#__codelineno-0-350></a>                    <span class=p>)</span>
<a id=__codelineno-0-351 name=__codelineno-0-351 href=#__codelineno-0-351></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-352 name=__codelineno-0-352 href=#__codelineno-0-352></a>                    <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-353 name=__codelineno-0-353 href=#__codelineno-0-353></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-354 name=__codelineno-0-354 href=#__codelineno-0-354></a>                        <span class=s2>&quot;Overwriting ZMQ Authentication certificates is disabled for Client&#39;s end!&quot;</span>
<a id=__codelineno-0-355 name=__codelineno-0-355 href=#__codelineno-0-355></a>                    <span class=p>)</span>
<a id=__codelineno-0-356 name=__codelineno-0-356 href=#__codelineno-0-356></a>
<a id=__codelineno-0-357 name=__codelineno-0-357 href=#__codelineno-0-357></a>            <span class=c1># Validate certificate generation paths</span>
<a id=__codelineno-0-358 name=__codelineno-0-358 href=#__codelineno-0-358></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-359 name=__codelineno-0-359 href=#__codelineno-0-359></a>                <span class=c1># check if custom certificates path is specified</span>
<a id=__codelineno-0-360 name=__codelineno-0-360 href=#__codelineno-0-360></a>                <span class=k>if</span> <span class=n>custom_cert_location</span><span class=p>:</span>
<a id=__codelineno-0-361 name=__codelineno-0-361 href=#__codelineno-0-361></a>                    <span class=p>(</span>
<a id=__codelineno-0-362 name=__codelineno-0-362 href=#__codelineno-0-362></a>                        <span class=n>auth_cert_dir</span><span class=p>,</span>
<a id=__codelineno-0-363 name=__codelineno-0-363 href=#__codelineno-0-363></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-364 name=__codelineno-0-364 href=#__codelineno-0-364></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-365 name=__codelineno-0-365 href=#__codelineno-0-365></a>                    <span class=p>)</span> <span class=o>=</span> <span class=n>generate_auth_certificates</span><span class=p>(</span>
<a id=__codelineno-0-366 name=__codelineno-0-366 href=#__codelineno-0-366></a>                        <span class=n>custom_cert_location</span><span class=p>,</span> <span class=n>overwrite</span><span class=o>=</span><span class=n>overwrite_cert</span><span class=p>,</span> <span class=n>logging</span><span class=o>=</span><span class=n>logging</span>
<a id=__codelineno-0-367 name=__codelineno-0-367 href=#__codelineno-0-367></a>                    <span class=p>)</span>
<a id=__codelineno-0-368 name=__codelineno-0-368 href=#__codelineno-0-368></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-369 name=__codelineno-0-369 href=#__codelineno-0-369></a>                    <span class=c1># otherwise auto-generate suitable path</span>
<a id=__codelineno-0-370 name=__codelineno-0-370 href=#__codelineno-0-370></a>                    <span class=p>(</span>
<a id=__codelineno-0-371 name=__codelineno-0-371 href=#__codelineno-0-371></a>                        <span class=n>auth_cert_dir</span><span class=p>,</span>
<a id=__codelineno-0-372 name=__codelineno-0-372 href=#__codelineno-0-372></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-373 name=__codelineno-0-373 href=#__codelineno-0-373></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-374 name=__codelineno-0-374 href=#__codelineno-0-374></a>                    <span class=p>)</span> <span class=o>=</span> <span class=n>generate_auth_certificates</span><span class=p>(</span>
<a id=__codelineno-0-375 name=__codelineno-0-375 href=#__codelineno-0-375></a>                        <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>expanduser</span><span class=p>(</span><span class=s2>&quot;~&quot;</span><span class=p>),</span> <span class=s2>&quot;.vidgear&quot;</span><span class=p>),</span>
<a id=__codelineno-0-376 name=__codelineno-0-376 href=#__codelineno-0-376></a>                        <span class=n>overwrite</span><span class=o>=</span><span class=n>overwrite_cert</span><span class=p>,</span>
<a id=__codelineno-0-377 name=__codelineno-0-377 href=#__codelineno-0-377></a>                        <span class=n>logging</span><span class=o>=</span><span class=n>logging</span><span class=p>,</span>
<a id=__codelineno-0-378 name=__codelineno-0-378 href=#__codelineno-0-378></a>                    <span class=p>)</span>
<a id=__codelineno-0-379 name=__codelineno-0-379 href=#__codelineno-0-379></a>                <span class=c1># log it</span>
<a id=__codelineno-0-380 name=__codelineno-0-380 href=#__codelineno-0-380></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-381 name=__codelineno-0-381 href=#__codelineno-0-381></a>                    <span class=s2>&quot;`</span><span class=si>{}</span><span class=s2>` is the default location for storing ZMQ authentication certificates/keys.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-382 name=__codelineno-0-382 href=#__codelineno-0-382></a>                        <span class=n>auth_cert_dir</span>
<a id=__codelineno-0-383 name=__codelineno-0-383 href=#__codelineno-0-383></a>                    <span class=p>)</span>
<a id=__codelineno-0-384 name=__codelineno-0-384 href=#__codelineno-0-384></a>                <span class=p>)</span>
<a id=__codelineno-0-385 name=__codelineno-0-385 href=#__codelineno-0-385></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-386 name=__codelineno-0-386 href=#__codelineno-0-386></a>                <span class=c1># catch if any error occurred and disable Secure mode</span>
<a id=__codelineno-0-387 name=__codelineno-0-387 href=#__codelineno-0-387></a>                <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-388 name=__codelineno-0-388 href=#__codelineno-0-388></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-0-389 name=__codelineno-0-389 href=#__codelineno-0-389></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-390 name=__codelineno-0-390 href=#__codelineno-0-390></a>                    <span class=s2>&quot;ZMQ Security Mechanism is disabled for this connection due to errors!&quot;</span>
<a id=__codelineno-0-391 name=__codelineno-0-391 href=#__codelineno-0-391></a>                <span class=p>)</span>
<a id=__codelineno-0-392 name=__codelineno-0-392 href=#__codelineno-0-392></a>
<a id=__codelineno-0-393 name=__codelineno-0-393 href=#__codelineno-0-393></a>        <span class=c1># Handle ssh tunneling if enabled</span>
<a id=__codelineno-0-394 name=__codelineno-0-394 href=#__codelineno-0-394></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-395 name=__codelineno-0-395 href=#__codelineno-0-395></a>            <span class=c1># SSH Tunnel Mode only available for server mode</span>
<a id=__codelineno-0-396 name=__codelineno-0-396 href=#__codelineno-0-396></a>            <span class=k>if</span> <span class=n>receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-397 name=__codelineno-0-397 href=#__codelineno-0-397></a>                <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;SSH Tunneling cannot be enabled for Client-end!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-398 name=__codelineno-0-398 href=#__codelineno-0-398></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-399 name=__codelineno-0-399 href=#__codelineno-0-399></a>                <span class=c1># check if SSH tunneling possible</span>
<a id=__codelineno-0-400 name=__codelineno-0-400 href=#__codelineno-0-400></a>                <span class=n>ssh_address</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span>
<a id=__codelineno-0-401 name=__codelineno-0-401 href=#__codelineno-0-401></a>                <span class=n>ssh_address</span><span class=p>,</span> <span class=n>ssh_port</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-402 name=__codelineno-0-402 href=#__codelineno-0-402></a>                    <span class=n>ssh_address</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;:&quot;</span><span class=p>)</span>
<a id=__codelineno-0-403 name=__codelineno-0-403 href=#__codelineno-0-403></a>                    <span class=k>if</span> <span class=s2>&quot;:&quot;</span> <span class=ow>in</span> <span class=n>ssh_address</span>
<a id=__codelineno-0-404 name=__codelineno-0-404 href=#__codelineno-0-404></a>                    <span class=k>else</span> <span class=p>[</span><span class=n>ssh_address</span><span class=p>,</span> <span class=s2>&quot;22&quot;</span><span class=p>]</span>
<a id=__codelineno-0-405 name=__codelineno-0-405 href=#__codelineno-0-405></a>                <span class=p>)</span>  <span class=c1># default to port 22</span>
<a id=__codelineno-0-406 name=__codelineno-0-406 href=#__codelineno-0-406></a>                <span class=k>if</span> <span class=s2>&quot;47&quot;</span> <span class=ow>in</span> <span class=n>ssh_port</span><span class=p>:</span>
<a id=__codelineno-0-407 name=__codelineno-0-407 href=#__codelineno-0-407></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
<a id=__codelineno-0-408 name=__codelineno-0-408 href=#__codelineno-0-408></a>                        <span class=s2>&quot;:47&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span>
<a id=__codelineno-0-409 name=__codelineno-0-409 href=#__codelineno-0-409></a>                    <span class=p>)</span>  <span class=c1># port-47 is reserved for testing</span>
<a id=__codelineno-0-410 name=__codelineno-0-410 href=#__codelineno-0-410></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-411 name=__codelineno-0-411 href=#__codelineno-0-411></a>                    <span class=c1># extract ip for validation</span>
<a id=__codelineno-0-412 name=__codelineno-0-412 href=#__codelineno-0-412></a>                    <span class=n>ssh_user</span><span class=p>,</span> <span class=n>ssh_ip</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-413 name=__codelineno-0-413 href=#__codelineno-0-413></a>                        <span class=n>ssh_address</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;@&quot;</span><span class=p>)</span>
<a id=__codelineno-0-414 name=__codelineno-0-414 href=#__codelineno-0-414></a>                        <span class=k>if</span> <span class=s2>&quot;@&quot;</span> <span class=ow>in</span> <span class=n>ssh_address</span>
<a id=__codelineno-0-415 name=__codelineno-0-415 href=#__codelineno-0-415></a>                        <span class=k>else</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>ssh_address</span><span class=p>]</span>
<a id=__codelineno-0-416 name=__codelineno-0-416 href=#__codelineno-0-416></a>                    <span class=p>)</span>
<a id=__codelineno-0-417 name=__codelineno-0-417 href=#__codelineno-0-417></a>                    <span class=c1># validate ip specified port</span>
<a id=__codelineno-0-418 name=__codelineno-0-418 href=#__codelineno-0-418></a>                    <span class=k>assert</span> <span class=n>check_open_port</span><span class=p>(</span>
<a id=__codelineno-0-419 name=__codelineno-0-419 href=#__codelineno-0-419></a>                        <span class=n>ssh_ip</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>ssh_port</span><span class=p>)</span>
<a id=__codelineno-0-420 name=__codelineno-0-420 href=#__codelineno-0-420></a>                    <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: Host `</span><span class=si>{}</span><span class=s2>` is not available for SSH Tunneling at port-</span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-421 name=__codelineno-0-421 href=#__codelineno-0-421></a>                        <span class=n>ssh_address</span><span class=p>,</span> <span class=n>ssh_port</span>
<a id=__codelineno-0-422 name=__codelineno-0-422 href=#__codelineno-0-422></a>                    <span class=p>)</span>
<a id=__codelineno-0-423 name=__codelineno-0-423 href=#__codelineno-0-423></a>
<a id=__codelineno-0-424 name=__codelineno-0-424 href=#__codelineno-0-424></a>        <span class=c1># Handle multiple exclusive modes if enabled</span>
<a id=__codelineno-0-425 name=__codelineno-0-425 href=#__codelineno-0-425></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-426 name=__codelineno-0-426 href=#__codelineno-0-426></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-427 name=__codelineno-0-427 href=#__codelineno-0-427></a>                <span class=s2>&quot;[NetGear:ERROR] :: Multi-Client and Multi-Server Mode cannot be enabled simultaneously!&quot;</span>
<a id=__codelineno-0-428 name=__codelineno-0-428 href=#__codelineno-0-428></a>            <span class=p>)</span>
<a id=__codelineno-0-429 name=__codelineno-0-429 href=#__codelineno-0-429></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-430 name=__codelineno-0-430 href=#__codelineno-0-430></a>            <span class=c1># check if Bidirectional Mode also enabled</span>
<a id=__codelineno-0-431 name=__codelineno-0-431 href=#__codelineno-0-431></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-432 name=__codelineno-0-432 href=#__codelineno-0-432></a>                <span class=c1># log it</span>
<a id=__codelineno-0-433 name=__codelineno-0-433 href=#__codelineno-0-433></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-434 name=__codelineno-0-434 href=#__codelineno-0-434></a>                    <span class=s2>&quot;Bidirectional Data Transmission is also enabled for this connection!&quot;</span>
<a id=__codelineno-0-435 name=__codelineno-0-435 href=#__codelineno-0-435></a>                <span class=p>)</span>
<a id=__codelineno-0-436 name=__codelineno-0-436 href=#__codelineno-0-436></a>            <span class=c1># check if SSH Tunneling Mode also enabled</span>
<a id=__codelineno-0-437 name=__codelineno-0-437 href=#__codelineno-0-437></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-438 name=__codelineno-0-438 href=#__codelineno-0-438></a>                <span class=c1># raise error</span>
<a id=__codelineno-0-439 name=__codelineno-0-439 href=#__codelineno-0-439></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-440 name=__codelineno-0-440 href=#__codelineno-0-440></a>                    <span class=s2>&quot;[NetGear:ERROR] :: SSH Tunneling and </span><span class=si>{}</span><span class=s2> Mode cannot be enabled simultaneously. Kindly refer docs!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-441 name=__codelineno-0-441 href=#__codelineno-0-441></a>                        <span class=s2>&quot;Multi-Server&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span>
<a id=__codelineno-0-442 name=__codelineno-0-442 href=#__codelineno-0-442></a>                    <span class=p>)</span>
<a id=__codelineno-0-443 name=__codelineno-0-443 href=#__codelineno-0-443></a>                <span class=p>)</span>
<a id=__codelineno-0-444 name=__codelineno-0-444 href=#__codelineno-0-444></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-445 name=__codelineno-0-445 href=#__codelineno-0-445></a>            <span class=c1># log Bidirectional mode activation</span>
<a id=__codelineno-0-446 name=__codelineno-0-446 href=#__codelineno-0-446></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-447 name=__codelineno-0-447 href=#__codelineno-0-447></a>                <span class=s2>&quot;Bidirectional Data Transmission is enabled for this connection!&quot;</span>
<a id=__codelineno-0-448 name=__codelineno-0-448 href=#__codelineno-0-448></a>            <span class=p>)</span>
<a id=__codelineno-0-449 name=__codelineno-0-449 href=#__codelineno-0-449></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-450 name=__codelineno-0-450 href=#__codelineno-0-450></a>            <span class=c1># log Bidirectional mode activation</span>
<a id=__codelineno-0-451 name=__codelineno-0-451 href=#__codelineno-0-451></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-452 name=__codelineno-0-452 href=#__codelineno-0-452></a>                <span class=s2>&quot;SSH Tunneling is enabled for host:`</span><span class=si>{}</span><span class=s2>` with `</span><span class=si>{}</span><span class=s2>` back-end.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-453 name=__codelineno-0-453 href=#__codelineno-0-453></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-454 name=__codelineno-0-454 href=#__codelineno-0-454></a>                    <span class=s2>&quot;paramiko&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=k>else</span> <span class=s2>&quot;pexpect&quot;</span><span class=p>,</span>
<a id=__codelineno-0-455 name=__codelineno-0-455 href=#__codelineno-0-455></a>                <span class=p>)</span>
<a id=__codelineno-0-456 name=__codelineno-0-456 href=#__codelineno-0-456></a>            <span class=p>)</span>
<a id=__codelineno-0-457 name=__codelineno-0-457 href=#__codelineno-0-457></a>
<a id=__codelineno-0-458 name=__codelineno-0-458 href=#__codelineno-0-458></a>        <span class=c1># define messaging context instance</span>
<a id=__codelineno-0-459 name=__codelineno-0-459 href=#__codelineno-0-459></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span> <span class=o>=</span> <span class=n>zmq</span><span class=o>.</span><span class=n>Context</span><span class=o>.</span><span class=n>instance</span><span class=p>()</span>
<a id=__codelineno-0-460 name=__codelineno-0-460 href=#__codelineno-0-460></a>
<a id=__codelineno-0-461 name=__codelineno-0-461 href=#__codelineno-0-461></a>        <span class=c1># initialize and assign receive mode to global variable</span>
<a id=__codelineno-0-462 name=__codelineno-0-462 href=#__codelineno-0-462></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span> <span class=o>=</span> <span class=n>receive_mode</span>
<a id=__codelineno-0-463 name=__codelineno-0-463 href=#__codelineno-0-463></a>
<a id=__codelineno-0-464 name=__codelineno-0-464 href=#__codelineno-0-464></a>        <span class=c1># check whether `receive_mode` is enabled</span>
<a id=__codelineno-0-465 name=__codelineno-0-465 href=#__codelineno-0-465></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-466 name=__codelineno-0-466 href=#__codelineno-0-466></a>
<a id=__codelineno-0-467 name=__codelineno-0-467 href=#__codelineno-0-467></a>            <span class=c1># define connection address</span>
<a id=__codelineno-0-468 name=__codelineno-0-468 href=#__codelineno-0-468></a>            <span class=k>if</span> <span class=n>address</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-469 name=__codelineno-0-469 href=#__codelineno-0-469></a>                <span class=n>address</span> <span class=o>=</span> <span class=s2>&quot;*&quot;</span>  <span class=c1># define address</span>
<a id=__codelineno-0-470 name=__codelineno-0-470 href=#__codelineno-0-470></a>
<a id=__codelineno-0-471 name=__codelineno-0-471 href=#__codelineno-0-471></a>            <span class=c1># check if multiserver_mode is enabled</span>
<a id=__codelineno-0-472 name=__codelineno-0-472 href=#__codelineno-0-472></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-473 name=__codelineno-0-473 href=#__codelineno-0-473></a>                <span class=c1># check if unique server port address list/tuple is assigned or not in multiserver_mode</span>
<a id=__codelineno-0-474 name=__codelineno-0-474 href=#__codelineno-0-474></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>port</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>)):</span>
<a id=__codelineno-0-475 name=__codelineno-0-475 href=#__codelineno-0-475></a>                    <span class=c1># raise error if not</span>
<a id=__codelineno-0-476 name=__codelineno-0-476 href=#__codelineno-0-476></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-477 name=__codelineno-0-477 href=#__codelineno-0-477></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Incorrect port value! Kindly provide a list/tuple of Server ports while Multi-Server mode is enabled. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-478 name=__codelineno-0-478 href=#__codelineno-0-478></a>                    <span class=p>)</span>
<a id=__codelineno-0-479 name=__codelineno-0-479 href=#__codelineno-0-479></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-480 name=__codelineno-0-480 href=#__codelineno-0-480></a>                    <span class=c1># otherwise log it</span>
<a id=__codelineno-0-481 name=__codelineno-0-481 href=#__codelineno-0-481></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-482 name=__codelineno-0-482 href=#__codelineno-0-482></a>                        <span class=s2>&quot;Enabling Multi-Server Mode at PORTS: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-483 name=__codelineno-0-483 href=#__codelineno-0-483></a>                    <span class=p>)</span>
<a id=__codelineno-0-484 name=__codelineno-0-484 href=#__codelineno-0-484></a>                <span class=c1># create port address buffer for keeping track of connected client&#39;s port(s)</span>
<a id=__codelineno-0-485 name=__codelineno-0-485 href=#__codelineno-0-485></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-486 name=__codelineno-0-486 href=#__codelineno-0-486></a>            <span class=c1># check if multiclient_mode is enabled</span>
<a id=__codelineno-0-487 name=__codelineno-0-487 href=#__codelineno-0-487></a>            <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-488 name=__codelineno-0-488 href=#__codelineno-0-488></a>                <span class=c1># check if unique server port address is assigned or not in multiclient_mode</span>
<a id=__codelineno-0-489 name=__codelineno-0-489 href=#__codelineno-0-489></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-490 name=__codelineno-0-490 href=#__codelineno-0-490></a>                    <span class=c1># raise error if not</span>
<a id=__codelineno-0-491 name=__codelineno-0-491 href=#__codelineno-0-491></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-492 name=__codelineno-0-492 href=#__codelineno-0-492></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Kindly provide a unique &amp; valid port value at Client-end. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-493 name=__codelineno-0-493 href=#__codelineno-0-493></a>                    <span class=p>)</span>
<a id=__codelineno-0-494 name=__codelineno-0-494 href=#__codelineno-0-494></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-495 name=__codelineno-0-495 href=#__codelineno-0-495></a>                    <span class=c1># otherwise log it</span>
<a id=__codelineno-0-496 name=__codelineno-0-496 href=#__codelineno-0-496></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-497 name=__codelineno-0-497 href=#__codelineno-0-497></a>                        <span class=s2>&quot;Enabling Multi-Client Mode at PORT: </span><span class=si>{}</span><span class=s2> on this device!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-498 name=__codelineno-0-498 href=#__codelineno-0-498></a>                            <span class=n>port</span>
<a id=__codelineno-0-499 name=__codelineno-0-499 href=#__codelineno-0-499></a>                        <span class=p>)</span>
<a id=__codelineno-0-500 name=__codelineno-0-500 href=#__codelineno-0-500></a>                    <span class=p>)</span>
<a id=__codelineno-0-501 name=__codelineno-0-501 href=#__codelineno-0-501></a>                <span class=c1># assign value to global variable</span>
<a id=__codelineno-0-502 name=__codelineno-0-502 href=#__codelineno-0-502></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__port</span> <span class=o>=</span> <span class=n>port</span>
<a id=__codelineno-0-503 name=__codelineno-0-503 href=#__codelineno-0-503></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-504 name=__codelineno-0-504 href=#__codelineno-0-504></a>                <span class=c1># otherwise assign local port address if None</span>
<a id=__codelineno-0-505 name=__codelineno-0-505 href=#__codelineno-0-505></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-506 name=__codelineno-0-506 href=#__codelineno-0-506></a>                    <span class=n>port</span> <span class=o>=</span> <span class=s2>&quot;5555&quot;</span>
<a id=__codelineno-0-507 name=__codelineno-0-507 href=#__codelineno-0-507></a>
<a id=__codelineno-0-508 name=__codelineno-0-508 href=#__codelineno-0-508></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-509 name=__codelineno-0-509 href=#__codelineno-0-509></a>                <span class=c1># activate secure_mode threaded authenticator</span>
<a id=__codelineno-0-510 name=__codelineno-0-510 href=#__codelineno-0-510></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-511 name=__codelineno-0-511 href=#__codelineno-0-511></a>                    <span class=c1># start an authenticator for this context</span>
<a id=__codelineno-0-512 name=__codelineno-0-512 href=#__codelineno-0-512></a>                    <span class=n>z_auth</span> <span class=o>=</span> <span class=n>ThreadAuthenticator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=p>)</span>
<a id=__codelineno-0-513 name=__codelineno-0-513 href=#__codelineno-0-513></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-514 name=__codelineno-0-514 href=#__codelineno-0-514></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>allow</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>))</span>  <span class=c1># allow current address</span>
<a id=__codelineno-0-515 name=__codelineno-0-515 href=#__codelineno-0-515></a>
<a id=__codelineno-0-516 name=__codelineno-0-516 href=#__codelineno-0-516></a>                    <span class=c1># check if `IronHouse` is activated</span>
<a id=__codelineno-0-517 name=__codelineno-0-517 href=#__codelineno-0-517></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-518 name=__codelineno-0-518 href=#__codelineno-0-518></a>                        <span class=c1># tell authenticator to use the certificate from given valid dir</span>
<a id=__codelineno-0-519 name=__codelineno-0-519 href=#__codelineno-0-519></a>                        <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-520 name=__codelineno-0-520 href=#__codelineno-0-520></a>                            <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span>
<a id=__codelineno-0-521 name=__codelineno-0-521 href=#__codelineno-0-521></a>                        <span class=p>)</span>
<a id=__codelineno-0-522 name=__codelineno-0-522 href=#__codelineno-0-522></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-523 name=__codelineno-0-523 href=#__codelineno-0-523></a>                        <span class=c1># otherwise tell the authenticator how to handle the CURVE requests, if `StoneHouse` is activated</span>
<a id=__codelineno-0-524 name=__codelineno-0-524 href=#__codelineno-0-524></a>                        <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-525 name=__codelineno-0-525 href=#__codelineno-0-525></a>                            <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=n>auth</span><span class=o>.</span><span class=n>CURVE_ALLOW_ANY</span>
<a id=__codelineno-0-526 name=__codelineno-0-526 href=#__codelineno-0-526></a>                        <span class=p>)</span>
<a id=__codelineno-0-527 name=__codelineno-0-527 href=#__codelineno-0-527></a>
<a id=__codelineno-0-528 name=__codelineno-0-528 href=#__codelineno-0-528></a>                <span class=c1># define thread-safe messaging socket</span>
<a id=__codelineno-0-529 name=__codelineno-0-529 href=#__codelineno-0-529></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>msg_pattern</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-0-530 name=__codelineno-0-530 href=#__codelineno-0-530></a>
<a id=__codelineno-0-531 name=__codelineno-0-531 href=#__codelineno-0-531></a>                <span class=c1># define pub-sub flag</span>
<a id=__codelineno-0-532 name=__codelineno-0-532 href=#__codelineno-0-532></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-533 name=__codelineno-0-533 href=#__codelineno-0-533></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>set_hwm</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-534 name=__codelineno-0-534 href=#__codelineno-0-534></a>
<a id=__codelineno-0-535 name=__codelineno-0-535 href=#__codelineno-0-535></a>                <span class=c1># enable specified secure mode for the socket</span>
<a id=__codelineno-0-536 name=__codelineno-0-536 href=#__codelineno-0-536></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-537 name=__codelineno-0-537 href=#__codelineno-0-537></a>                    <span class=c1># load server key</span>
<a id=__codelineno-0-538 name=__codelineno-0-538 href=#__codelineno-0-538></a>                    <span class=n>server_secret_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-539 name=__codelineno-0-539 href=#__codelineno-0-539></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span> <span class=s2>&quot;server.key_secret&quot;</span>
<a id=__codelineno-0-540 name=__codelineno-0-540 href=#__codelineno-0-540></a>                    <span class=p>)</span>
<a id=__codelineno-0-541 name=__codelineno-0-541 href=#__codelineno-0-541></a>                    <span class=n>server_public</span><span class=p>,</span> <span class=n>server_secret</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span>
<a id=__codelineno-0-542 name=__codelineno-0-542 href=#__codelineno-0-542></a>                        <span class=n>server_secret_file</span>
<a id=__codelineno-0-543 name=__codelineno-0-543 href=#__codelineno-0-543></a>                    <span class=p>)</span>
<a id=__codelineno-0-544 name=__codelineno-0-544 href=#__codelineno-0-544></a>                    <span class=c1># load  all CURVE keys</span>
<a id=__codelineno-0-545 name=__codelineno-0-545 href=#__codelineno-0-545></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_secretkey</span> <span class=o>=</span> <span class=n>server_secret</span>
<a id=__codelineno-0-546 name=__codelineno-0-546 href=#__codelineno-0-546></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_publickey</span> <span class=o>=</span> <span class=n>server_public</span>
<a id=__codelineno-0-547 name=__codelineno-0-547 href=#__codelineno-0-547></a>                    <span class=c1># enable CURVE connection for this socket</span>
<a id=__codelineno-0-548 name=__codelineno-0-548 href=#__codelineno-0-548></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_server</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-549 name=__codelineno-0-549 href=#__codelineno-0-549></a>
<a id=__codelineno-0-550 name=__codelineno-0-550 href=#__codelineno-0-550></a>                <span class=c1># define exclusive socket options for patterns</span>
<a id=__codelineno-0-551 name=__codelineno-0-551 href=#__codelineno-0-551></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-552 name=__codelineno-0-552 href=#__codelineno-0-552></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt_string</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>SUBSCRIBE</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>
<a id=__codelineno-0-553 name=__codelineno-0-553 href=#__codelineno-0-553></a>
<a id=__codelineno-0-554 name=__codelineno-0-554 href=#__codelineno-0-554></a>                <span class=c1># if multiserver_mode is enabled, then assign port addresses to zmq socket</span>
<a id=__codelineno-0-555 name=__codelineno-0-555 href=#__codelineno-0-555></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-556 name=__codelineno-0-556 href=#__codelineno-0-556></a>                    <span class=c1># bind socket to given server protocol, address and ports</span>
<a id=__codelineno-0-557 name=__codelineno-0-557 href=#__codelineno-0-557></a>                    <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-558 name=__codelineno-0-558 href=#__codelineno-0-558></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span>
<a id=__codelineno-0-559 name=__codelineno-0-559 href=#__codelineno-0-559></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-560 name=__codelineno-0-560 href=#__codelineno-0-560></a>                        <span class=p>)</span>
<a id=__codelineno-0-561 name=__codelineno-0-561 href=#__codelineno-0-561></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-562 name=__codelineno-0-562 href=#__codelineno-0-562></a>                    <span class=c1># bind socket to given protocol, address and port normally</span>
<a id=__codelineno-0-563 name=__codelineno-0-563 href=#__codelineno-0-563></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span>
<a id=__codelineno-0-564 name=__codelineno-0-564 href=#__codelineno-0-564></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-565 name=__codelineno-0-565 href=#__codelineno-0-565></a>                    <span class=p>)</span>
<a id=__codelineno-0-566 name=__codelineno-0-566 href=#__codelineno-0-566></a>
<a id=__codelineno-0-567 name=__codelineno-0-567 href=#__codelineno-0-567></a>                <span class=c1># additional settings</span>
<a id=__codelineno-0-568 name=__codelineno-0-568 href=#__codelineno-0-568></a>                <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-569 name=__codelineno-0-569 href=#__codelineno-0-569></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-570 name=__codelineno-0-570 href=#__codelineno-0-570></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-571 name=__codelineno-0-571 href=#__codelineno-0-571></a>                        <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-572 name=__codelineno-0-572 href=#__codelineno-0-572></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<a id=__codelineno-0-573 name=__codelineno-0-573 href=#__codelineno-0-573></a>                                <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-574 name=__codelineno-0-574 href=#__codelineno-0-574></a>                            <span class=p>)</span>
<a id=__codelineno-0-575 name=__codelineno-0-575 href=#__codelineno-0-575></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-576 name=__codelineno-0-576 href=#__codelineno-0-576></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-577 name=__codelineno-0-577 href=#__codelineno-0-577></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-578 name=__codelineno-0-578 href=#__codelineno-0-578></a>                        <span class=p>)</span>
<a id=__codelineno-0-579 name=__codelineno-0-579 href=#__codelineno-0-579></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span> <span class=o>=</span> <span class=n>msg_pattern</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-0-580 name=__codelineno-0-580 href=#__codelineno-0-580></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-581 name=__codelineno-0-581 href=#__codelineno-0-581></a>
<a id=__codelineno-0-582 name=__codelineno-0-582 href=#__codelineno-0-582></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-583 name=__codelineno-0-583 href=#__codelineno-0-583></a>                        <span class=s2>&quot;Reliable transmission is enabled for this pattern with max-retries: </span><span class=si>{}</span><span class=s2> and timeout: </span><span class=si>{}</span><span class=s2> secs.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-584 name=__codelineno-0-584 href=#__codelineno-0-584></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>/</span> <span class=mi>1000</span>
<a id=__codelineno-0-585 name=__codelineno-0-585 href=#__codelineno-0-585></a>                        <span class=p>)</span>
<a id=__codelineno-0-586 name=__codelineno-0-586 href=#__codelineno-0-586></a>                    <span class=p>)</span>
<a id=__codelineno-0-587 name=__codelineno-0-587 href=#__codelineno-0-587></a>
<a id=__codelineno-0-588 name=__codelineno-0-588 href=#__codelineno-0-588></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-589 name=__codelineno-0-589 href=#__codelineno-0-589></a>                <span class=c1># otherwise log and raise error</span>
<a id=__codelineno-0-590 name=__codelineno-0-590 href=#__codelineno-0-590></a>                <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-591 name=__codelineno-0-591 href=#__codelineno-0-591></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-592 name=__codelineno-0-592 href=#__codelineno-0-592></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-593 name=__codelineno-0-593 href=#__codelineno-0-593></a>                        <span class=s2>&quot;Failed to activate Secure Mode: `</span><span class=si>{}</span><span class=s2>` for this connection!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-594 name=__codelineno-0-594 href=#__codelineno-0-594></a>                            <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-595 name=__codelineno-0-595 href=#__codelineno-0-595></a>                        <span class=p>)</span>
<a id=__codelineno-0-596 name=__codelineno-0-596 href=#__codelineno-0-596></a>                    <span class=p>)</span>
<a id=__codelineno-0-597 name=__codelineno-0-597 href=#__codelineno-0-597></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-598 name=__codelineno-0-598 href=#__codelineno-0-598></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-599 name=__codelineno-0-599 href=#__codelineno-0-599></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Receive Mode failed to activate </span><span class=si>{}</span><span class=s2> Mode at address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-600 name=__codelineno-0-600 href=#__codelineno-0-600></a>                            <span class=s2>&quot;Multi-Server&quot;</span>
<a id=__codelineno-0-601 name=__codelineno-0-601 href=#__codelineno-0-601></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span>
<a id=__codelineno-0-602 name=__codelineno-0-602 href=#__codelineno-0-602></a>                            <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span><span class=p>,</span>
<a id=__codelineno-0-603 name=__codelineno-0-603 href=#__codelineno-0-603></a>                            <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span>
<a id=__codelineno-0-604 name=__codelineno-0-604 href=#__codelineno-0-604></a>                            <span class=n>pattern</span><span class=p>,</span>
<a id=__codelineno-0-605 name=__codelineno-0-605 href=#__codelineno-0-605></a>                        <span class=p>)</span>
<a id=__codelineno-0-606 name=__codelineno-0-606 href=#__codelineno-0-606></a>                    <span class=p>)</span>
<a id=__codelineno-0-607 name=__codelineno-0-607 href=#__codelineno-0-607></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-608 name=__codelineno-0-608 href=#__codelineno-0-608></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-609 name=__codelineno-0-609 href=#__codelineno-0-609></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-610 name=__codelineno-0-610 href=#__codelineno-0-610></a>                            <span class=s2>&quot;Failed to activate Bidirectional Mode for this connection!&quot;</span>
<a id=__codelineno-0-611 name=__codelineno-0-611 href=#__codelineno-0-611></a>                        <span class=p>)</span>
<a id=__codelineno-0-612 name=__codelineno-0-612 href=#__codelineno-0-612></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-613 name=__codelineno-0-613 href=#__codelineno-0-613></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Receive Mode failed to bind address: </span><span class=si>{}</span><span class=s2> and pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-614 name=__codelineno-0-614 href=#__codelineno-0-614></a>                            <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-615 name=__codelineno-0-615 href=#__codelineno-0-615></a>                        <span class=p>)</span>
<a id=__codelineno-0-616 name=__codelineno-0-616 href=#__codelineno-0-616></a>                    <span class=p>)</span>
<a id=__codelineno-0-617 name=__codelineno-0-617 href=#__codelineno-0-617></a>
<a id=__codelineno-0-618 name=__codelineno-0-618 href=#__codelineno-0-618></a>            <span class=c1># Handle threaded queue mode</span>
<a id=__codelineno-0-619 name=__codelineno-0-619 href=#__codelineno-0-619></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-620 name=__codelineno-0-620 href=#__codelineno-0-620></a>                <span class=s2>&quot;Threaded Queue Mode is enabled by default for this connection.&quot;</span>
<a id=__codelineno-0-621 name=__codelineno-0-621 href=#__codelineno-0-621></a>            <span class=p>)</span>
<a id=__codelineno-0-622 name=__codelineno-0-622 href=#__codelineno-0-622></a>
<a id=__codelineno-0-623 name=__codelineno-0-623 href=#__codelineno-0-623></a>            <span class=c1># define deque and assign it to global var</span>
<a id=__codelineno-0-624 name=__codelineno-0-624 href=#__codelineno-0-624></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span> <span class=o>=</span> <span class=n>deque</span><span class=p>(</span><span class=n>maxlen</span><span class=o>=</span><span class=mi>96</span><span class=p>)</span>  <span class=c1># max len 96 to check overflow</span>
<a id=__codelineno-0-625 name=__codelineno-0-625 href=#__codelineno-0-625></a>
<a id=__codelineno-0-626 name=__codelineno-0-626 href=#__codelineno-0-626></a>            <span class=c1># initialize and start threaded recv_handler</span>
<a id=__codelineno-0-627 name=__codelineno-0-627 href=#__codelineno-0-627></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__recv_handler</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;NetGear&quot;</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>())</span>
<a id=__codelineno-0-628 name=__codelineno-0-628 href=#__codelineno-0-628></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-629 name=__codelineno-0-629 href=#__codelineno-0-629></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-630 name=__codelineno-0-630 href=#__codelineno-0-630></a>
<a id=__codelineno-0-631 name=__codelineno-0-631 href=#__codelineno-0-631></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>:</span>
<a id=__codelineno-0-632 name=__codelineno-0-632 href=#__codelineno-0-632></a>                <span class=c1># finally log progress</span>
<a id=__codelineno-0-633 name=__codelineno-0-633 href=#__codelineno-0-633></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-634 name=__codelineno-0-634 href=#__codelineno-0-634></a>                    <span class=s2>&quot;Successfully Binded to address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-635 name=__codelineno-0-635 href=#__codelineno-0-635></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-636 name=__codelineno-0-636 href=#__codelineno-0-636></a>                    <span class=p>)</span>
<a id=__codelineno-0-637 name=__codelineno-0-637 href=#__codelineno-0-637></a>                <span class=p>)</span>
<a id=__codelineno-0-638 name=__codelineno-0-638 href=#__codelineno-0-638></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-639 name=__codelineno-0-639 href=#__codelineno-0-639></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-640 name=__codelineno-0-640 href=#__codelineno-0-640></a>                        <span class=s2>&quot;JPEG Frame-Compression is activated for this connection with Colorspace:`</span><span class=si>{}</span><span class=s2>`, Quality:`</span><span class=si>{}</span><span class=s2>`%, Fastdct:`</span><span class=si>{}</span><span class=s2>`, and Fastupsample:`</span><span class=si>{}</span><span class=s2>`.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-641 name=__codelineno-0-641 href=#__codelineno-0-641></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-642 name=__codelineno-0-642 href=#__codelineno-0-642></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-643 name=__codelineno-0-643 href=#__codelineno-0-643></a>                            <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-644 name=__codelineno-0-644 href=#__codelineno-0-644></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-645 name=__codelineno-0-645 href=#__codelineno-0-645></a>                            <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-646 name=__codelineno-0-646 href=#__codelineno-0-646></a>                            <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-647 name=__codelineno-0-647 href=#__codelineno-0-647></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-648 name=__codelineno-0-648 href=#__codelineno-0-648></a>                            <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-649 name=__codelineno-0-649 href=#__codelineno-0-649></a>                        <span class=p>)</span>
<a id=__codelineno-0-650 name=__codelineno-0-650 href=#__codelineno-0-650></a>                    <span class=p>)</span>
<a id=__codelineno-0-651 name=__codelineno-0-651 href=#__codelineno-0-651></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-652 name=__codelineno-0-652 href=#__codelineno-0-652></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-653 name=__codelineno-0-653 href=#__codelineno-0-653></a>                        <span class=s2>&quot;Successfully enabled ZMQ Security Mechanism: `</span><span class=si>{}</span><span class=s2>` for this connection.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-654 name=__codelineno-0-654 href=#__codelineno-0-654></a>                            <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-655 name=__codelineno-0-655 href=#__codelineno-0-655></a>                        <span class=p>)</span>
<a id=__codelineno-0-656 name=__codelineno-0-656 href=#__codelineno-0-656></a>                    <span class=p>)</span>
<a id=__codelineno-0-657 name=__codelineno-0-657 href=#__codelineno-0-657></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Multi-threaded Receive Mode is successfully enabled.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-658 name=__codelineno-0-658 href=#__codelineno-0-658></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Unique System ID is </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__id</span><span class=p>))</span>
<a id=__codelineno-0-659 name=__codelineno-0-659 href=#__codelineno-0-659></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Receive Mode is now activated.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-660 name=__codelineno-0-660 href=#__codelineno-0-660></a>
<a id=__codelineno-0-661 name=__codelineno-0-661 href=#__codelineno-0-661></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-662 name=__codelineno-0-662 href=#__codelineno-0-662></a>
<a id=__codelineno-0-663 name=__codelineno-0-663 href=#__codelineno-0-663></a>            <span class=c1># otherwise default to `Send Mode`</span>
<a id=__codelineno-0-664 name=__codelineno-0-664 href=#__codelineno-0-664></a>
<a id=__codelineno-0-665 name=__codelineno-0-665 href=#__codelineno-0-665></a>            <span class=c1># define connection address</span>
<a id=__codelineno-0-666 name=__codelineno-0-666 href=#__codelineno-0-666></a>            <span class=k>if</span> <span class=n>address</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-667 name=__codelineno-0-667 href=#__codelineno-0-667></a>                <span class=n>address</span> <span class=o>=</span> <span class=s2>&quot;localhost&quot;</span>
<a id=__codelineno-0-668 name=__codelineno-0-668 href=#__codelineno-0-668></a>
<a id=__codelineno-0-669 name=__codelineno-0-669 href=#__codelineno-0-669></a>            <span class=c1># check if multiserver_mode is enabled</span>
<a id=__codelineno-0-670 name=__codelineno-0-670 href=#__codelineno-0-670></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-671 name=__codelineno-0-671 href=#__codelineno-0-671></a>                <span class=c1># check if unique server port address is assigned or not in multiserver_mode</span>
<a id=__codelineno-0-672 name=__codelineno-0-672 href=#__codelineno-0-672></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-673 name=__codelineno-0-673 href=#__codelineno-0-673></a>                    <span class=c1># raise error if not</span>
<a id=__codelineno-0-674 name=__codelineno-0-674 href=#__codelineno-0-674></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-675 name=__codelineno-0-675 href=#__codelineno-0-675></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Kindly provide a unique &amp; valid port value at Server-end. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-676 name=__codelineno-0-676 href=#__codelineno-0-676></a>                    <span class=p>)</span>
<a id=__codelineno-0-677 name=__codelineno-0-677 href=#__codelineno-0-677></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-678 name=__codelineno-0-678 href=#__codelineno-0-678></a>                    <span class=c1># otherwise log it</span>
<a id=__codelineno-0-679 name=__codelineno-0-679 href=#__codelineno-0-679></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-680 name=__codelineno-0-680 href=#__codelineno-0-680></a>                        <span class=s2>&quot;Enabling Multi-Server Mode at PORT: </span><span class=si>{}</span><span class=s2> on this device!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-681 name=__codelineno-0-681 href=#__codelineno-0-681></a>                            <span class=n>port</span>
<a id=__codelineno-0-682 name=__codelineno-0-682 href=#__codelineno-0-682></a>                        <span class=p>)</span>
<a id=__codelineno-0-683 name=__codelineno-0-683 href=#__codelineno-0-683></a>                    <span class=p>)</span>
<a id=__codelineno-0-684 name=__codelineno-0-684 href=#__codelineno-0-684></a>                <span class=c1># assign value to global variable</span>
<a id=__codelineno-0-685 name=__codelineno-0-685 href=#__codelineno-0-685></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__port</span> <span class=o>=</span> <span class=n>port</span>
<a id=__codelineno-0-686 name=__codelineno-0-686 href=#__codelineno-0-686></a>            <span class=c1># check if multiclient_mode is enabled</span>
<a id=__codelineno-0-687 name=__codelineno-0-687 href=#__codelineno-0-687></a>            <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-688 name=__codelineno-0-688 href=#__codelineno-0-688></a>                <span class=c1># check if unique client port address list/tuple is assigned or not in multiclient_mode</span>
<a id=__codelineno-0-689 name=__codelineno-0-689 href=#__codelineno-0-689></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>port</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>)):</span>
<a id=__codelineno-0-690 name=__codelineno-0-690 href=#__codelineno-0-690></a>                    <span class=c1># raise error if not</span>
<a id=__codelineno-0-691 name=__codelineno-0-691 href=#__codelineno-0-691></a>                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-692 name=__codelineno-0-692 href=#__codelineno-0-692></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Incorrect port value! Kindly provide a list/tuple of Client ports while Multi-Client mode is enabled. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-693 name=__codelineno-0-693 href=#__codelineno-0-693></a>                    <span class=p>)</span>
<a id=__codelineno-0-694 name=__codelineno-0-694 href=#__codelineno-0-694></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-695 name=__codelineno-0-695 href=#__codelineno-0-695></a>                    <span class=c1># otherwise log it</span>
<a id=__codelineno-0-696 name=__codelineno-0-696 href=#__codelineno-0-696></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-697 name=__codelineno-0-697 href=#__codelineno-0-697></a>                        <span class=s2>&quot;Enabling Multi-Client Mode at PORTS: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-698 name=__codelineno-0-698 href=#__codelineno-0-698></a>                    <span class=p>)</span>
<a id=__codelineno-0-699 name=__codelineno-0-699 href=#__codelineno-0-699></a>                <span class=c1># create port address buffer for keeping track of connected client ports</span>
<a id=__codelineno-0-700 name=__codelineno-0-700 href=#__codelineno-0-700></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-701 name=__codelineno-0-701 href=#__codelineno-0-701></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-702 name=__codelineno-0-702 href=#__codelineno-0-702></a>                <span class=c1># otherwise assign local port address if None</span>
<a id=__codelineno-0-703 name=__codelineno-0-703 href=#__codelineno-0-703></a>                <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-704 name=__codelineno-0-704 href=#__codelineno-0-704></a>                    <span class=n>port</span> <span class=o>=</span> <span class=s2>&quot;5555&quot;</span>
<a id=__codelineno-0-705 name=__codelineno-0-705 href=#__codelineno-0-705></a>
<a id=__codelineno-0-706 name=__codelineno-0-706 href=#__codelineno-0-706></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-707 name=__codelineno-0-707 href=#__codelineno-0-707></a>                <span class=c1># activate secure_mode threaded authenticator</span>
<a id=__codelineno-0-708 name=__codelineno-0-708 href=#__codelineno-0-708></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-709 name=__codelineno-0-709 href=#__codelineno-0-709></a>                    <span class=c1># start an authenticator for this context</span>
<a id=__codelineno-0-710 name=__codelineno-0-710 href=#__codelineno-0-710></a>                    <span class=n>z_auth</span> <span class=o>=</span> <span class=n>ThreadAuthenticator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=p>)</span>
<a id=__codelineno-0-711 name=__codelineno-0-711 href=#__codelineno-0-711></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-712 name=__codelineno-0-712 href=#__codelineno-0-712></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>allow</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>))</span>  <span class=c1># allow current address</span>
<a id=__codelineno-0-713 name=__codelineno-0-713 href=#__codelineno-0-713></a>
<a id=__codelineno-0-714 name=__codelineno-0-714 href=#__codelineno-0-714></a>                    <span class=c1># check if `IronHouse` is activated</span>
<a id=__codelineno-0-715 name=__codelineno-0-715 href=#__codelineno-0-715></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-716 name=__codelineno-0-716 href=#__codelineno-0-716></a>                        <span class=c1># tell authenticator to use the certificate from given valid dir</span>
<a id=__codelineno-0-717 name=__codelineno-0-717 href=#__codelineno-0-717></a>                        <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-718 name=__codelineno-0-718 href=#__codelineno-0-718></a>                            <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span>
<a id=__codelineno-0-719 name=__codelineno-0-719 href=#__codelineno-0-719></a>                        <span class=p>)</span>
<a id=__codelineno-0-720 name=__codelineno-0-720 href=#__codelineno-0-720></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-721 name=__codelineno-0-721 href=#__codelineno-0-721></a>                        <span class=c1># otherwise tell the authenticator how to handle the CURVE requests, if `StoneHouse` is activated</span>
<a id=__codelineno-0-722 name=__codelineno-0-722 href=#__codelineno-0-722></a>                        <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-723 name=__codelineno-0-723 href=#__codelineno-0-723></a>                            <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=n>auth</span><span class=o>.</span><span class=n>CURVE_ALLOW_ANY</span>
<a id=__codelineno-0-724 name=__codelineno-0-724 href=#__codelineno-0-724></a>                        <span class=p>)</span>
<a id=__codelineno-0-725 name=__codelineno-0-725 href=#__codelineno-0-725></a>
<a id=__codelineno-0-726 name=__codelineno-0-726 href=#__codelineno-0-726></a>                <span class=c1># define thread-safe messaging socket</span>
<a id=__codelineno-0-727 name=__codelineno-0-727 href=#__codelineno-0-727></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>msg_pattern</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<a id=__codelineno-0-728 name=__codelineno-0-728 href=#__codelineno-0-728></a>
<a id=__codelineno-0-729 name=__codelineno-0-729 href=#__codelineno-0-729></a>                <span class=c1># if req/rep pattern, define additional flags</span>
<a id=__codelineno-0-730 name=__codelineno-0-730 href=#__codelineno-0-730></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-0-731 name=__codelineno-0-731 href=#__codelineno-0-731></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>REQ_RELAXED</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-732 name=__codelineno-0-732 href=#__codelineno-0-732></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>REQ_CORRELATE</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-733 name=__codelineno-0-733 href=#__codelineno-0-733></a>
<a id=__codelineno-0-734 name=__codelineno-0-734 href=#__codelineno-0-734></a>                <span class=c1># if pub/sub pattern, define additional optimizer</span>
<a id=__codelineno-0-735 name=__codelineno-0-735 href=#__codelineno-0-735></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-736 name=__codelineno-0-736 href=#__codelineno-0-736></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>set_hwm</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-737 name=__codelineno-0-737 href=#__codelineno-0-737></a>
<a id=__codelineno-0-738 name=__codelineno-0-738 href=#__codelineno-0-738></a>                <span class=c1># enable specified secure mode for the socket</span>
<a id=__codelineno-0-739 name=__codelineno-0-739 href=#__codelineno-0-739></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-740 name=__codelineno-0-740 href=#__codelineno-0-740></a>                    <span class=c1># load client key</span>
<a id=__codelineno-0-741 name=__codelineno-0-741 href=#__codelineno-0-741></a>                    <span class=n>client_secret_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-742 name=__codelineno-0-742 href=#__codelineno-0-742></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span> <span class=s2>&quot;client.key_secret&quot;</span>
<a id=__codelineno-0-743 name=__codelineno-0-743 href=#__codelineno-0-743></a>                    <span class=p>)</span>
<a id=__codelineno-0-744 name=__codelineno-0-744 href=#__codelineno-0-744></a>                    <span class=n>client_public</span><span class=p>,</span> <span class=n>client_secret</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span>
<a id=__codelineno-0-745 name=__codelineno-0-745 href=#__codelineno-0-745></a>                        <span class=n>client_secret_file</span>
<a id=__codelineno-0-746 name=__codelineno-0-746 href=#__codelineno-0-746></a>                    <span class=p>)</span>
<a id=__codelineno-0-747 name=__codelineno-0-747 href=#__codelineno-0-747></a>                    <span class=c1># load  all CURVE keys</span>
<a id=__codelineno-0-748 name=__codelineno-0-748 href=#__codelineno-0-748></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_secretkey</span> <span class=o>=</span> <span class=n>client_secret</span>
<a id=__codelineno-0-749 name=__codelineno-0-749 href=#__codelineno-0-749></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_publickey</span> <span class=o>=</span> <span class=n>client_public</span>
<a id=__codelineno-0-750 name=__codelineno-0-750 href=#__codelineno-0-750></a>                    <span class=c1># load server key</span>
<a id=__codelineno-0-751 name=__codelineno-0-751 href=#__codelineno-0-751></a>                    <span class=n>server_public_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-752 name=__codelineno-0-752 href=#__codelineno-0-752></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span> <span class=s2>&quot;server.key&quot;</span>
<a id=__codelineno-0-753 name=__codelineno-0-753 href=#__codelineno-0-753></a>                    <span class=p>)</span>
<a id=__codelineno-0-754 name=__codelineno-0-754 href=#__codelineno-0-754></a>                    <span class=n>server_public</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span><span class=n>server_public_file</span><span class=p>)</span>
<a id=__codelineno-0-755 name=__codelineno-0-755 href=#__codelineno-0-755></a>                    <span class=c1># inject public key to make a CURVE connection.</span>
<a id=__codelineno-0-756 name=__codelineno-0-756 href=#__codelineno-0-756></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_serverkey</span> <span class=o>=</span> <span class=n>server_public</span>
<a id=__codelineno-0-757 name=__codelineno-0-757 href=#__codelineno-0-757></a>
<a id=__codelineno-0-758 name=__codelineno-0-758 href=#__codelineno-0-758></a>                <span class=c1># check if multi-client_mode is enabled</span>
<a id=__codelineno-0-759 name=__codelineno-0-759 href=#__codelineno-0-759></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-760 name=__codelineno-0-760 href=#__codelineno-0-760></a>                    <span class=c1># bind socket to given server protocol, address and ports</span>
<a id=__codelineno-0-761 name=__codelineno-0-761 href=#__codelineno-0-761></a>                    <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-762 name=__codelineno-0-762 href=#__codelineno-0-762></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
<a id=__codelineno-0-763 name=__codelineno-0-763 href=#__codelineno-0-763></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-764 name=__codelineno-0-764 href=#__codelineno-0-764></a>                        <span class=p>)</span>
<a id=__codelineno-0-765 name=__codelineno-0-765 href=#__codelineno-0-765></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-766 name=__codelineno-0-766 href=#__codelineno-0-766></a>                    <span class=c1># handle SSH tuneling if enabled</span>
<a id=__codelineno-0-767 name=__codelineno-0-767 href=#__codelineno-0-767></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-768 name=__codelineno-0-768 href=#__codelineno-0-768></a>                        <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-769 name=__codelineno-0-769 href=#__codelineno-0-769></a>                        <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-770 name=__codelineno-0-770 href=#__codelineno-0-770></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-771 name=__codelineno-0-771 href=#__codelineno-0-771></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>),</span>
<a id=__codelineno-0-772 name=__codelineno-0-772 href=#__codelineno-0-772></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-773 name=__codelineno-0-773 href=#__codelineno-0-773></a>                            <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-774 name=__codelineno-0-774 href=#__codelineno-0-774></a>                            <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-775 name=__codelineno-0-775 href=#__codelineno-0-775></a>                            <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-776 name=__codelineno-0-776 href=#__codelineno-0-776></a>                        <span class=p>)</span>
<a id=__codelineno-0-777 name=__codelineno-0-777 href=#__codelineno-0-777></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-778 name=__codelineno-0-778 href=#__codelineno-0-778></a>                        <span class=c1># connect socket to given protocol, address and port</span>
<a id=__codelineno-0-779 name=__codelineno-0-779 href=#__codelineno-0-779></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
<a id=__codelineno-0-780 name=__codelineno-0-780 href=#__codelineno-0-780></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-781 name=__codelineno-0-781 href=#__codelineno-0-781></a>                        <span class=p>)</span>
<a id=__codelineno-0-782 name=__codelineno-0-782 href=#__codelineno-0-782></a>
<a id=__codelineno-0-783 name=__codelineno-0-783 href=#__codelineno-0-783></a>                <span class=c1># additional settings</span>
<a id=__codelineno-0-784 name=__codelineno-0-784 href=#__codelineno-0-784></a>                <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-785 name=__codelineno-0-785 href=#__codelineno-0-785></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-786 name=__codelineno-0-786 href=#__codelineno-0-786></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-787 name=__codelineno-0-787 href=#__codelineno-0-787></a>                        <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-788 name=__codelineno-0-788 href=#__codelineno-0-788></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<a id=__codelineno-0-789 name=__codelineno-0-789 href=#__codelineno-0-789></a>                                <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-790 name=__codelineno-0-790 href=#__codelineno-0-790></a>                            <span class=p>)</span>
<a id=__codelineno-0-791 name=__codelineno-0-791 href=#__codelineno-0-791></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-792 name=__codelineno-0-792 href=#__codelineno-0-792></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-793 name=__codelineno-0-793 href=#__codelineno-0-793></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-794 name=__codelineno-0-794 href=#__codelineno-0-794></a>                        <span class=p>)</span>
<a id=__codelineno-0-795 name=__codelineno-0-795 href=#__codelineno-0-795></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span> <span class=o>=</span> <span class=n>msg_pattern</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<a id=__codelineno-0-796 name=__codelineno-0-796 href=#__codelineno-0-796></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-797 name=__codelineno-0-797 href=#__codelineno-0-797></a>
<a id=__codelineno-0-798 name=__codelineno-0-798 href=#__codelineno-0-798></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-799 name=__codelineno-0-799 href=#__codelineno-0-799></a>                        <span class=s2>&quot;Reliable transmission is enabled for this pattern with max-retries: </span><span class=si>{}</span><span class=s2> and timeout: </span><span class=si>{}</span><span class=s2> secs.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-800 name=__codelineno-0-800 href=#__codelineno-0-800></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>/</span> <span class=mi>1000</span>
<a id=__codelineno-0-801 name=__codelineno-0-801 href=#__codelineno-0-801></a>                        <span class=p>)</span>
<a id=__codelineno-0-802 name=__codelineno-0-802 href=#__codelineno-0-802></a>                    <span class=p>)</span>
<a id=__codelineno-0-803 name=__codelineno-0-803 href=#__codelineno-0-803></a>
<a id=__codelineno-0-804 name=__codelineno-0-804 href=#__codelineno-0-804></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-805 name=__codelineno-0-805 href=#__codelineno-0-805></a>                <span class=c1># otherwise log and raise error</span>
<a id=__codelineno-0-806 name=__codelineno-0-806 href=#__codelineno-0-806></a>                <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-807 name=__codelineno-0-807 href=#__codelineno-0-807></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-808 name=__codelineno-0-808 href=#__codelineno-0-808></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-809 name=__codelineno-0-809 href=#__codelineno-0-809></a>                        <span class=s2>&quot;Failed to activate Secure Mode: `</span><span class=si>{}</span><span class=s2>` for this connection!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-810 name=__codelineno-0-810 href=#__codelineno-0-810></a>                            <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-811 name=__codelineno-0-811 href=#__codelineno-0-811></a>                        <span class=p>)</span>
<a id=__codelineno-0-812 name=__codelineno-0-812 href=#__codelineno-0-812></a>                    <span class=p>)</span>
<a id=__codelineno-0-813 name=__codelineno-0-813 href=#__codelineno-0-813></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-814 name=__codelineno-0-814 href=#__codelineno-0-814></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-815 name=__codelineno-0-815 href=#__codelineno-0-815></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Send Mode failed to activate </span><span class=si>{}</span><span class=s2> Mode at address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-816 name=__codelineno-0-816 href=#__codelineno-0-816></a>                            <span class=s2>&quot;Multi-Server&quot;</span>
<a id=__codelineno-0-817 name=__codelineno-0-817 href=#__codelineno-0-817></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span>
<a id=__codelineno-0-818 name=__codelineno-0-818 href=#__codelineno-0-818></a>                            <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span><span class=p>,</span>
<a id=__codelineno-0-819 name=__codelineno-0-819 href=#__codelineno-0-819></a>                            <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span>
<a id=__codelineno-0-820 name=__codelineno-0-820 href=#__codelineno-0-820></a>                            <span class=n>pattern</span><span class=p>,</span>
<a id=__codelineno-0-821 name=__codelineno-0-821 href=#__codelineno-0-821></a>                        <span class=p>)</span>
<a id=__codelineno-0-822 name=__codelineno-0-822 href=#__codelineno-0-822></a>                    <span class=p>)</span>
<a id=__codelineno-0-823 name=__codelineno-0-823 href=#__codelineno-0-823></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-824 name=__codelineno-0-824 href=#__codelineno-0-824></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-825 name=__codelineno-0-825 href=#__codelineno-0-825></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-826 name=__codelineno-0-826 href=#__codelineno-0-826></a>                            <span class=s2>&quot;Failed to activate Bidirectional Mode for this connection!&quot;</span>
<a id=__codelineno-0-827 name=__codelineno-0-827 href=#__codelineno-0-827></a>                        <span class=p>)</span>
<a id=__codelineno-0-828 name=__codelineno-0-828 href=#__codelineno-0-828></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-829 name=__codelineno-0-829 href=#__codelineno-0-829></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-830 name=__codelineno-0-830 href=#__codelineno-0-830></a>                            <span class=s2>&quot;Failed to initiate SSH Tunneling Mode for this server with `</span><span class=si>{}</span><span class=s2>` back-end!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-831 name=__codelineno-0-831 href=#__codelineno-0-831></a>                                <span class=s2>&quot;paramiko&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=k>else</span> <span class=s2>&quot;pexpect&quot;</span>
<a id=__codelineno-0-832 name=__codelineno-0-832 href=#__codelineno-0-832></a>                            <span class=p>)</span>
<a id=__codelineno-0-833 name=__codelineno-0-833 href=#__codelineno-0-833></a>                        <span class=p>)</span>
<a id=__codelineno-0-834 name=__codelineno-0-834 href=#__codelineno-0-834></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-835 name=__codelineno-0-835 href=#__codelineno-0-835></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Send Mode failed to connect address: </span><span class=si>{}</span><span class=s2> and pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-836 name=__codelineno-0-836 href=#__codelineno-0-836></a>                            <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-837 name=__codelineno-0-837 href=#__codelineno-0-837></a>                        <span class=p>)</span>
<a id=__codelineno-0-838 name=__codelineno-0-838 href=#__codelineno-0-838></a>                    <span class=p>)</span>
<a id=__codelineno-0-839 name=__codelineno-0-839 href=#__codelineno-0-839></a>
<a id=__codelineno-0-840 name=__codelineno-0-840 href=#__codelineno-0-840></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>:</span>
<a id=__codelineno-0-841 name=__codelineno-0-841 href=#__codelineno-0-841></a>                <span class=c1># finally log progress</span>
<a id=__codelineno-0-842 name=__codelineno-0-842 href=#__codelineno-0-842></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-843 name=__codelineno-0-843 href=#__codelineno-0-843></a>                    <span class=s2>&quot;Successfully connected to address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-844 name=__codelineno-0-844 href=#__codelineno-0-844></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-845 name=__codelineno-0-845 href=#__codelineno-0-845></a>                    <span class=p>)</span>
<a id=__codelineno-0-846 name=__codelineno-0-846 href=#__codelineno-0-846></a>                <span class=p>)</span>
<a id=__codelineno-0-847 name=__codelineno-0-847 href=#__codelineno-0-847></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-848 name=__codelineno-0-848 href=#__codelineno-0-848></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-849 name=__codelineno-0-849 href=#__codelineno-0-849></a>                        <span class=s2>&quot;JPEG Frame-Compression is activated for this connection with Colorspace:`</span><span class=si>{}</span><span class=s2>`, Quality:`</span><span class=si>{}</span><span class=s2>`%, Fastdct:`</span><span class=si>{}</span><span class=s2>`, and Fastupsample:`</span><span class=si>{}</span><span class=s2>`.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-850 name=__codelineno-0-850 href=#__codelineno-0-850></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-851 name=__codelineno-0-851 href=#__codelineno-0-851></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-852 name=__codelineno-0-852 href=#__codelineno-0-852></a>                            <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-853 name=__codelineno-0-853 href=#__codelineno-0-853></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-854 name=__codelineno-0-854 href=#__codelineno-0-854></a>                            <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-855 name=__codelineno-0-855 href=#__codelineno-0-855></a>                            <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-856 name=__codelineno-0-856 href=#__codelineno-0-856></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-857 name=__codelineno-0-857 href=#__codelineno-0-857></a>                            <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-858 name=__codelineno-0-858 href=#__codelineno-0-858></a>                        <span class=p>)</span>
<a id=__codelineno-0-859 name=__codelineno-0-859 href=#__codelineno-0-859></a>                    <span class=p>)</span>
<a id=__codelineno-0-860 name=__codelineno-0-860 href=#__codelineno-0-860></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-861 name=__codelineno-0-861 href=#__codelineno-0-861></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-862 name=__codelineno-0-862 href=#__codelineno-0-862></a>                        <span class=s2>&quot;Enabled ZMQ Security Mechanism: `</span><span class=si>{}</span><span class=s2>` for this connection.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-863 name=__codelineno-0-863 href=#__codelineno-0-863></a>                            <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-864 name=__codelineno-0-864 href=#__codelineno-0-864></a>                        <span class=p>)</span>
<a id=__codelineno-0-865 name=__codelineno-0-865 href=#__codelineno-0-865></a>                    <span class=p>)</span>
<a id=__codelineno-0-866 name=__codelineno-0-866 href=#__codelineno-0-866></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Unique System ID is </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__id</span><span class=p>))</span>
<a id=__codelineno-0-867 name=__codelineno-0-867 href=#__codelineno-0-867></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-868 name=__codelineno-0-868 href=#__codelineno-0-868></a>                    <span class=s2>&quot;Send Mode is successfully activated and ready to send data.&quot;</span>
<a id=__codelineno-0-869 name=__codelineno-0-869 href=#__codelineno-0-869></a>                <span class=p>)</span>
<a id=__codelineno-0-870 name=__codelineno-0-870 href=#__codelineno-0-870></a>
<a id=__codelineno-0-871 name=__codelineno-0-871 href=#__codelineno-0-871></a>    <span class=k>def</span> <span class=nf>__recv_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-0-872 name=__codelineno-0-872 href=#__codelineno-0-872></a>
<a id=__codelineno-0-873 name=__codelineno-0-873 href=#__codelineno-0-873></a>        <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-874 name=__codelineno-0-874 href=#__codelineno-0-874></a><span class=sd>        A threaded receiver handler, that keep iterating data from ZMQ socket to a internally monitored deque,</span>
<a id=__codelineno-0-875 name=__codelineno-0-875 href=#__codelineno-0-875></a><span class=sd>        until the thread is terminated, or socket disconnects.</span>
<a id=__codelineno-0-876 name=__codelineno-0-876 href=#__codelineno-0-876></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-0-877 name=__codelineno-0-877 href=#__codelineno-0-877></a>        <span class=c1># initialize frame variable</span>
<a id=__codelineno-0-878 name=__codelineno-0-878 href=#__codelineno-0-878></a>        <span class=n>frame</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-879 name=__codelineno-0-879 href=#__codelineno-0-879></a>
<a id=__codelineno-0-880 name=__codelineno-0-880 href=#__codelineno-0-880></a>        <span class=c1># keep looping infinitely until the thread is terminated</span>
<a id=__codelineno-0-881 name=__codelineno-0-881 href=#__codelineno-0-881></a>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span><span class=p>:</span>
<a id=__codelineno-0-882 name=__codelineno-0-882 href=#__codelineno-0-882></a>
<a id=__codelineno-0-883 name=__codelineno-0-883 href=#__codelineno-0-883></a>            <span class=c1># check queue buffer for overflow</span>
<a id=__codelineno-0-884 name=__codelineno-0-884 href=#__codelineno-0-884></a>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>96</span><span class=p>:</span>
<a id=__codelineno-0-885 name=__codelineno-0-885 href=#__codelineno-0-885></a>                <span class=c1># stop iterating if overflowing occurs</span>
<a id=__codelineno-0-886 name=__codelineno-0-886 href=#__codelineno-0-886></a>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.000001</span><span class=p>)</span>
<a id=__codelineno-0-887 name=__codelineno-0-887 href=#__codelineno-0-887></a>                <span class=k>continue</span>
<a id=__codelineno-0-888 name=__codelineno-0-888 href=#__codelineno-0-888></a>
<a id=__codelineno-0-889 name=__codelineno-0-889 href=#__codelineno-0-889></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-890 name=__codelineno-0-890 href=#__codelineno-0-890></a>                <span class=n>socks</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>*</span> <span class=mi>3</span><span class=p>))</span>
<a id=__codelineno-0-891 name=__codelineno-0-891 href=#__codelineno-0-891></a>                <span class=k>if</span> <span class=n>socks</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span> <span class=o>==</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>:</span>
<a id=__codelineno-0-892 name=__codelineno-0-892 href=#__codelineno-0-892></a>                    <span class=n>msg_json</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv_json</span><span class=p>(</span>
<a id=__codelineno-0-893 name=__codelineno-0-893 href=#__codelineno-0-893></a>                        <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>|</span> <span class=n>zmq</span><span class=o>.</span><span class=n>DONTWAIT</span>
<a id=__codelineno-0-894 name=__codelineno-0-894 href=#__codelineno-0-894></a>                    <span class=p>)</span>
<a id=__codelineno-0-895 name=__codelineno-0-895 href=#__codelineno-0-895></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-896 name=__codelineno-0-896 href=#__codelineno-0-896></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;No response from Server(s), Reconnecting again...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-897 name=__codelineno-0-897 href=#__codelineno-0-897></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>(</span><span class=n>linger</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-898 name=__codelineno-0-898 href=#__codelineno-0-898></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span>
<a id=__codelineno-0-899 name=__codelineno-0-899 href=#__codelineno-0-899></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-0-900 name=__codelineno-0-900 href=#__codelineno-0-900></a>
<a id=__codelineno-0-901 name=__codelineno-0-901 href=#__codelineno-0-901></a>                    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>):</span>
<a id=__codelineno-0-902 name=__codelineno-0-902 href=#__codelineno-0-902></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-903 name=__codelineno-0-903 href=#__codelineno-0-903></a>                            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;All Servers seems to be offline, Abandoning!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-904 name=__codelineno-0-904 href=#__codelineno-0-904></a>                        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-905 name=__codelineno-0-905 href=#__codelineno-0-905></a>                            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Server seems to be offline, Abandoning!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-906 name=__codelineno-0-906 href=#__codelineno-0-906></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-907 name=__codelineno-0-907 href=#__codelineno-0-907></a>                        <span class=k>continue</span>
<a id=__codelineno-0-908 name=__codelineno-0-908 href=#__codelineno-0-908></a>
<a id=__codelineno-0-909 name=__codelineno-0-909 href=#__codelineno-0-909></a>                    <span class=c1># Create new connection</span>
<a id=__codelineno-0-910 name=__codelineno-0-910 href=#__codelineno-0-910></a>                    <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-911 name=__codelineno-0-911 href=#__codelineno-0-911></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span>
<a id=__codelineno-0-912 name=__codelineno-0-912 href=#__codelineno-0-912></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span>
<a id=__codelineno-0-913 name=__codelineno-0-913 href=#__codelineno-0-913></a>                        <span class=p>)</span>
<a id=__codelineno-0-914 name=__codelineno-0-914 href=#__codelineno-0-914></a>                        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-915 name=__codelineno-0-915 href=#__codelineno-0-915></a>                            <span class=k>for</span> <span class=n>_connection</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>:</span>
<a id=__codelineno-0-916 name=__codelineno-0-916 href=#__codelineno-0-916></a>                                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>_connection</span><span class=p>)</span>
<a id=__codelineno-0-917 name=__codelineno-0-917 href=#__codelineno-0-917></a>                        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-918 name=__codelineno-0-918 href=#__codelineno-0-918></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>)</span>
<a id=__codelineno-0-919 name=__codelineno-0-919 href=#__codelineno-0-919></a>                    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-920 name=__codelineno-0-920 href=#__codelineno-0-920></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-921 name=__codelineno-0-921 href=#__codelineno-0-921></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-922 name=__codelineno-0-922 href=#__codelineno-0-922></a>                        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;API failed to restart the Client-end!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-923 name=__codelineno-0-923 href=#__codelineno-0-923></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-924 name=__codelineno-0-924 href=#__codelineno-0-924></a>
<a id=__codelineno-0-925 name=__codelineno-0-925 href=#__codelineno-0-925></a>                    <span class=k>continue</span>
<a id=__codelineno-0-926 name=__codelineno-0-926 href=#__codelineno-0-926></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-927 name=__codelineno-0-927 href=#__codelineno-0-927></a>                <span class=n>msg_json</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv_json</span><span class=p>(</span><span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>)</span>
<a id=__codelineno-0-928 name=__codelineno-0-928 href=#__codelineno-0-928></a>
<a id=__codelineno-0-929 name=__codelineno-0-929 href=#__codelineno-0-929></a>            <span class=c1># check if terminate_flag` received</span>
<a id=__codelineno-0-930 name=__codelineno-0-930 href=#__codelineno-0-930></a>            <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;terminate_flag&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-931 name=__codelineno-0-931 href=#__codelineno-0-931></a>                <span class=c1># if multiserver_mode is enabled</span>
<a id=__codelineno-0-932 name=__codelineno-0-932 href=#__codelineno-0-932></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-933 name=__codelineno-0-933 href=#__codelineno-0-933></a>                    <span class=c1># check and remove from which ports signal is received</span>
<a id=__codelineno-0-934 name=__codelineno-0-934 href=#__codelineno-0-934></a>                    <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=p>:</span>
<a id=__codelineno-0-935 name=__codelineno-0-935 href=#__codelineno-0-935></a>                        <span class=c1># if pattern is 1, then send back server the info about termination</span>
<a id=__codelineno-0-936 name=__codelineno-0-936 href=#__codelineno-0-936></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-0-937 name=__codelineno-0-937 href=#__codelineno-0-937></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_string</span><span class=p>(</span>
<a id=__codelineno-0-938 name=__codelineno-0-938 href=#__codelineno-0-938></a>                                <span class=s2>&quot;Termination signal successfully received at client!&quot;</span>
<a id=__codelineno-0-939 name=__codelineno-0-939 href=#__codelineno-0-939></a>                            <span class=p>)</span>
<a id=__codelineno-0-940 name=__codelineno-0-940 href=#__codelineno-0-940></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>])</span>
<a id=__codelineno-0-941 name=__codelineno-0-941 href=#__codelineno-0-941></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-942 name=__codelineno-0-942 href=#__codelineno-0-942></a>                            <span class=s2>&quot;Termination signal received from Server at port: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-943 name=__codelineno-0-943 href=#__codelineno-0-943></a>                                <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span>
<a id=__codelineno-0-944 name=__codelineno-0-944 href=#__codelineno-0-944></a>                            <span class=p>)</span>
<a id=__codelineno-0-945 name=__codelineno-0-945 href=#__codelineno-0-945></a>                        <span class=p>)</span>
<a id=__codelineno-0-946 name=__codelineno-0-946 href=#__codelineno-0-946></a>                    <span class=c1># if termination signal received from all servers then exit client.</span>
<a id=__codelineno-0-947 name=__codelineno-0-947 href=#__codelineno-0-947></a>                    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=p>:</span>
<a id=__codelineno-0-948 name=__codelineno-0-948 href=#__codelineno-0-948></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-949 name=__codelineno-0-949 href=#__codelineno-0-949></a>                            <span class=s2>&quot;Termination signal received from all Servers!!!&quot;</span>
<a id=__codelineno-0-950 name=__codelineno-0-950 href=#__codelineno-0-950></a>                        <span class=p>)</span>
<a id=__codelineno-0-951 name=__codelineno-0-951 href=#__codelineno-0-951></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># termination</span>
<a id=__codelineno-0-952 name=__codelineno-0-952 href=#__codelineno-0-952></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-953 name=__codelineno-0-953 href=#__codelineno-0-953></a>                    <span class=c1># if pattern is 1, then send back server the info about termination</span>
<a id=__codelineno-0-954 name=__codelineno-0-954 href=#__codelineno-0-954></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-0-955 name=__codelineno-0-955 href=#__codelineno-0-955></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_string</span><span class=p>(</span>
<a id=__codelineno-0-956 name=__codelineno-0-956 href=#__codelineno-0-956></a>                            <span class=s2>&quot;Termination signal successfully received at Client&#39;s end!&quot;</span>
<a id=__codelineno-0-957 name=__codelineno-0-957 href=#__codelineno-0-957></a>                        <span class=p>)</span>
<a id=__codelineno-0-958 name=__codelineno-0-958 href=#__codelineno-0-958></a>                    <span class=c1># termination</span>
<a id=__codelineno-0-959 name=__codelineno-0-959 href=#__codelineno-0-959></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-960 name=__codelineno-0-960 href=#__codelineno-0-960></a>                    <span class=c1># notify client</span>
<a id=__codelineno-0-961 name=__codelineno-0-961 href=#__codelineno-0-961></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-962 name=__codelineno-0-962 href=#__codelineno-0-962></a>                        <span class=s2>&quot;Termination signal received from server!&quot;</span>
<a id=__codelineno-0-963 name=__codelineno-0-963 href=#__codelineno-0-963></a>                    <span class=p>)</span>
<a id=__codelineno-0-964 name=__codelineno-0-964 href=#__codelineno-0-964></a>                <span class=k>continue</span>
<a id=__codelineno-0-965 name=__codelineno-0-965 href=#__codelineno-0-965></a>
<a id=__codelineno-0-966 name=__codelineno-0-966 href=#__codelineno-0-966></a>            <span class=n>msg_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span>
<a id=__codelineno-0-967 name=__codelineno-0-967 href=#__codelineno-0-967></a>                <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>|</span> <span class=n>zmq</span><span class=o>.</span><span class=n>DONTWAIT</span><span class=p>,</span>
<a id=__codelineno-0-968 name=__codelineno-0-968 href=#__codelineno-0-968></a>                <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span>
<a id=__codelineno-0-969 name=__codelineno-0-969 href=#__codelineno-0-969></a>                <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span><span class=p>,</span>
<a id=__codelineno-0-970 name=__codelineno-0-970 href=#__codelineno-0-970></a>            <span class=p>)</span>
<a id=__codelineno-0-971 name=__codelineno-0-971 href=#__codelineno-0-971></a>
<a id=__codelineno-0-972 name=__codelineno-0-972 href=#__codelineno-0-972></a>            <span class=c1># handle data transfer in synchronous modes.</span>
<a id=__codelineno-0-973 name=__codelineno-0-973 href=#__codelineno-0-973></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-974 name=__codelineno-0-974 href=#__codelineno-0-974></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-975 name=__codelineno-0-975 href=#__codelineno-0-975></a>                    <span class=c1># check if we are returning `ndarray` frames</span>
<a id=__codelineno-0-976 name=__codelineno-0-976 href=#__codelineno-0-976></a>                    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span>
<a id=__codelineno-0-977 name=__codelineno-0-977 href=#__codelineno-0-977></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span>
<a id=__codelineno-0-978 name=__codelineno-0-978 href=#__codelineno-0-978></a>                    <span class=p>):</span>
<a id=__codelineno-0-979 name=__codelineno-0-979 href=#__codelineno-0-979></a>                        <span class=c1># handle return data for compression</span>
<a id=__codelineno-0-980 name=__codelineno-0-980 href=#__codelineno-0-980></a>                        <span class=n>return_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>copy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>)</span>
<a id=__codelineno-0-981 name=__codelineno-0-981 href=#__codelineno-0-981></a>
<a id=__codelineno-0-982 name=__codelineno-0-982 href=#__codelineno-0-982></a>                        <span class=c1># check whether exit_flag is False</span>
<a id=__codelineno-0-983 name=__codelineno-0-983 href=#__codelineno-0-983></a>                        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>return_data</span><span class=o>.</span><span class=n>flags</span><span class=p>[</span><span class=s2>&quot;C_CONTIGUOUS&quot;</span><span class=p>]):</span>
<a id=__codelineno-0-984 name=__codelineno-0-984 href=#__codelineno-0-984></a>                            <span class=c1># check whether the incoming frame is contiguous</span>
<a id=__codelineno-0-985 name=__codelineno-0-985 href=#__codelineno-0-985></a>                            <span class=n>return_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ascontiguousarray</span><span class=p>(</span>
<a id=__codelineno-0-986 name=__codelineno-0-986 href=#__codelineno-0-986></a>                                <span class=n>return_data</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>return_data</span><span class=o>.</span><span class=n>dtype</span>
<a id=__codelineno-0-987 name=__codelineno-0-987 href=#__codelineno-0-987></a>                            <span class=p>)</span>
<a id=__codelineno-0-988 name=__codelineno-0-988 href=#__codelineno-0-988></a>
<a id=__codelineno-0-989 name=__codelineno-0-989 href=#__codelineno-0-989></a>                        <span class=c1># handle jpeg-compression encoding</span>
<a id=__codelineno-0-990 name=__codelineno-0-990 href=#__codelineno-0-990></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-991 name=__codelineno-0-991 href=#__codelineno-0-991></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span><span class=p>:</span>
<a id=__codelineno-0-992 name=__codelineno-0-992 href=#__codelineno-0-992></a>                                <span class=k>if</span> <span class=n>return_data</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-993 name=__codelineno-0-993 href=#__codelineno-0-993></a>                                    <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-994 name=__codelineno-0-994 href=#__codelineno-0-994></a>                                    <span class=n>return_data</span> <span class=o>=</span> <span class=n>return_data</span><span class=p>[:,</span> <span class=p>:,</span> <span class=n>np</span><span class=o>.</span><span class=n>newaxis</span><span class=p>]</span>
<a id=__codelineno-0-995 name=__codelineno-0-995 href=#__codelineno-0-995></a>                                <span class=n>return_data</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-996 name=__codelineno-0-996 href=#__codelineno-0-996></a>                                    <span class=n>return_data</span><span class=p>,</span>
<a id=__codelineno-0-997 name=__codelineno-0-997 href=#__codelineno-0-997></a>                                    <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-998 name=__codelineno-0-998 href=#__codelineno-0-998></a>                                    <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-999 name=__codelineno-0-999 href=#__codelineno-0-999></a>                                    <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1000 name=__codelineno-0-1000 href=#__codelineno-0-1000></a>                                <span class=p>)</span>
<a id=__codelineno-0-1001 name=__codelineno-0-1001 href=#__codelineno-0-1001></a>                            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1002 name=__codelineno-0-1002 href=#__codelineno-0-1002></a>                                <span class=n>return_data</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-1003 name=__codelineno-0-1003 href=#__codelineno-0-1003></a>                                    <span class=n>return_data</span><span class=p>,</span>
<a id=__codelineno-0-1004 name=__codelineno-0-1004 href=#__codelineno-0-1004></a>                                    <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-1005 name=__codelineno-0-1005 href=#__codelineno-0-1005></a>                                    <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-1006 name=__codelineno-0-1006 href=#__codelineno-0-1006></a>                                    <span class=n>colorsubsampling</span><span class=o>=</span><span class=s2>&quot;422&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1007 name=__codelineno-0-1007 href=#__codelineno-0-1007></a>                                    <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1008 name=__codelineno-0-1008 href=#__codelineno-0-1008></a>                                <span class=p>)</span>
<a id=__codelineno-0-1009 name=__codelineno-0-1009 href=#__codelineno-0-1009></a>
<a id=__codelineno-0-1010 name=__codelineno-0-1010 href=#__codelineno-0-1010></a>                        <span class=n>return_dict</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-1011 name=__codelineno-0-1011 href=#__codelineno-0-1011></a>                            <span class=nb>dict</span><span class=p>(</span><span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span>
<a id=__codelineno-0-1012 name=__codelineno-0-1012 href=#__codelineno-0-1012></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-1013 name=__codelineno-0-1013 href=#__codelineno-0-1013></a>                            <span class=k>else</span> <span class=nb>dict</span><span class=p>()</span>
<a id=__codelineno-0-1014 name=__codelineno-0-1014 href=#__codelineno-0-1014></a>                        <span class=p>)</span>
<a id=__codelineno-0-1015 name=__codelineno-0-1015 href=#__codelineno-0-1015></a>
<a id=__codelineno-0-1016 name=__codelineno-0-1016 href=#__codelineno-0-1016></a>                        <span class=n>return_dict</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-0-1017 name=__codelineno-0-1017 href=#__codelineno-0-1017></a>                            <span class=nb>dict</span><span class=p>(</span>
<a id=__codelineno-0-1018 name=__codelineno-0-1018 href=#__codelineno-0-1018></a>                                <span class=n>return_type</span><span class=o>=</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=p>),</span>
<a id=__codelineno-0-1019 name=__codelineno-0-1019 href=#__codelineno-0-1019></a>                                <span class=n>compression</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-1020 name=__codelineno-0-1020 href=#__codelineno-0-1020></a>                                    <span class=s2>&quot;dct&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1021 name=__codelineno-0-1021 href=#__codelineno-0-1021></a>                                    <span class=s2>&quot;ups&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span><span class=p>,</span>
<a id=__codelineno-0-1022 name=__codelineno-0-1022 href=#__codelineno-0-1022></a>                                    <span class=s2>&quot;colorspace&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-1023 name=__codelineno-0-1023 href=#__codelineno-0-1023></a>                                <span class=p>}</span>
<a id=__codelineno-0-1024 name=__codelineno-0-1024 href=#__codelineno-0-1024></a>                                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span>
<a id=__codelineno-0-1025 name=__codelineno-0-1025 href=#__codelineno-0-1025></a>                                <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-1026 name=__codelineno-0-1026 href=#__codelineno-0-1026></a>                                <span class=n>array_dtype</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span>
<a id=__codelineno-0-1027 name=__codelineno-0-1027 href=#__codelineno-0-1027></a>                                <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span>
<a id=__codelineno-0-1028 name=__codelineno-0-1028 href=#__codelineno-0-1028></a>                                <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1029 name=__codelineno-0-1029 href=#__codelineno-0-1029></a>                                <span class=n>array_shape</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=o>.</span><span class=n>shape</span>
<a id=__codelineno-0-1030 name=__codelineno-0-1030 href=#__codelineno-0-1030></a>                                <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span>
<a id=__codelineno-0-1031 name=__codelineno-0-1031 href=#__codelineno-0-1031></a>                                <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1032 name=__codelineno-0-1032 href=#__codelineno-0-1032></a>                                <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-1033 name=__codelineno-0-1033 href=#__codelineno-0-1033></a>                            <span class=p>)</span>
<a id=__codelineno-0-1034 name=__codelineno-0-1034 href=#__codelineno-0-1034></a>                        <span class=p>)</span>
<a id=__codelineno-0-1035 name=__codelineno-0-1035 href=#__codelineno-0-1035></a>
<a id=__codelineno-0-1036 name=__codelineno-0-1036 href=#__codelineno-0-1036></a>                        <span class=c1># send the json dict</span>
<a id=__codelineno-0-1037 name=__codelineno-0-1037 href=#__codelineno-0-1037></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span>
<a id=__codelineno-0-1038 name=__codelineno-0-1038 href=#__codelineno-0-1038></a>                            <span class=n>return_dict</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>|</span> <span class=n>zmq</span><span class=o>.</span><span class=n>SNDMORE</span>
<a id=__codelineno-0-1039 name=__codelineno-0-1039 href=#__codelineno-0-1039></a>                        <span class=p>)</span>
<a id=__codelineno-0-1040 name=__codelineno-0-1040 href=#__codelineno-0-1040></a>                        <span class=c1># send the array with correct flags</span>
<a id=__codelineno-0-1041 name=__codelineno-0-1041 href=#__codelineno-0-1041></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send</span><span class=p>(</span>
<a id=__codelineno-0-1042 name=__codelineno-0-1042 href=#__codelineno-0-1042></a>                            <span class=n>return_data</span><span class=p>,</span>
<a id=__codelineno-0-1043 name=__codelineno-0-1043 href=#__codelineno-0-1043></a>                            <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>,</span>
<a id=__codelineno-0-1044 name=__codelineno-0-1044 href=#__codelineno-0-1044></a>                            <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span>
<a id=__codelineno-0-1045 name=__codelineno-0-1045 href=#__codelineno-0-1045></a>                            <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span><span class=p>,</span>
<a id=__codelineno-0-1046 name=__codelineno-0-1046 href=#__codelineno-0-1046></a>                        <span class=p>)</span>
<a id=__codelineno-0-1047 name=__codelineno-0-1047 href=#__codelineno-0-1047></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1048 name=__codelineno-0-1048 href=#__codelineno-0-1048></a>                        <span class=n>return_dict</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-1049 name=__codelineno-0-1049 href=#__codelineno-0-1049></a>                            <span class=nb>dict</span><span class=p>(</span><span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span>
<a id=__codelineno-0-1050 name=__codelineno-0-1050 href=#__codelineno-0-1050></a>                            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-1051 name=__codelineno-0-1051 href=#__codelineno-0-1051></a>                            <span class=k>else</span> <span class=nb>dict</span><span class=p>()</span>
<a id=__codelineno-0-1052 name=__codelineno-0-1052 href=#__codelineno-0-1052></a>                        <span class=p>)</span>
<a id=__codelineno-0-1053 name=__codelineno-0-1053 href=#__codelineno-0-1053></a>                        <span class=n>return_dict</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-0-1054 name=__codelineno-0-1054 href=#__codelineno-0-1054></a>                            <span class=nb>dict</span><span class=p>(</span>
<a id=__codelineno-0-1055 name=__codelineno-0-1055 href=#__codelineno-0-1055></a>                                <span class=n>return_type</span><span class=o>=</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=p>),</span>
<a id=__codelineno-0-1056 name=__codelineno-0-1056 href=#__codelineno-0-1056></a>                                <span class=n>data</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>,</span>
<a id=__codelineno-0-1057 name=__codelineno-0-1057 href=#__codelineno-0-1057></a>                            <span class=p>)</span>
<a id=__codelineno-0-1058 name=__codelineno-0-1058 href=#__codelineno-0-1058></a>                        <span class=p>)</span>
<a id=__codelineno-0-1059 name=__codelineno-0-1059 href=#__codelineno-0-1059></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>return_dict</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>)</span>
<a id=__codelineno-0-1060 name=__codelineno-0-1060 href=#__codelineno-0-1060></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1061 name=__codelineno-0-1061 href=#__codelineno-0-1061></a>                    <span class=c1># send confirmation message to server</span>
<a id=__codelineno-0-1062 name=__codelineno-0-1062 href=#__codelineno-0-1062></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_string</span><span class=p>(</span>
<a id=__codelineno-0-1063 name=__codelineno-0-1063 href=#__codelineno-0-1063></a>                        <span class=s2>&quot;Data received on device: </span><span class=si>{}</span><span class=s2> !&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__id</span><span class=p>)</span>
<a id=__codelineno-0-1064 name=__codelineno-0-1064 href=#__codelineno-0-1064></a>                    <span class=p>)</span>
<a id=__codelineno-0-1065 name=__codelineno-0-1065 href=#__codelineno-0-1065></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1066 name=__codelineno-0-1066 href=#__codelineno-0-1066></a>                <span class=c1># else raise warning</span>
<a id=__codelineno-0-1067 name=__codelineno-0-1067 href=#__codelineno-0-1067></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span><span class=p>:</span>
<a id=__codelineno-0-1068 name=__codelineno-0-1068 href=#__codelineno-0-1068></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;`return_data` is disabled for this pattern!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1069 name=__codelineno-0-1069 href=#__codelineno-0-1069></a>
<a id=__codelineno-0-1070 name=__codelineno-0-1070 href=#__codelineno-0-1070></a>            <span class=c1># check if encoding was enabled</span>
<a id=__codelineno-0-1071 name=__codelineno-0-1071 href=#__codelineno-0-1071></a>            <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-1072 name=__codelineno-0-1072 href=#__codelineno-0-1072></a>                <span class=c1># decode JPEG frame</span>
<a id=__codelineno-0-1073 name=__codelineno-0-1073 href=#__codelineno-0-1073></a>                <span class=n>frame</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>decode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-1074 name=__codelineno-0-1074 href=#__codelineno-0-1074></a>                    <span class=n>msg_data</span><span class=p>,</span>
<a id=__codelineno-0-1075 name=__codelineno-0-1075 href=#__codelineno-0-1075></a>                    <span class=n>colorspace</span><span class=o>=</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1076 name=__codelineno-0-1076 href=#__codelineno-0-1076></a>                    <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-1077 name=__codelineno-0-1077 href=#__codelineno-0-1077></a>                    <span class=ow>or</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;dct&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1078 name=__codelineno-0-1078 href=#__codelineno-0-1078></a>                    <span class=n>fastupsample</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-1079 name=__codelineno-0-1079 href=#__codelineno-0-1079></a>                    <span class=ow>or</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;ups&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1080 name=__codelineno-0-1080 href=#__codelineno-0-1080></a>                <span class=p>)</span>
<a id=__codelineno-0-1081 name=__codelineno-0-1081 href=#__codelineno-0-1081></a>                <span class=c1># check if valid frame returned</span>
<a id=__codelineno-0-1082 name=__codelineno-0-1082 href=#__codelineno-0-1082></a>                <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-1083 name=__codelineno-0-1083 href=#__codelineno-0-1083></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1084 name=__codelineno-0-1084 href=#__codelineno-0-1084></a>                    <span class=c1># otherwise raise error and exit</span>
<a id=__codelineno-0-1085 name=__codelineno-0-1085 href=#__codelineno-0-1085></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-1086 name=__codelineno-0-1086 href=#__codelineno-0-1086></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Received compressed JPEG frame decoding failed&quot;</span>
<a id=__codelineno-0-1087 name=__codelineno-0-1087 href=#__codelineno-0-1087></a>                    <span class=p>)</span>
<a id=__codelineno-0-1088 name=__codelineno-0-1088 href=#__codelineno-0-1088></a>                <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span> <span class=ow>and</span> <span class=n>frame</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>3</span><span class=p>:</span>
<a id=__codelineno-0-1089 name=__codelineno-0-1089 href=#__codelineno-0-1089></a>                    <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-1090 name=__codelineno-0-1090 href=#__codelineno-0-1090></a>                    <span class=n>frame</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>squeeze</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-0-1091 name=__codelineno-0-1091 href=#__codelineno-0-1091></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1092 name=__codelineno-0-1092 href=#__codelineno-0-1092></a>                <span class=c1># recover and reshape frame from buffer</span>
<a id=__codelineno-0-1093 name=__codelineno-0-1093 href=#__codelineno-0-1093></a>                <span class=n>frame_buffer</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>frombuffer</span><span class=p>(</span><span class=n>msg_data</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;dtype&quot;</span><span class=p>])</span>
<a id=__codelineno-0-1094 name=__codelineno-0-1094 href=#__codelineno-0-1094></a>                <span class=n>frame</span> <span class=o>=</span> <span class=n>frame_buffer</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;shape&quot;</span><span class=p>])</span>
<a id=__codelineno-0-1095 name=__codelineno-0-1095 href=#__codelineno-0-1095></a>
<a id=__codelineno-0-1096 name=__codelineno-0-1096 href=#__codelineno-0-1096></a>            <span class=c1># check if multiserver_mode</span>
<a id=__codelineno-0-1097 name=__codelineno-0-1097 href=#__codelineno-0-1097></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-1098 name=__codelineno-0-1098 href=#__codelineno-0-1098></a>                <span class=c1># save the unique port addresses</span>
<a id=__codelineno-0-1099 name=__codelineno-0-1099 href=#__codelineno-0-1099></a>                <span class=k>if</span> <span class=ow>not</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=p>:</span>
<a id=__codelineno-0-1100 name=__codelineno-0-1100 href=#__codelineno-0-1100></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>])</span>
<a id=__codelineno-0-1101 name=__codelineno-0-1101 href=#__codelineno-0-1101></a>                <span class=c1># extract if any message from server and display it</span>
<a id=__codelineno-0-1102 name=__codelineno-0-1102 href=#__codelineno-0-1102></a>                <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-1103 name=__codelineno-0-1103 href=#__codelineno-0-1103></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>],</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>],</span> <span class=n>frame</span><span class=p>))</span>
<a id=__codelineno-0-1104 name=__codelineno-0-1104 href=#__codelineno-0-1104></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1105 name=__codelineno-0-1105 href=#__codelineno-0-1105></a>                    <span class=c1># append recovered unique port and frame to queue</span>
<a id=__codelineno-0-1106 name=__codelineno-0-1106 href=#__codelineno-0-1106></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>],</span> <span class=n>frame</span><span class=p>))</span>
<a id=__codelineno-0-1107 name=__codelineno-0-1107 href=#__codelineno-0-1107></a>            <span class=c1># extract if any message from server if Bidirectional Mode is enabled</span>
<a id=__codelineno-0-1108 name=__codelineno-0-1108 href=#__codelineno-0-1108></a>            <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-1109 name=__codelineno-0-1109 href=#__codelineno-0-1109></a>                <span class=k>if</span> <span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-1110 name=__codelineno-0-1110 href=#__codelineno-0-1110></a>                    <span class=c1># append grouped frame and data to queue</span>
<a id=__codelineno-0-1111 name=__codelineno-0-1111 href=#__codelineno-0-1111></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>msg_json</span><span class=p>[</span><span class=s2>&quot;message&quot;</span><span class=p>],</span> <span class=n>frame</span><span class=p>))</span>
<a id=__codelineno-0-1112 name=__codelineno-0-1112 href=#__codelineno-0-1112></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1113 name=__codelineno-0-1113 href=#__codelineno-0-1113></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=kc>None</span><span class=p>,</span> <span class=n>frame</span><span class=p>))</span>
<a id=__codelineno-0-1114 name=__codelineno-0-1114 href=#__codelineno-0-1114></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1115 name=__codelineno-0-1115 href=#__codelineno-0-1115></a>                <span class=c1># otherwise append recovered frame to queue</span>
<a id=__codelineno-0-1116 name=__codelineno-0-1116 href=#__codelineno-0-1116></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-0-1117 name=__codelineno-0-1117 href=#__codelineno-0-1117></a>
<a id=__codelineno-0-1118 name=__codelineno-0-1118 href=#__codelineno-0-1118></a>    <span class=k>def</span> <span class=nf>recv</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>return_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-1119 name=__codelineno-0-1119 href=#__codelineno-0-1119></a>        <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-1120 name=__codelineno-0-1120 href=#__codelineno-0-1120></a><span class=sd>        A Receiver end method, that extracts received frames synchronously from monitored deque, while maintaining a</span>
<a id=__codelineno-0-1121 name=__codelineno-0-1121 href=#__codelineno-0-1121></a><span class=sd>        fixed-length frame buffer in the memory, and blocks the thread if the deque is full.</span>
<a id=__codelineno-0-1122 name=__codelineno-0-1122 href=#__codelineno-0-1122></a>
<a id=__codelineno-0-1123 name=__codelineno-0-1123 href=#__codelineno-0-1123></a><span class=sd>        Parameters:</span>
<a id=__codelineno-0-1124 name=__codelineno-0-1124 href=#__codelineno-0-1124></a><span class=sd>            return_data (any): inputs return data _(of any datatype)_, for sending back to Server.</span>
<a id=__codelineno-0-1125 name=__codelineno-0-1125 href=#__codelineno-0-1125></a>
<a id=__codelineno-0-1126 name=__codelineno-0-1126 href=#__codelineno-0-1126></a><span class=sd>        **Returns:** A n-dimensional numpy array.</span>
<a id=__codelineno-0-1127 name=__codelineno-0-1127 href=#__codelineno-0-1127></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-0-1128 name=__codelineno-0-1128 href=#__codelineno-0-1128></a>        <span class=c1># check whether `receive mode` is activated</span>
<a id=__codelineno-0-1129 name=__codelineno-0-1129 href=#__codelineno-0-1129></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>):</span>
<a id=__codelineno-0-1130 name=__codelineno-0-1130 href=#__codelineno-0-1130></a>            <span class=c1># raise value error and exit</span>
<a id=__codelineno-0-1131 name=__codelineno-0-1131 href=#__codelineno-0-1131></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1132 name=__codelineno-0-1132 href=#__codelineno-0-1132></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-1133 name=__codelineno-0-1133 href=#__codelineno-0-1133></a>                <span class=s2>&quot;[NetGear:ERROR] :: `recv()` function cannot be used while receive_mode is disabled. Kindly refer vidgear docs!&quot;</span>
<a id=__codelineno-0-1134 name=__codelineno-0-1134 href=#__codelineno-0-1134></a>            <span class=p>)</span>
<a id=__codelineno-0-1135 name=__codelineno-0-1135 href=#__codelineno-0-1135></a>
<a id=__codelineno-0-1136 name=__codelineno-0-1136 href=#__codelineno-0-1136></a>        <span class=c1># handle Bidirectional return data</span>
<a id=__codelineno-0-1137 name=__codelineno-0-1137 href=#__codelineno-0-1137></a>        <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>return_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-1138 name=__codelineno-0-1138 href=#__codelineno-0-1138></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span> <span class=o>=</span> <span class=n>return_data</span>
<a id=__codelineno-0-1139 name=__codelineno-0-1139 href=#__codelineno-0-1139></a>
<a id=__codelineno-0-1140 name=__codelineno-0-1140 href=#__codelineno-0-1140></a>        <span class=c1># check whether or not termination flag is enabled</span>
<a id=__codelineno-0-1141 name=__codelineno-0-1141 href=#__codelineno-0-1141></a>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span><span class=p>:</span>
<a id=__codelineno-0-1142 name=__codelineno-0-1142 href=#__codelineno-0-1142></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-1143 name=__codelineno-0-1143 href=#__codelineno-0-1143></a>                <span class=c1># check if queue is empty</span>
<a id=__codelineno-0-1144 name=__codelineno-0-1144 href=#__codelineno-0-1144></a>                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-1145 name=__codelineno-0-1145 href=#__codelineno-0-1145></a>                    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>popleft</span><span class=p>()</span>
<a id=__codelineno-0-1146 name=__codelineno-0-1146 href=#__codelineno-0-1146></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1147 name=__codelineno-0-1147 href=#__codelineno-0-1147></a>                    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.00001</span><span class=p>)</span>
<a id=__codelineno-0-1148 name=__codelineno-0-1148 href=#__codelineno-0-1148></a>                    <span class=k>continue</span>
<a id=__codelineno-0-1149 name=__codelineno-0-1149 href=#__codelineno-0-1149></a>            <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
<a id=__codelineno-0-1150 name=__codelineno-0-1150 href=#__codelineno-0-1150></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1151 name=__codelineno-0-1151 href=#__codelineno-0-1151></a>                <span class=k>break</span>
<a id=__codelineno-0-1152 name=__codelineno-0-1152 href=#__codelineno-0-1152></a>        <span class=c1># otherwise return NoneType</span>
<a id=__codelineno-0-1153 name=__codelineno-0-1153 href=#__codelineno-0-1153></a>        <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-1154 name=__codelineno-0-1154 href=#__codelineno-0-1154></a>
<a id=__codelineno-0-1155 name=__codelineno-0-1155 href=#__codelineno-0-1155></a>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>frame</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-1156 name=__codelineno-0-1156 href=#__codelineno-0-1156></a>        <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-1157 name=__codelineno-0-1157 href=#__codelineno-0-1157></a><span class=sd>        A Server end method, that sends the data and frames over the network to Client(s).</span>
<a id=__codelineno-0-1158 name=__codelineno-0-1158 href=#__codelineno-0-1158></a>
<a id=__codelineno-0-1159 name=__codelineno-0-1159 href=#__codelineno-0-1159></a><span class=sd>        Parameters:</span>
<a id=__codelineno-0-1160 name=__codelineno-0-1160 href=#__codelineno-0-1160></a><span class=sd>            frame (numpy.ndarray): inputs numpy array(frame).</span>
<a id=__codelineno-0-1161 name=__codelineno-0-1161 href=#__codelineno-0-1161></a><span class=sd>            message (any): input for sending additional data _(of any datatype except `numpy.ndarray`)_ to Client(s).</span>
<a id=__codelineno-0-1162 name=__codelineno-0-1162 href=#__codelineno-0-1162></a>
<a id=__codelineno-0-1163 name=__codelineno-0-1163 href=#__codelineno-0-1163></a><span class=sd>        **Returns:** Data _(of any datatype)_ in selected exclusive modes, otherwise None-type.</span>
<a id=__codelineno-0-1164 name=__codelineno-0-1164 href=#__codelineno-0-1164></a>
<a id=__codelineno-0-1165 name=__codelineno-0-1165 href=#__codelineno-0-1165></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-0-1166 name=__codelineno-0-1166 href=#__codelineno-0-1166></a>        <span class=c1># check whether `receive_mode` is disabled</span>
<a id=__codelineno-0-1167 name=__codelineno-0-1167 href=#__codelineno-0-1167></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-1168 name=__codelineno-0-1168 href=#__codelineno-0-1168></a>            <span class=c1># raise value error and exit</span>
<a id=__codelineno-0-1169 name=__codelineno-0-1169 href=#__codelineno-0-1169></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1170 name=__codelineno-0-1170 href=#__codelineno-0-1170></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-1171 name=__codelineno-0-1171 href=#__codelineno-0-1171></a>                <span class=s2>&quot;[NetGear:ERROR] :: `send()` function cannot be used while receive_mode is enabled. Kindly refer vidgear docs!&quot;</span>
<a id=__codelineno-0-1172 name=__codelineno-0-1172 href=#__codelineno-0-1172></a>            <span class=p>)</span>
<a id=__codelineno-0-1173 name=__codelineno-0-1173 href=#__codelineno-0-1173></a>
<a id=__codelineno-0-1174 name=__codelineno-0-1174 href=#__codelineno-0-1174></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>message</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>):</span>
<a id=__codelineno-0-1175 name=__codelineno-0-1175 href=#__codelineno-0-1175></a>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-1176 name=__codelineno-0-1176 href=#__codelineno-0-1176></a>                <span class=s2>&quot;Skipped unsupported `message` of datatype: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-1177 name=__codelineno-0-1177 href=#__codelineno-0-1177></a>                    <span class=nb>type</span><span class=p>(</span><span class=n>message</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span>
<a id=__codelineno-0-1178 name=__codelineno-0-1178 href=#__codelineno-0-1178></a>                <span class=p>)</span>
<a id=__codelineno-0-1179 name=__codelineno-0-1179 href=#__codelineno-0-1179></a>            <span class=p>)</span>
<a id=__codelineno-0-1180 name=__codelineno-0-1180 href=#__codelineno-0-1180></a>            <span class=n>message</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-1181 name=__codelineno-0-1181 href=#__codelineno-0-1181></a>
<a id=__codelineno-0-1182 name=__codelineno-0-1182 href=#__codelineno-0-1182></a>        <span class=c1># define exit_flag and assign value</span>
<a id=__codelineno-0-1183 name=__codelineno-0-1183 href=#__codelineno-0-1183></a>        <span class=n>exit_flag</span> <span class=o>=</span> <span class=kc>True</span> <span class=k>if</span> <span class=p>(</span><span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span><span class=p>)</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-1184 name=__codelineno-0-1184 href=#__codelineno-0-1184></a>
<a id=__codelineno-0-1185 name=__codelineno-0-1185 href=#__codelineno-0-1185></a>        <span class=c1># check whether exit_flag is False</span>
<a id=__codelineno-0-1186 name=__codelineno-0-1186 href=#__codelineno-0-1186></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>exit_flag</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>frame</span><span class=o>.</span><span class=n>flags</span><span class=p>[</span><span class=s2>&quot;C_CONTIGUOUS&quot;</span><span class=p>]):</span>
<a id=__codelineno-0-1187 name=__codelineno-0-1187 href=#__codelineno-0-1187></a>            <span class=c1># check whether the incoming frame is contiguous</span>
<a id=__codelineno-0-1188 name=__codelineno-0-1188 href=#__codelineno-0-1188></a>            <span class=n>frame</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ascontiguousarray</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>frame</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span>
<a id=__codelineno-0-1189 name=__codelineno-0-1189 href=#__codelineno-0-1189></a>
<a id=__codelineno-0-1190 name=__codelineno-0-1190 href=#__codelineno-0-1190></a>        <span class=c1># handle JPEG compression encoding</span>
<a id=__codelineno-0-1191 name=__codelineno-0-1191 href=#__codelineno-0-1191></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-1192 name=__codelineno-0-1192 href=#__codelineno-0-1192></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span><span class=p>:</span>
<a id=__codelineno-0-1193 name=__codelineno-0-1193 href=#__codelineno-0-1193></a>                <span class=k>if</span> <span class=n>frame</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-1194 name=__codelineno-0-1194 href=#__codelineno-0-1194></a>                    <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-1195 name=__codelineno-0-1195 href=#__codelineno-0-1195></a>                    <span class=n>frame</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>expand_dims</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-0-1196 name=__codelineno-0-1196 href=#__codelineno-0-1196></a>                <span class=n>frame</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-1197 name=__codelineno-0-1197 href=#__codelineno-0-1197></a>                    <span class=n>frame</span><span class=p>,</span>
<a id=__codelineno-0-1198 name=__codelineno-0-1198 href=#__codelineno-0-1198></a>                    <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-1199 name=__codelineno-0-1199 href=#__codelineno-0-1199></a>                    <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-1200 name=__codelineno-0-1200 href=#__codelineno-0-1200></a>                    <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1201 name=__codelineno-0-1201 href=#__codelineno-0-1201></a>                <span class=p>)</span>
<a id=__codelineno-0-1202 name=__codelineno-0-1202 href=#__codelineno-0-1202></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1203 name=__codelineno-0-1203 href=#__codelineno-0-1203></a>                <span class=n>frame</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-1204 name=__codelineno-0-1204 href=#__codelineno-0-1204></a>                    <span class=n>frame</span><span class=p>,</span>
<a id=__codelineno-0-1205 name=__codelineno-0-1205 href=#__codelineno-0-1205></a>                    <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-1206 name=__codelineno-0-1206 href=#__codelineno-0-1206></a>                    <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-1207 name=__codelineno-0-1207 href=#__codelineno-0-1207></a>                    <span class=n>colorsubsampling</span><span class=o>=</span><span class=s2>&quot;422&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1208 name=__codelineno-0-1208 href=#__codelineno-0-1208></a>                    <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1209 name=__codelineno-0-1209 href=#__codelineno-0-1209></a>                <span class=p>)</span>
<a id=__codelineno-0-1210 name=__codelineno-0-1210 href=#__codelineno-0-1210></a>
<a id=__codelineno-0-1211 name=__codelineno-0-1211 href=#__codelineno-0-1211></a>        <span class=c1># check if multiserver_mode is activated and assign values with unique port</span>
<a id=__codelineno-0-1212 name=__codelineno-0-1212 href=#__codelineno-0-1212></a>        <span class=n>msg_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=k>else</span> <span class=nb>dict</span><span class=p>()</span>
<a id=__codelineno-0-1213 name=__codelineno-0-1213 href=#__codelineno-0-1213></a>
<a id=__codelineno-0-1214 name=__codelineno-0-1214 href=#__codelineno-0-1214></a>        <span class=c1># prepare the exclusive json dict</span>
<a id=__codelineno-0-1215 name=__codelineno-0-1215 href=#__codelineno-0-1215></a>        <span class=n>msg_dict</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-0-1216 name=__codelineno-0-1216 href=#__codelineno-0-1216></a>            <span class=nb>dict</span><span class=p>(</span>
<a id=__codelineno-0-1217 name=__codelineno-0-1217 href=#__codelineno-0-1217></a>                <span class=n>terminate_flag</span><span class=o>=</span><span class=n>exit_flag</span><span class=p>,</span>
<a id=__codelineno-0-1218 name=__codelineno-0-1218 href=#__codelineno-0-1218></a>                <span class=n>compression</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-1219 name=__codelineno-0-1219 href=#__codelineno-0-1219></a>                    <span class=s2>&quot;dct&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-1220 name=__codelineno-0-1220 href=#__codelineno-0-1220></a>                    <span class=s2>&quot;ups&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span><span class=p>,</span>
<a id=__codelineno-0-1221 name=__codelineno-0-1221 href=#__codelineno-0-1221></a>                    <span class=s2>&quot;colorspace&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-1222 name=__codelineno-0-1222 href=#__codelineno-0-1222></a>                <span class=p>}</span>
<a id=__codelineno-0-1223 name=__codelineno-0-1223 href=#__codelineno-0-1223></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span>
<a id=__codelineno-0-1224 name=__codelineno-0-1224 href=#__codelineno-0-1224></a>                <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-1225 name=__codelineno-0-1225 href=#__codelineno-0-1225></a>                <span class=n>message</span><span class=o>=</span><span class=n>message</span><span class=p>,</span>
<a id=__codelineno-0-1226 name=__codelineno-0-1226 href=#__codelineno-0-1226></a>                <span class=n>pattern</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span><span class=p>),</span>
<a id=__codelineno-0-1227 name=__codelineno-0-1227 href=#__codelineno-0-1227></a>                <span class=n>dtype</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>frame</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1228 name=__codelineno-0-1228 href=#__codelineno-0-1228></a>                <span class=n>shape</span><span class=o>=</span><span class=n>frame</span><span class=o>.</span><span class=n>shape</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-1229 name=__codelineno-0-1229 href=#__codelineno-0-1229></a>            <span class=p>)</span>
<a id=__codelineno-0-1230 name=__codelineno-0-1230 href=#__codelineno-0-1230></a>        <span class=p>)</span>
<a id=__codelineno-0-1231 name=__codelineno-0-1231 href=#__codelineno-0-1231></a>
<a id=__codelineno-0-1232 name=__codelineno-0-1232 href=#__codelineno-0-1232></a>        <span class=c1># send the json dict</span>
<a id=__codelineno-0-1233 name=__codelineno-0-1233 href=#__codelineno-0-1233></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>msg_dict</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>|</span> <span class=n>zmq</span><span class=o>.</span><span class=n>SNDMORE</span><span class=p>)</span>
<a id=__codelineno-0-1234 name=__codelineno-0-1234 href=#__codelineno-0-1234></a>        <span class=c1># send the frame array with correct flags</span>
<a id=__codelineno-0-1235 name=__codelineno-0-1235 href=#__codelineno-0-1235></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send</span><span class=p>(</span>
<a id=__codelineno-0-1236 name=__codelineno-0-1236 href=#__codelineno-0-1236></a>            <span class=n>frame</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>,</span> <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span> <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span>
<a id=__codelineno-0-1237 name=__codelineno-0-1237 href=#__codelineno-0-1237></a>        <span class=p>)</span>
<a id=__codelineno-0-1238 name=__codelineno-0-1238 href=#__codelineno-0-1238></a>
<a id=__codelineno-0-1239 name=__codelineno-0-1239 href=#__codelineno-0-1239></a>        <span class=c1># check if synchronous patterns, then wait for confirmation</span>
<a id=__codelineno-0-1240 name=__codelineno-0-1240 href=#__codelineno-0-1240></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-1241 name=__codelineno-0-1241 href=#__codelineno-0-1241></a>            <span class=c1># check if Bidirectional data transmission is enabled</span>
<a id=__codelineno-0-1242 name=__codelineno-0-1242 href=#__codelineno-0-1242></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-1243 name=__codelineno-0-1243 href=#__codelineno-0-1243></a>
<a id=__codelineno-0-1244 name=__codelineno-0-1244 href=#__codelineno-0-1244></a>                <span class=c1># handles return data</span>
<a id=__codelineno-0-1245 name=__codelineno-0-1245 href=#__codelineno-0-1245></a>                <span class=n>recvd_data</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-1246 name=__codelineno-0-1246 href=#__codelineno-0-1246></a>
<a id=__codelineno-0-1247 name=__codelineno-0-1247 href=#__codelineno-0-1247></a>                <span class=n>socks</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span><span class=p>))</span>
<a id=__codelineno-0-1248 name=__codelineno-0-1248 href=#__codelineno-0-1248></a>                <span class=k>if</span> <span class=n>socks</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span> <span class=o>==</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>:</span>
<a id=__codelineno-0-1249 name=__codelineno-0-1249 href=#__codelineno-0-1249></a>                    <span class=c1># handle return data</span>
<a id=__codelineno-0-1250 name=__codelineno-0-1250 href=#__codelineno-0-1250></a>                    <span class=n>recv_json</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv_json</span><span class=p>(</span><span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>)</span>
<a id=__codelineno-0-1251 name=__codelineno-0-1251 href=#__codelineno-0-1251></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1252 name=__codelineno-0-1252 href=#__codelineno-0-1252></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;No response from Client, Reconnecting again...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1253 name=__codelineno-0-1253 href=#__codelineno-0-1253></a>                    <span class=c1># Socket is confused. Close and remove it.</span>
<a id=__codelineno-0-1254 name=__codelineno-0-1254 href=#__codelineno-0-1254></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-1255 name=__codelineno-0-1255 href=#__codelineno-0-1255></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-1256 name=__codelineno-0-1256 href=#__codelineno-0-1256></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span>
<a id=__codelineno-0-1257 name=__codelineno-0-1257 href=#__codelineno-0-1257></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-0-1258 name=__codelineno-0-1258 href=#__codelineno-0-1258></a>
<a id=__codelineno-0-1259 name=__codelineno-0-1259 href=#__codelineno-0-1259></a>                    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>):</span>
<a id=__codelineno-0-1260 name=__codelineno-0-1260 href=#__codelineno-0-1260></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-1261 name=__codelineno-0-1261 href=#__codelineno-0-1261></a>                            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
<a id=__codelineno-0-1262 name=__codelineno-0-1262 href=#__codelineno-0-1262></a>                                <span class=s2>&quot;All Clients failed to respond on multiple attempts.&quot;</span>
<a id=__codelineno-0-1263 name=__codelineno-0-1263 href=#__codelineno-0-1263></a>                            <span class=p>)</span>
<a id=__codelineno-0-1264 name=__codelineno-0-1264 href=#__codelineno-0-1264></a>                        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1265 name=__codelineno-0-1265 href=#__codelineno-0-1265></a>                            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
<a id=__codelineno-0-1266 name=__codelineno-0-1266 href=#__codelineno-0-1266></a>                                <span class=s2>&quot;Client failed to respond on multiple attempts.&quot;</span>
<a id=__codelineno-0-1267 name=__codelineno-0-1267 href=#__codelineno-0-1267></a>                            <span class=p>)</span>
<a id=__codelineno-0-1268 name=__codelineno-0-1268 href=#__codelineno-0-1268></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1269 name=__codelineno-0-1269 href=#__codelineno-0-1269></a>                        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-1270 name=__codelineno-0-1270 href=#__codelineno-0-1270></a>                            <span class=s2>&quot;[NetGear:ERROR] :: Client(s) seems to be offline, Abandoning.&quot;</span>
<a id=__codelineno-0-1271 name=__codelineno-0-1271 href=#__codelineno-0-1271></a>                        <span class=p>)</span>
<a id=__codelineno-0-1272 name=__codelineno-0-1272 href=#__codelineno-0-1272></a>
<a id=__codelineno-0-1273 name=__codelineno-0-1273 href=#__codelineno-0-1273></a>                    <span class=c1># Create new connection</span>
<a id=__codelineno-0-1274 name=__codelineno-0-1274 href=#__codelineno-0-1274></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span><span class=p>)</span>
<a id=__codelineno-0-1275 name=__codelineno-0-1275 href=#__codelineno-0-1275></a>                    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-1276 name=__codelineno-0-1276 href=#__codelineno-0-1276></a>                        <span class=k>for</span> <span class=n>_connection</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>:</span>
<a id=__codelineno-0-1277 name=__codelineno-0-1277 href=#__codelineno-0-1277></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>_connection</span><span class=p>)</span>
<a id=__codelineno-0-1278 name=__codelineno-0-1278 href=#__codelineno-0-1278></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1279 name=__codelineno-0-1279 href=#__codelineno-0-1279></a>                        <span class=c1># handle SSH tunneling if enabled</span>
<a id=__codelineno-0-1280 name=__codelineno-0-1280 href=#__codelineno-0-1280></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-1281 name=__codelineno-0-1281 href=#__codelineno-0-1281></a>                            <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-1282 name=__codelineno-0-1282 href=#__codelineno-0-1282></a>                            <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-1283 name=__codelineno-0-1283 href=#__codelineno-0-1283></a>                                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-1284 name=__codelineno-0-1284 href=#__codelineno-0-1284></a>                                <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span>
<a id=__codelineno-0-1285 name=__codelineno-0-1285 href=#__codelineno-0-1285></a>                                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-1286 name=__codelineno-0-1286 href=#__codelineno-0-1286></a>                                <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-1287 name=__codelineno-0-1287 href=#__codelineno-0-1287></a>                                <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-1288 name=__codelineno-0-1288 href=#__codelineno-0-1288></a>                                <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-1289 name=__codelineno-0-1289 href=#__codelineno-0-1289></a>                            <span class=p>)</span>
<a id=__codelineno-0-1290 name=__codelineno-0-1290 href=#__codelineno-0-1290></a>                        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1291 name=__codelineno-0-1291 href=#__codelineno-0-1291></a>                            <span class=c1># connect normally</span>
<a id=__codelineno-0-1292 name=__codelineno-0-1292 href=#__codelineno-0-1292></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>)</span>
<a id=__codelineno-0-1293 name=__codelineno-0-1293 href=#__codelineno-0-1293></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-1294 name=__codelineno-0-1294 href=#__codelineno-0-1294></a>                    <span class=c1># return None for mean-time</span>
<a id=__codelineno-0-1295 name=__codelineno-0-1295 href=#__codelineno-0-1295></a>                    <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-1296 name=__codelineno-0-1296 href=#__codelineno-0-1296></a>
<a id=__codelineno-0-1297 name=__codelineno-0-1297 href=#__codelineno-0-1297></a>                <span class=c1># save the unique port addresses</span>
<a id=__codelineno-0-1298 name=__codelineno-0-1298 href=#__codelineno-0-1298></a>                <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-1299 name=__codelineno-0-1299 href=#__codelineno-0-1299></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-1300 name=__codelineno-0-1300 href=#__codelineno-0-1300></a>                    <span class=ow>and</span> <span class=ow>not</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span>
<a id=__codelineno-0-1301 name=__codelineno-0-1301 href=#__codelineno-0-1301></a>                <span class=p>):</span>
<a id=__codelineno-0-1302 name=__codelineno-0-1302 href=#__codelineno-0-1302></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>])</span>
<a id=__codelineno-0-1303 name=__codelineno-0-1303 href=#__codelineno-0-1303></a>
<a id=__codelineno-0-1304 name=__codelineno-0-1304 href=#__codelineno-0-1304></a>                <span class=k>if</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;return_type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;ndarray&quot;</span><span class=p>:</span>
<a id=__codelineno-0-1305 name=__codelineno-0-1305 href=#__codelineno-0-1305></a>                    <span class=n>recv_array</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span>
<a id=__codelineno-0-1306 name=__codelineno-0-1306 href=#__codelineno-0-1306></a>                        <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>,</span>
<a id=__codelineno-0-1307 name=__codelineno-0-1307 href=#__codelineno-0-1307></a>                        <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span>
<a id=__codelineno-0-1308 name=__codelineno-0-1308 href=#__codelineno-0-1308></a>                        <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span><span class=p>,</span>
<a id=__codelineno-0-1309 name=__codelineno-0-1309 href=#__codelineno-0-1309></a>                    <span class=p>)</span>
<a id=__codelineno-0-1310 name=__codelineno-0-1310 href=#__codelineno-0-1310></a>                    <span class=c1># check if encoding was enabled</span>
<a id=__codelineno-0-1311 name=__codelineno-0-1311 href=#__codelineno-0-1311></a>                    <span class=k>if</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-1312 name=__codelineno-0-1312 href=#__codelineno-0-1312></a>                        <span class=c1># decode JPEG frame</span>
<a id=__codelineno-0-1313 name=__codelineno-0-1313 href=#__codelineno-0-1313></a>                        <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>decode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-1314 name=__codelineno-0-1314 href=#__codelineno-0-1314></a>                            <span class=n>recv_array</span><span class=p>,</span>
<a id=__codelineno-0-1315 name=__codelineno-0-1315 href=#__codelineno-0-1315></a>                            <span class=n>colorspace</span><span class=o>=</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1316 name=__codelineno-0-1316 href=#__codelineno-0-1316></a>                            <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-1317 name=__codelineno-0-1317 href=#__codelineno-0-1317></a>                            <span class=ow>or</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;dct&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1318 name=__codelineno-0-1318 href=#__codelineno-0-1318></a>                            <span class=n>fastupsample</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-1319 name=__codelineno-0-1319 href=#__codelineno-0-1319></a>                            <span class=ow>or</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;ups&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1320 name=__codelineno-0-1320 href=#__codelineno-0-1320></a>                        <span class=p>)</span>
<a id=__codelineno-0-1321 name=__codelineno-0-1321 href=#__codelineno-0-1321></a>                        <span class=c1># check if valid frame returned</span>
<a id=__codelineno-0-1322 name=__codelineno-0-1322 href=#__codelineno-0-1322></a>                        <span class=k>if</span> <span class=n>recvd_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-1323 name=__codelineno-0-1323 href=#__codelineno-0-1323></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1324 name=__codelineno-0-1324 href=#__codelineno-0-1324></a>                            <span class=c1># otherwise raise error and exit</span>
<a id=__codelineno-0-1325 name=__codelineno-0-1325 href=#__codelineno-0-1325></a>                            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-1326 name=__codelineno-0-1326 href=#__codelineno-0-1326></a>                                <span class=s2>&quot;[NetGear:ERROR] :: Received compressed frame `</span><span class=si>{}</span><span class=s2>` decoding failed with flag: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-1327 name=__codelineno-0-1327 href=#__codelineno-0-1327></a>                                    <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>],</span>
<a id=__codelineno-0-1328 name=__codelineno-0-1328 href=#__codelineno-0-1328></a>                                    <span class=bp>self</span><span class=o>.</span><span class=n>__ex_compression_params</span><span class=p>,</span>
<a id=__codelineno-0-1329 name=__codelineno-0-1329 href=#__codelineno-0-1329></a>                                <span class=p>)</span>
<a id=__codelineno-0-1330 name=__codelineno-0-1330 href=#__codelineno-0-1330></a>                            <span class=p>)</span>
<a id=__codelineno-0-1331 name=__codelineno-0-1331 href=#__codelineno-0-1331></a>
<a id=__codelineno-0-1332 name=__codelineno-0-1332 href=#__codelineno-0-1332></a>                        <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-1333 name=__codelineno-0-1333 href=#__codelineno-0-1333></a>                            <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span>
<a id=__codelineno-0-1334 name=__codelineno-0-1334 href=#__codelineno-0-1334></a>                            <span class=ow>and</span> <span class=n>recvd_data</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>3</span>
<a id=__codelineno-0-1335 name=__codelineno-0-1335 href=#__codelineno-0-1335></a>                        <span class=p>):</span>
<a id=__codelineno-0-1336 name=__codelineno-0-1336 href=#__codelineno-0-1336></a>                            <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-1337 name=__codelineno-0-1337 href=#__codelineno-0-1337></a>                            <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>squeeze</span><span class=p>(</span><span class=n>recvd_data</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-0-1338 name=__codelineno-0-1338 href=#__codelineno-0-1338></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1339 name=__codelineno-0-1339 href=#__codelineno-0-1339></a>                        <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>frombuffer</span><span class=p>(</span>
<a id=__codelineno-0-1340 name=__codelineno-0-1340 href=#__codelineno-0-1340></a>                            <span class=n>recv_array</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;array_dtype&quot;</span><span class=p>]</span>
<a id=__codelineno-0-1341 name=__codelineno-0-1341 href=#__codelineno-0-1341></a>                        <span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;array_shape&quot;</span><span class=p>])</span>
<a id=__codelineno-0-1342 name=__codelineno-0-1342 href=#__codelineno-0-1342></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1343 name=__codelineno-0-1343 href=#__codelineno-0-1343></a>                    <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;data&quot;</span><span class=p>]</span>
<a id=__codelineno-0-1344 name=__codelineno-0-1344 href=#__codelineno-0-1344></a>
<a id=__codelineno-0-1345 name=__codelineno-0-1345 href=#__codelineno-0-1345></a>                <span class=k>return</span> <span class=p>(</span>
<a id=__codelineno-0-1346 name=__codelineno-0-1346 href=#__codelineno-0-1346></a>                    <span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>],</span> <span class=n>recvd_data</span><span class=p>)</span>
<a id=__codelineno-0-1347 name=__codelineno-0-1347 href=#__codelineno-0-1347></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-1348 name=__codelineno-0-1348 href=#__codelineno-0-1348></a>                    <span class=k>else</span> <span class=n>recvd_data</span>
<a id=__codelineno-0-1349 name=__codelineno-0-1349 href=#__codelineno-0-1349></a>                <span class=p>)</span>
<a id=__codelineno-0-1350 name=__codelineno-0-1350 href=#__codelineno-0-1350></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1351 name=__codelineno-0-1351 href=#__codelineno-0-1351></a>                <span class=c1># otherwise log normally</span>
<a id=__codelineno-0-1352 name=__codelineno-0-1352 href=#__codelineno-0-1352></a>                <span class=n>socks</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span><span class=p>))</span>
<a id=__codelineno-0-1353 name=__codelineno-0-1353 href=#__codelineno-0-1353></a>                <span class=k>if</span> <span class=n>socks</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span> <span class=o>==</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>:</span>
<a id=__codelineno-0-1354 name=__codelineno-0-1354 href=#__codelineno-0-1354></a>                    <span class=n>recv_confirmation</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>()</span>
<a id=__codelineno-0-1355 name=__codelineno-0-1355 href=#__codelineno-0-1355></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1356 name=__codelineno-0-1356 href=#__codelineno-0-1356></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;No response from Client, Reconnecting again...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1357 name=__codelineno-0-1357 href=#__codelineno-0-1357></a>                    <span class=c1># Socket is confused. Close and remove it.</span>
<a id=__codelineno-0-1358 name=__codelineno-0-1358 href=#__codelineno-0-1358></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-1359 name=__codelineno-0-1359 href=#__codelineno-0-1359></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-1360 name=__codelineno-0-1360 href=#__codelineno-0-1360></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span>
<a id=__codelineno-0-1361 name=__codelineno-0-1361 href=#__codelineno-0-1361></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-0-1362 name=__codelineno-0-1362 href=#__codelineno-0-1362></a>
<a id=__codelineno-0-1363 name=__codelineno-0-1363 href=#__codelineno-0-1363></a>                    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>):</span>
<a id=__codelineno-0-1364 name=__codelineno-0-1364 href=#__codelineno-0-1364></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Client failed to respond on repeated attempts.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1365 name=__codelineno-0-1365 href=#__codelineno-0-1365></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1366 name=__codelineno-0-1366 href=#__codelineno-0-1366></a>                        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-1367 name=__codelineno-0-1367 href=#__codelineno-0-1367></a>                            <span class=s2>&quot;[NetGear:ERROR] :: Client seems to be offline, Abandoning!&quot;</span>
<a id=__codelineno-0-1368 name=__codelineno-0-1368 href=#__codelineno-0-1368></a>                        <span class=p>)</span>
<a id=__codelineno-0-1369 name=__codelineno-0-1369 href=#__codelineno-0-1369></a>
<a id=__codelineno-0-1370 name=__codelineno-0-1370 href=#__codelineno-0-1370></a>                    <span class=c1># Create new connection</span>
<a id=__codelineno-0-1371 name=__codelineno-0-1371 href=#__codelineno-0-1371></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span><span class=p>)</span>
<a id=__codelineno-0-1372 name=__codelineno-0-1372 href=#__codelineno-0-1372></a>                    <span class=c1># handle SSH tunneling if enabled</span>
<a id=__codelineno-0-1373 name=__codelineno-0-1373 href=#__codelineno-0-1373></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-1374 name=__codelineno-0-1374 href=#__codelineno-0-1374></a>                        <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-1375 name=__codelineno-0-1375 href=#__codelineno-0-1375></a>                        <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-1376 name=__codelineno-0-1376 href=#__codelineno-0-1376></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-1377 name=__codelineno-0-1377 href=#__codelineno-0-1377></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span>
<a id=__codelineno-0-1378 name=__codelineno-0-1378 href=#__codelineno-0-1378></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-1379 name=__codelineno-0-1379 href=#__codelineno-0-1379></a>                            <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-1380 name=__codelineno-0-1380 href=#__codelineno-0-1380></a>                            <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-1381 name=__codelineno-0-1381 href=#__codelineno-0-1381></a>                            <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-1382 name=__codelineno-0-1382 href=#__codelineno-0-1382></a>                        <span class=p>)</span>
<a id=__codelineno-0-1383 name=__codelineno-0-1383 href=#__codelineno-0-1383></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1384 name=__codelineno-0-1384 href=#__codelineno-0-1384></a>                        <span class=c1># connect normally</span>
<a id=__codelineno-0-1385 name=__codelineno-0-1385 href=#__codelineno-0-1385></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>)</span>
<a id=__codelineno-0-1386 name=__codelineno-0-1386 href=#__codelineno-0-1386></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-1387 name=__codelineno-0-1387 href=#__codelineno-0-1387></a>
<a id=__codelineno-0-1388 name=__codelineno-0-1388 href=#__codelineno-0-1388></a>                    <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-1389 name=__codelineno-0-1389 href=#__codelineno-0-1389></a>
<a id=__codelineno-0-1390 name=__codelineno-0-1390 href=#__codelineno-0-1390></a>                <span class=c1># log confirmation</span>
<a id=__codelineno-0-1391 name=__codelineno-0-1391 href=#__codelineno-0-1391></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>recv_confirmation</span><span class=p>)</span>
<a id=__codelineno-0-1392 name=__codelineno-0-1392 href=#__codelineno-0-1392></a>
<a id=__codelineno-0-1393 name=__codelineno-0-1393 href=#__codelineno-0-1393></a>    <span class=k>def</span> <span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-0-1394 name=__codelineno-0-1394 href=#__codelineno-0-1394></a>        <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-1395 name=__codelineno-0-1395 href=#__codelineno-0-1395></a><span class=sd>        Safely terminates the threads, and NetGear resources.</span>
<a id=__codelineno-0-1396 name=__codelineno-0-1396 href=#__codelineno-0-1396></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-0-1397 name=__codelineno-0-1397 href=#__codelineno-0-1397></a>        <span class=c1># log it</span>
<a id=__codelineno-0-1398 name=__codelineno-0-1398 href=#__codelineno-0-1398></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-1399 name=__codelineno-0-1399 href=#__codelineno-0-1399></a>            <span class=s2>&quot;Terminating various </span><span class=si>{}</span><span class=s2> Processes.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-1400 name=__codelineno-0-1400 href=#__codelineno-0-1400></a>                <span class=s2>&quot;Receive Mode&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span> <span class=k>else</span> <span class=s2>&quot;Send Mode&quot;</span>
<a id=__codelineno-0-1401 name=__codelineno-0-1401 href=#__codelineno-0-1401></a>            <span class=p>)</span>
<a id=__codelineno-0-1402 name=__codelineno-0-1402 href=#__codelineno-0-1402></a>        <span class=p>)</span>
<a id=__codelineno-0-1403 name=__codelineno-0-1403 href=#__codelineno-0-1403></a>        <span class=c1>#  whether `receive_mode` is enabled or not</span>
<a id=__codelineno-0-1404 name=__codelineno-0-1404 href=#__codelineno-0-1404></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-1405 name=__codelineno-0-1405 href=#__codelineno-0-1405></a>            <span class=c1># check whether queue mode is empty</span>
<a id=__codelineno-0-1406 name=__codelineno-0-1406 href=#__codelineno-0-1406></a>            <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__queue</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=p>:</span>
<a id=__codelineno-0-1407 name=__codelineno-0-1407 href=#__codelineno-0-1407></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
<a id=__codelineno-0-1408 name=__codelineno-0-1408 href=#__codelineno-0-1408></a>            <span class=c1># call immediate termination</span>
<a id=__codelineno-0-1409 name=__codelineno-0-1409 href=#__codelineno-0-1409></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1410 name=__codelineno-0-1410 href=#__codelineno-0-1410></a>            <span class=c1># wait until stream resources are released (producer thread might be still grabbing frame)</span>
<a id=__codelineno-0-1411 name=__codelineno-0-1411 href=#__codelineno-0-1411></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-1412 name=__codelineno-0-1412 href=#__codelineno-0-1412></a>                <span class=c1># properly handle thread exit</span>
<a id=__codelineno-0-1413 name=__codelineno-0-1413 href=#__codelineno-0-1413></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-0-1414 name=__codelineno-0-1414 href=#__codelineno-0-1414></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-1415 name=__codelineno-0-1415 href=#__codelineno-0-1415></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminating. Please wait...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1416 name=__codelineno-0-1416 href=#__codelineno-0-1416></a>            <span class=c1># properly close the socket</span>
<a id=__codelineno-0-1417 name=__codelineno-0-1417 href=#__codelineno-0-1417></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>(</span><span class=n>linger</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-1418 name=__codelineno-0-1418 href=#__codelineno-0-1418></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminated Successfully!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1419 name=__codelineno-0-1419 href=#__codelineno-0-1419></a>
<a id=__codelineno-0-1420 name=__codelineno-0-1420 href=#__codelineno-0-1420></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1421 name=__codelineno-0-1421 href=#__codelineno-0-1421></a>            <span class=c1># indicate that process should be terminated</span>
<a id=__codelineno-0-1422 name=__codelineno-0-1422 href=#__codelineno-0-1422></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-1423 name=__codelineno-0-1423 href=#__codelineno-0-1423></a>
<a id=__codelineno-0-1424 name=__codelineno-0-1424 href=#__codelineno-0-1424></a>            <span class=c1># check if all attempts of reconnecting failed, then skip to closure</span>
<a id=__codelineno-0-1425 name=__codelineno-0-1425 href=#__codelineno-0-1425></a>            <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>)</span> <span class=ow>or</span> <span class=p>(</span>
<a id=__codelineno-0-1426 name=__codelineno-0-1426 href=#__codelineno-0-1426></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span>
<a id=__codelineno-0-1427 name=__codelineno-0-1427 href=#__codelineno-0-1427></a>            <span class=p>):</span>
<a id=__codelineno-0-1428 name=__codelineno-0-1428 href=#__codelineno-0-1428></a>                <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-1429 name=__codelineno-0-1429 href=#__codelineno-0-1429></a>                    <span class=c1># properly close the socket</span>
<a id=__codelineno-0-1430 name=__codelineno-0-1430 href=#__codelineno-0-1430></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-1431 name=__codelineno-0-1431 href=#__codelineno-0-1431></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-1432 name=__codelineno-0-1432 href=#__codelineno-0-1432></a>                <span class=k>except</span> <span class=n>ZMQError</span><span class=p>:</span>
<a id=__codelineno-0-1433 name=__codelineno-0-1433 href=#__codelineno-0-1433></a>                    <span class=k>pass</span>
<a id=__codelineno-0-1434 name=__codelineno-0-1434 href=#__codelineno-0-1434></a>                <span class=k>finally</span><span class=p>:</span>
<a id=__codelineno-0-1435 name=__codelineno-0-1435 href=#__codelineno-0-1435></a>                    <span class=c1># exit</span>
<a id=__codelineno-0-1436 name=__codelineno-0-1436 href=#__codelineno-0-1436></a>                    <span class=k>return</span>
<a id=__codelineno-0-1437 name=__codelineno-0-1437 href=#__codelineno-0-1437></a>
<a id=__codelineno-0-1438 name=__codelineno-0-1438 href=#__codelineno-0-1438></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-1439 name=__codelineno-0-1439 href=#__codelineno-0-1439></a>                <span class=c1># check if multiserver_mode</span>
<a id=__codelineno-0-1440 name=__codelineno-0-1440 href=#__codelineno-0-1440></a>                <span class=c1># send termination flag to client with its unique port</span>
<a id=__codelineno-0-1441 name=__codelineno-0-1441 href=#__codelineno-0-1441></a>                <span class=n>term_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>terminate_flag</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span>
<a id=__codelineno-0-1442 name=__codelineno-0-1442 href=#__codelineno-0-1442></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1443 name=__codelineno-0-1443 href=#__codelineno-0-1443></a>                <span class=c1># otherwise send termination flag to client</span>
<a id=__codelineno-0-1444 name=__codelineno-0-1444 href=#__codelineno-0-1444></a>                <span class=n>term_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>terminate_flag</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-0-1445 name=__codelineno-0-1445 href=#__codelineno-0-1445></a>
<a id=__codelineno-0-1446 name=__codelineno-0-1446 href=#__codelineno-0-1446></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-1447 name=__codelineno-0-1447 href=#__codelineno-0-1447></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-1448 name=__codelineno-0-1448 href=#__codelineno-0-1448></a>                    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=p>:</span>
<a id=__codelineno-0-1449 name=__codelineno-0-1449 href=#__codelineno-0-1449></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>term_dict</span><span class=p>)</span>
<a id=__codelineno-0-1450 name=__codelineno-0-1450 href=#__codelineno-0-1450></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-1451 name=__codelineno-0-1451 href=#__codelineno-0-1451></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>term_dict</span><span class=p>)</span>
<a id=__codelineno-0-1452 name=__codelineno-0-1452 href=#__codelineno-0-1452></a>
<a id=__codelineno-0-1453 name=__codelineno-0-1453 href=#__codelineno-0-1453></a>                <span class=c1># check for confirmation if available within 1/5 timeout</span>
<a id=__codelineno-0-1454 name=__codelineno-0-1454 href=#__codelineno-0-1454></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-1455 name=__codelineno-0-1455 href=#__codelineno-0-1455></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminating. Please wait...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-1456 name=__codelineno-0-1456 href=#__codelineno-0-1456></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>//</span> <span class=mi>5</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>):</span>
<a id=__codelineno-0-1457 name=__codelineno-0-1457 href=#__codelineno-0-1457></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>()</span>
<a id=__codelineno-0-1458 name=__codelineno-0-1458 href=#__codelineno-0-1458></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-1459 name=__codelineno-0-1459 href=#__codelineno-0-1459></a>                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=n>ZMQError</span><span class=p>):</span>
<a id=__codelineno-0-1460 name=__codelineno-0-1460 href=#__codelineno-0-1460></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-1461 name=__codelineno-0-1461 href=#__codelineno-0-1461></a>            <span class=k>finally</span><span class=p>:</span>
<a id=__codelineno-0-1462 name=__codelineno-0-1462 href=#__codelineno-0-1462></a>                <span class=c1># properly close the socket</span>
<a id=__codelineno-0-1463 name=__codelineno-0-1463 href=#__codelineno-0-1463></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-1464 name=__codelineno-0-1464 href=#__codelineno-0-1464></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-1465 name=__codelineno-0-1465 href=#__codelineno-0-1465></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminated Successfully!&quot;</span><span class=p>)</span>
</code></pre></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-method"> <h3 class="doc doc-heading" id=vidgear.gears.netgear.NetGear.__init__> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>address</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>protocol</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>receive_mode</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>logging</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>options</span><span class=p>)</span></code> <span class="doc doc-properties"> <small class="doc doc-property doc-property-special"><code>special</code></small> </span> <a class=headerlink href=#vidgear.gears.netgear.NetGear.__init__ title="Anchor link to this section for reference">âš“</a></h3> <div class="doc doc-contents "> <p>This constructor method initializes the object state and attributes of the NetGear class.</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>address</code></td> <td><code>str</code></td> <td><p>sets the valid network address of the Server/Client.</p></td> <td><code>None</code></td> </tr> <tr> <td><code>port</code></td> <td><code>str</code></td> <td><p>sets the valid Network Port of the Server/Client.</p></td> <td><code>None</code></td> </tr> <tr> <td><code>protocol</code></td> <td><code>str</code></td> <td><p>sets the valid messaging protocol between Server/Client.</p></td> <td><code>None</code></td> </tr> <tr> <td><code>pattern</code></td> <td><code>int</code></td> <td><p>sets the supported messaging pattern(flow of communication) between Server/Client</p></td> <td><code>0</code></td> </tr> <tr> <td><code>receive_mode</code></td> <td><code>bool</code></td> <td><p>select the Netgear's Mode of operation.</p></td> <td><code>False</code></td> </tr> <tr> <td><code>logging</code></td> <td><code>bool</code></td> <td><p>enables/disables logging.</p></td> <td><code>False</code></td> </tr> <tr> <td><code>options</code></td> <td><code>dict</code></td> <td><p>provides the flexibility to alter various NetGear internal properties.</p></td> <td><code>{}</code></td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>vidgear/gears/netgear.py</code></summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=bp>self</span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>address</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>protocol</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>pattern</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=n>receive_mode</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    <span class=n>logging</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    <span class=o>**</span><span class=n>options</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=p>):</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=sd>    This constructor method initializes the object state and attributes of the NetGear class.</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=sd>    Parameters:</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=sd>        address (str): sets the valid network address of the Server/Client.</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=sd>        port (str): sets the valid Network Port of the Server/Client.</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=sd>        protocol (str): sets the valid messaging protocol between Server/Client.</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=sd>        pattern (int): sets the supported messaging pattern(flow of communication) between Server/Client</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=sd>        receive_mode (bool): select the Netgear&#39;s Mode of operation.</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=sd>        logging (bool): enables/disables logging.</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=sd>        options (dict): provides the flexibility to alter various NetGear internal properties.</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>    <span class=c1># raise error(s) for critical Class imports</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>    <span class=n>import_dependency_safe</span><span class=p>(</span><span class=s2>&quot;zmq&quot;</span> <span class=k>if</span> <span class=n>zmq</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>min_version</span><span class=o>=</span><span class=s2>&quot;4.0&quot;</span><span class=p>)</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>    <span class=n>import_dependency_safe</span><span class=p>(</span>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>        <span class=s2>&quot;simplejpeg&quot;</span> <span class=k>if</span> <span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=s2>&quot;log&quot;</span><span class=p>,</span> <span class=n>min_version</span><span class=o>=</span><span class=s2>&quot;1.6.1&quot;</span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>    <span class=p>)</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>    <span class=c1># enable logging if specified</span>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=o>=</span> <span class=kc>True</span> <span class=k>if</span> <span class=n>logging</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>    <span class=c1># define valid messaging patterns =&gt; `0`: zmq.PAIR, `1`:(zmq.REQ,zmq.REP), and `1`:(zmq.SUB,zmq.PUB)</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>    <span class=n>valid_messaging_patterns</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>        <span class=mi>0</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>PAIR</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>PAIR</span><span class=p>),</span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>        <span class=mi>1</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>REQ</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>REP</span><span class=p>),</span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>        <span class=mi>2</span><span class=p>:</span> <span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>PUB</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>SUB</span><span class=p>),</span>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>    <span class=p>}</span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>    <span class=c1># Handle messaging pattern</span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>    <span class=n>msg_pattern</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>    <span class=c1># check whether user-defined messaging pattern is valid</span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=n>valid_messaging_patterns</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>        <span class=c1># assign value</span>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>        <span class=n>msg_pattern</span> <span class=o>=</span> <span class=n>valid_messaging_patterns</span><span class=p>[</span><span class=n>pattern</span><span class=p>]</span>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>        <span class=c1># otherwise default to 0:`zmq.PAIR`</span>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>        <span class=n>pattern</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>        <span class=n>msg_pattern</span> <span class=o>=</span> <span class=n>valid_messaging_patterns</span><span class=p>[</span><span class=n>pattern</span><span class=p>]</span>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>            <span class=s2>&quot;Wrong pattern value, Defaulting to `zmq.PAIR`! Kindly refer Docs for more Information.&quot;</span>
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>        <span class=p>)</span>
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>    <span class=c1># assign pattern to global parameter for further use</span>
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>=</span> <span class=n>pattern</span>
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>
<a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>    <span class=c1># Handle messaging protocol</span>
<a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>    <span class=k>if</span> <span class=n>protocol</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=p>(</span><span class=n>protocol</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;tcp&quot;</span><span class=p>,</span> <span class=s2>&quot;ipc&quot;</span><span class=p>]):</span>
<a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>        <span class=c1># else default to `tcp` protocol</span>
<a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>        <span class=n>protocol</span> <span class=o>=</span> <span class=s2>&quot;tcp&quot;</span>
<a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>        <span class=c1># log it</span>
<a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>            <span class=s2>&quot;Protocol is not supported or not provided. Defaulting to `tcp` protocol!&quot;</span>
<a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>        <span class=p>)</span>
<a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>
<a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>    <span class=c1># Handle connection params</span>
<a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>
<a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># handles connection flags</span>
<a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles whether to copy data</span>
<a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles whether to track packets</span>
<a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a>
<a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a>    <span class=c1># Handle NetGear&#39;s internal exclusive modes and params</span>
<a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>
<a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a>    <span class=c1># define SSH Tunneling Mode</span>
<a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># handles ssh_tunneling mode state</span>
<a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=o>=</span> <span class=kc>False</span> <span class=k>if</span> <span class=n>paramiko</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=kc>True</span>
<a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>
<a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a>    <span class=c1># define Multi-Server mode</span>
<a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles multi-server mode state</span>
<a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>
<a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a>    <span class=c1># define Multi-Client mode</span>
<a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles multi-client mode state</span>
<a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a>
<a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a>    <span class=c1># define Bidirectional mode</span>
<a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># handles Bidirectional mode state</span>
<a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a>
<a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a>    <span class=c1># define Secure mode</span>
<a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a>    <span class=n>valid_security_mech</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>:</span> <span class=s2>&quot;Grasslands&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>:</span> <span class=s2>&quot;StoneHouse&quot;</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=s2>&quot;IronHouse&quot;</span><span class=p>}</span>
<a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># handles ZMQ security layer status</span>
<a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a>    <span class=n>auth_cert_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ certificates dir</span>
<a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ public certificates dir</span>
<a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles valid ZMQ private certificates dir</span>
<a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a>    <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># checks if certificates overwriting allowed</span>
<a id=__codelineno-0-95 name=__codelineno-0-95 href=#__codelineno-0-95></a>    <span class=n>custom_cert_location</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>  <span class=c1># handles custom ZMQ certificates path</span>
<a id=__codelineno-0-96 name=__codelineno-0-96 href=#__codelineno-0-96></a>
<a id=__codelineno-0-97 name=__codelineno-0-97 href=#__codelineno-0-97></a>    <span class=c1># define frame-compression handler</span>
<a id=__codelineno-0-98 name=__codelineno-0-98 href=#__codelineno-0-98></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-99 name=__codelineno-0-99 href=#__codelineno-0-99></a>        <span class=kc>True</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-100 name=__codelineno-0-100 href=#__codelineno-0-100></a>    <span class=p>)</span>  <span class=c1># enabled by default for all connections if simplejpeg is installed</span>
<a id=__codelineno-0-101 name=__codelineno-0-101 href=#__codelineno-0-101></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span> <span class=o>=</span> <span class=mi>90</span>  <span class=c1># 90% quality</span>
<a id=__codelineno-0-102 name=__codelineno-0-102 href=#__codelineno-0-102></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># fastest DCT on by default</span>
<a id=__codelineno-0-103 name=__codelineno-0-103 href=#__codelineno-0-103></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># fastupsample off by default</span>
<a id=__codelineno-0-104 name=__codelineno-0-104 href=#__codelineno-0-104></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>=</span> <span class=s2>&quot;BGR&quot;</span>  <span class=c1># use BGR colorspace by default</span>
<a id=__codelineno-0-105 name=__codelineno-0-105 href=#__codelineno-0-105></a>
<a id=__codelineno-0-106 name=__codelineno-0-106 href=#__codelineno-0-106></a>    <span class=c1># defines frame compression on return data</span>
<a id=__codelineno-0-107 name=__codelineno-0-107 href=#__codelineno-0-107></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__ex_compression_params</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-108 name=__codelineno-0-108 href=#__codelineno-0-108></a>
<a id=__codelineno-0-109 name=__codelineno-0-109 href=#__codelineno-0-109></a>    <span class=c1># define receiver return data handler</span>
<a id=__codelineno-0-110 name=__codelineno-0-110 href=#__codelineno-0-110></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-111 name=__codelineno-0-111 href=#__codelineno-0-111></a>
<a id=__codelineno-0-112 name=__codelineno-0-112 href=#__codelineno-0-112></a>    <span class=c1># generate 8-digit random system id</span>
<a id=__codelineno-0-113 name=__codelineno-0-113 href=#__codelineno-0-113></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__id</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-114 name=__codelineno-0-114 href=#__codelineno-0-114></a>        <span class=n>secrets</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>string</span><span class=o>.</span><span class=n>ascii_uppercase</span> <span class=o>+</span> <span class=n>string</span><span class=o>.</span><span class=n>digits</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span>
<a id=__codelineno-0-115 name=__codelineno-0-115 href=#__codelineno-0-115></a>    <span class=p>)</span>
<a id=__codelineno-0-116 name=__codelineno-0-116 href=#__codelineno-0-116></a>
<a id=__codelineno-0-117 name=__codelineno-0-117 href=#__codelineno-0-117></a>    <span class=c1># define termination flag</span>
<a id=__codelineno-0-118 name=__codelineno-0-118 href=#__codelineno-0-118></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-119 name=__codelineno-0-119 href=#__codelineno-0-119></a>
<a id=__codelineno-0-120 name=__codelineno-0-120 href=#__codelineno-0-120></a>    <span class=c1># additional settings for reliability</span>
<a id=__codelineno-0-121 name=__codelineno-0-121 href=#__codelineno-0-121></a>    <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-122 name=__codelineno-0-122 href=#__codelineno-0-122></a>        <span class=c1># define zmq poller for reliable transmission</span>
<a id=__codelineno-0-123 name=__codelineno-0-123 href=#__codelineno-0-123></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span> <span class=o>=</span> <span class=n>zmq</span><span class=o>.</span><span class=n>Poller</span><span class=p>()</span>
<a id=__codelineno-0-124 name=__codelineno-0-124 href=#__codelineno-0-124></a>        <span class=c1># define max retries</span>
<a id=__codelineno-0-125 name=__codelineno-0-125 href=#__codelineno-0-125></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>=</span> <span class=mi>3</span>
<a id=__codelineno-0-126 name=__codelineno-0-126 href=#__codelineno-0-126></a>        <span class=c1># request timeout</span>
<a id=__codelineno-0-127 name=__codelineno-0-127 href=#__codelineno-0-127></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>=</span> <span class=mi>4000</span>  <span class=c1># 4 secs</span>
<a id=__codelineno-0-128 name=__codelineno-0-128 href=#__codelineno-0-128></a>
<a id=__codelineno-0-129 name=__codelineno-0-129 href=#__codelineno-0-129></a>    <span class=c1># Handle user-defined options dictionary values</span>
<a id=__codelineno-0-130 name=__codelineno-0-130 href=#__codelineno-0-130></a>    <span class=c1># reformat dictionary</span>
<a id=__codelineno-0-131 name=__codelineno-0-131 href=#__codelineno-0-131></a>    <span class=n>options</span> <span class=o>=</span> <span class=p>{</span><span class=nb>str</span><span class=p>(</span><span class=n>k</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>():</span> <span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>options</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>
<a id=__codelineno-0-132 name=__codelineno-0-132 href=#__codelineno-0-132></a>
<a id=__codelineno-0-133 name=__codelineno-0-133 href=#__codelineno-0-133></a>    <span class=c1># loop over dictionary key &amp; values and assign to global variables if valid</span>
<a id=__codelineno-0-134 name=__codelineno-0-134 href=#__codelineno-0-134></a>    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>options</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
<a id=__codelineno-0-135 name=__codelineno-0-135 href=#__codelineno-0-135></a>        <span class=c1># handle multi-server mode</span>
<a id=__codelineno-0-136 name=__codelineno-0-136 href=#__codelineno-0-136></a>        <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;multiserver_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-137 name=__codelineno-0-137 href=#__codelineno-0-137></a>            <span class=c1># check if valid pattern assigned</span>
<a id=__codelineno-0-138 name=__codelineno-0-138 href=#__codelineno-0-138></a>            <span class=k>if</span> <span class=n>pattern</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-139 name=__codelineno-0-139 href=#__codelineno-0-139></a>                <span class=c1># activate Multi-server mode</span>
<a id=__codelineno-0-140 name=__codelineno-0-140 href=#__codelineno-0-140></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-141 name=__codelineno-0-141 href=#__codelineno-0-141></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-142 name=__codelineno-0-142 href=#__codelineno-0-142></a>                <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-143 name=__codelineno-0-143 href=#__codelineno-0-143></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-144 name=__codelineno-0-144 href=#__codelineno-0-144></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;Multi-Server Mode is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-145 name=__codelineno-0-145 href=#__codelineno-0-145></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-146 name=__codelineno-0-146 href=#__codelineno-0-146></a>                    <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Multi-Server Mode is enabled. Kindly refer Docs for more Information.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-147 name=__codelineno-0-147 href=#__codelineno-0-147></a>                        <span class=n>pattern</span>
<a id=__codelineno-0-148 name=__codelineno-0-148 href=#__codelineno-0-148></a>                    <span class=p>)</span>
<a id=__codelineno-0-149 name=__codelineno-0-149 href=#__codelineno-0-149></a>                <span class=p>)</span>
<a id=__codelineno-0-150 name=__codelineno-0-150 href=#__codelineno-0-150></a>
<a id=__codelineno-0-151 name=__codelineno-0-151 href=#__codelineno-0-151></a>        <span class=c1># handle multi-client mode</span>
<a id=__codelineno-0-152 name=__codelineno-0-152 href=#__codelineno-0-152></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;multiclient_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-153 name=__codelineno-0-153 href=#__codelineno-0-153></a>            <span class=c1># check if valid pattern assigned</span>
<a id=__codelineno-0-154 name=__codelineno-0-154 href=#__codelineno-0-154></a>            <span class=k>if</span> <span class=n>pattern</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-155 name=__codelineno-0-155 href=#__codelineno-0-155></a>                <span class=c1># activate Multi-client mode</span>
<a id=__codelineno-0-156 name=__codelineno-0-156 href=#__codelineno-0-156></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-157 name=__codelineno-0-157 href=#__codelineno-0-157></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-158 name=__codelineno-0-158 href=#__codelineno-0-158></a>                <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-159 name=__codelineno-0-159 href=#__codelineno-0-159></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-160 name=__codelineno-0-160 href=#__codelineno-0-160></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;Multi-Client Mode is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-161 name=__codelineno-0-161 href=#__codelineno-0-161></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-162 name=__codelineno-0-162 href=#__codelineno-0-162></a>                    <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Multi-Client Mode is enabled. Kindly refer Docs for more Information.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-163 name=__codelineno-0-163 href=#__codelineno-0-163></a>                        <span class=n>pattern</span>
<a id=__codelineno-0-164 name=__codelineno-0-164 href=#__codelineno-0-164></a>                    <span class=p>)</span>
<a id=__codelineno-0-165 name=__codelineno-0-165 href=#__codelineno-0-165></a>                <span class=p>)</span>
<a id=__codelineno-0-166 name=__codelineno-0-166 href=#__codelineno-0-166></a>
<a id=__codelineno-0-167 name=__codelineno-0-167 href=#__codelineno-0-167></a>        <span class=c1># handle bidirectional mode</span>
<a id=__codelineno-0-168 name=__codelineno-0-168 href=#__codelineno-0-168></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;bidirectional_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-169 name=__codelineno-0-169 href=#__codelineno-0-169></a>            <span class=c1># check if pattern is valid</span>
<a id=__codelineno-0-170 name=__codelineno-0-170 href=#__codelineno-0-170></a>            <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-171 name=__codelineno-0-171 href=#__codelineno-0-171></a>                <span class=c1># activate Bidirectional mode if specified</span>
<a id=__codelineno-0-172 name=__codelineno-0-172 href=#__codelineno-0-172></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-173 name=__codelineno-0-173 href=#__codelineno-0-173></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-174 name=__codelineno-0-174 href=#__codelineno-0-174></a>                <span class=c1># otherwise disable it and raise error</span>
<a id=__codelineno-0-175 name=__codelineno-0-175 href=#__codelineno-0-175></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-176 name=__codelineno-0-176 href=#__codelineno-0-176></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Bidirectional data transmission is disabled!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-177 name=__codelineno-0-177 href=#__codelineno-0-177></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-178 name=__codelineno-0-178 href=#__codelineno-0-178></a>                    <span class=s2>&quot;[NetGear:ERROR] :: `</span><span class=si>{}</span><span class=s2>` pattern is not valid when Bidirectional Mode is enabled. Kindly refer Docs for more Information!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-179 name=__codelineno-0-179 href=#__codelineno-0-179></a>                        <span class=n>pattern</span>
<a id=__codelineno-0-180 name=__codelineno-0-180 href=#__codelineno-0-180></a>                    <span class=p>)</span>
<a id=__codelineno-0-181 name=__codelineno-0-181 href=#__codelineno-0-181></a>                <span class=p>)</span>
<a id=__codelineno-0-182 name=__codelineno-0-182 href=#__codelineno-0-182></a>
<a id=__codelineno-0-183 name=__codelineno-0-183 href=#__codelineno-0-183></a>        <span class=c1># handle secure mode</span>
<a id=__codelineno-0-184 name=__codelineno-0-184 href=#__codelineno-0-184></a>        <span class=k>elif</span> <span class=p>(</span>
<a id=__codelineno-0-185 name=__codelineno-0-185 href=#__codelineno-0-185></a>            <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;secure_mode&quot;</span>
<a id=__codelineno-0-186 name=__codelineno-0-186 href=#__codelineno-0-186></a>            <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span>
<a id=__codelineno-0-187 name=__codelineno-0-187 href=#__codelineno-0-187></a>            <span class=ow>and</span> <span class=p>(</span><span class=n>value</span> <span class=ow>in</span> <span class=n>valid_security_mech</span><span class=p>)</span>
<a id=__codelineno-0-188 name=__codelineno-0-188 href=#__codelineno-0-188></a>        <span class=p>):</span>
<a id=__codelineno-0-189 name=__codelineno-0-189 href=#__codelineno-0-189></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-190 name=__codelineno-0-190 href=#__codelineno-0-190></a>
<a id=__codelineno-0-191 name=__codelineno-0-191 href=#__codelineno-0-191></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;custom_cert_location&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-192 name=__codelineno-0-192 href=#__codelineno-0-192></a>            <span class=c1># verify custom auth certificates path for secure mode</span>
<a id=__codelineno-0-193 name=__codelineno-0-193 href=#__codelineno-0-193></a>            <span class=n>custom_cert_location</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-194 name=__codelineno-0-194 href=#__codelineno-0-194></a>            <span class=k>assert</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span>
<a id=__codelineno-0-195 name=__codelineno-0-195 href=#__codelineno-0-195></a>                <span class=n>custom_cert_location</span>
<a id=__codelineno-0-196 name=__codelineno-0-196 href=#__codelineno-0-196></a>            <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: `custom_cert_location` value must be the path to a valid directory!&quot;</span>
<a id=__codelineno-0-197 name=__codelineno-0-197 href=#__codelineno-0-197></a>            <span class=k>assert</span> <span class=n>check_WriteAccess</span><span class=p>(</span>
<a id=__codelineno-0-198 name=__codelineno-0-198 href=#__codelineno-0-198></a>                <span class=n>custom_cert_location</span><span class=p>,</span>
<a id=__codelineno-0-199 name=__codelineno-0-199 href=#__codelineno-0-199></a>                <span class=n>is_windows</span><span class=o>=</span><span class=kc>True</span> <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s2>&quot;nt&quot;</span> <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-200 name=__codelineno-0-200 href=#__codelineno-0-200></a>                <span class=n>logging</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>,</span>
<a id=__codelineno-0-201 name=__codelineno-0-201 href=#__codelineno-0-201></a>            <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: Permission Denied!, cannot write ZMQ authentication certificates to &#39;</span><span class=si>{}</span><span class=s2>&#39; directory!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-202 name=__codelineno-0-202 href=#__codelineno-0-202></a>                <span class=n>value</span>
<a id=__codelineno-0-203 name=__codelineno-0-203 href=#__codelineno-0-203></a>            <span class=p>)</span>
<a id=__codelineno-0-204 name=__codelineno-0-204 href=#__codelineno-0-204></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;overwrite_cert&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-205 name=__codelineno-0-205 href=#__codelineno-0-205></a>            <span class=c1># enable/disable auth certificate overwriting in secure mode</span>
<a id=__codelineno-0-206 name=__codelineno-0-206 href=#__codelineno-0-206></a>            <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-207 name=__codelineno-0-207 href=#__codelineno-0-207></a>
<a id=__codelineno-0-208 name=__codelineno-0-208 href=#__codelineno-0-208></a>        <span class=c1># handle ssh-tunneling mode</span>
<a id=__codelineno-0-209 name=__codelineno-0-209 href=#__codelineno-0-209></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_mode&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-210 name=__codelineno-0-210 href=#__codelineno-0-210></a>            <span class=c1># enable SSH Tunneling Mode</span>
<a id=__codelineno-0-211 name=__codelineno-0-211 href=#__codelineno-0-211></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
<a id=__codelineno-0-212 name=__codelineno-0-212 href=#__codelineno-0-212></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_pwd&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-213 name=__codelineno-0-213 href=#__codelineno-0-213></a>            <span class=c1># add valid SSH Tunneling password</span>
<a id=__codelineno-0-214 name=__codelineno-0-214 href=#__codelineno-0-214></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-215 name=__codelineno-0-215 href=#__codelineno-0-215></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;ssh_tunnel_keyfile&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-0-216 name=__codelineno-0-216 href=#__codelineno-0-216></a>            <span class=c1># add valid SSH Tunneling key-file</span>
<a id=__codelineno-0-217 name=__codelineno-0-217 href=#__codelineno-0-217></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=o>=</span> <span class=n>value</span> <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>else</span> <span class=kc>None</span>
<a id=__codelineno-0-218 name=__codelineno-0-218 href=#__codelineno-0-218></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-219 name=__codelineno-0-219 href=#__codelineno-0-219></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-220 name=__codelineno-0-220 href=#__codelineno-0-220></a>                    <span class=s2>&quot;Discarded invalid or non-existential SSH Tunnel Key-file at </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-221 name=__codelineno-0-221 href=#__codelineno-0-221></a>                        <span class=n>value</span>
<a id=__codelineno-0-222 name=__codelineno-0-222 href=#__codelineno-0-222></a>                    <span class=p>)</span>
<a id=__codelineno-0-223 name=__codelineno-0-223 href=#__codelineno-0-223></a>                <span class=p>)</span>
<a id=__codelineno-0-224 name=__codelineno-0-224 href=#__codelineno-0-224></a>
<a id=__codelineno-0-225 name=__codelineno-0-225 href=#__codelineno-0-225></a>        <span class=c1># handle jpeg compression</span>
<a id=__codelineno-0-226 name=__codelineno-0-226 href=#__codelineno-0-226></a>        <span class=k>elif</span> <span class=p>(</span>
<a id=__codelineno-0-227 name=__codelineno-0-227 href=#__codelineno-0-227></a>            <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression&quot;</span>
<a id=__codelineno-0-228 name=__codelineno-0-228 href=#__codelineno-0-228></a>            <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>simplejpeg</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span>
<a id=__codelineno-0-229 name=__codelineno-0-229 href=#__codelineno-0-229></a>            <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>))</span>
<a id=__codelineno-0-230 name=__codelineno-0-230 href=#__codelineno-0-230></a>        <span class=p>):</span>
<a id=__codelineno-0-231 name=__codelineno-0-231 href=#__codelineno-0-231></a>            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span> <span class=ow>and</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=ow>in</span> <span class=p>[</span>
<a id=__codelineno-0-232 name=__codelineno-0-232 href=#__codelineno-0-232></a>                <span class=s2>&quot;RGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-233 name=__codelineno-0-233 href=#__codelineno-0-233></a>                <span class=s2>&quot;BGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-234 name=__codelineno-0-234 href=#__codelineno-0-234></a>                <span class=s2>&quot;RGBX&quot;</span><span class=p>,</span>
<a id=__codelineno-0-235 name=__codelineno-0-235 href=#__codelineno-0-235></a>                <span class=s2>&quot;BGRX&quot;</span><span class=p>,</span>
<a id=__codelineno-0-236 name=__codelineno-0-236 href=#__codelineno-0-236></a>                <span class=s2>&quot;XBGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-237 name=__codelineno-0-237 href=#__codelineno-0-237></a>                <span class=s2>&quot;XRGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-238 name=__codelineno-0-238 href=#__codelineno-0-238></a>                <span class=s2>&quot;GRAY&quot;</span><span class=p>,</span>
<a id=__codelineno-0-239 name=__codelineno-0-239 href=#__codelineno-0-239></a>                <span class=s2>&quot;RGBA&quot;</span><span class=p>,</span>
<a id=__codelineno-0-240 name=__codelineno-0-240 href=#__codelineno-0-240></a>                <span class=s2>&quot;BGRA&quot;</span><span class=p>,</span>
<a id=__codelineno-0-241 name=__codelineno-0-241 href=#__codelineno-0-241></a>                <span class=s2>&quot;ABGR&quot;</span><span class=p>,</span>
<a id=__codelineno-0-242 name=__codelineno-0-242 href=#__codelineno-0-242></a>                <span class=s2>&quot;ARGB&quot;</span><span class=p>,</span>
<a id=__codelineno-0-243 name=__codelineno-0-243 href=#__codelineno-0-243></a>                <span class=s2>&quot;CMYK&quot;</span><span class=p>,</span>
<a id=__codelineno-0-244 name=__codelineno-0-244 href=#__codelineno-0-244></a>            <span class=p>]:</span>
<a id=__codelineno-0-245 name=__codelineno-0-245 href=#__codelineno-0-245></a>                <span class=c1># set encoding colorspace</span>
<a id=__codelineno-0-246 name=__codelineno-0-246 href=#__codelineno-0-246></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span>
<a id=__codelineno-0-247 name=__codelineno-0-247 href=#__codelineno-0-247></a>                <span class=c1># enable frame-compression encoding value</span>
<a id=__codelineno-0-248 name=__codelineno-0-248 href=#__codelineno-0-248></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-249 name=__codelineno-0-249 href=#__codelineno-0-249></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-250 name=__codelineno-0-250 href=#__codelineno-0-250></a>                <span class=c1># enable frame-compression encoding value</span>
<a id=__codelineno-0-251 name=__codelineno-0-251 href=#__codelineno-0-251></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-252 name=__codelineno-0-252 href=#__codelineno-0-252></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_quality&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>)):</span>
<a id=__codelineno-0-253 name=__codelineno-0-253 href=#__codelineno-0-253></a>            <span class=c1># set valid jpeg quality</span>
<a id=__codelineno-0-254 name=__codelineno-0-254 href=#__codelineno-0-254></a>            <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>10</span> <span class=ow>and</span> <span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>:</span>
<a id=__codelineno-0-255 name=__codelineno-0-255 href=#__codelineno-0-255></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
<a id=__codelineno-0-256 name=__codelineno-0-256 href=#__codelineno-0-256></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-257 name=__codelineno-0-257 href=#__codelineno-0-257></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Skipped invalid `jpeg_compression_quality` value!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-258 name=__codelineno-0-258 href=#__codelineno-0-258></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_fastdct&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-259 name=__codelineno-0-259 href=#__codelineno-0-259></a>            <span class=c1># enable jpeg fastdct</span>
<a id=__codelineno-0-260 name=__codelineno-0-260 href=#__codelineno-0-260></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-261 name=__codelineno-0-261 href=#__codelineno-0-261></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;jpeg_compression_fastupsample&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-262 name=__codelineno-0-262 href=#__codelineno-0-262></a>            <span class=c1># enable jpeg  fastupsample</span>
<a id=__codelineno-0-263 name=__codelineno-0-263 href=#__codelineno-0-263></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-264 name=__codelineno-0-264 href=#__codelineno-0-264></a>
<a id=__codelineno-0-265 name=__codelineno-0-265 href=#__codelineno-0-265></a>        <span class=c1># assign maximum retries in synchronous patterns</span>
<a id=__codelineno-0-266 name=__codelineno-0-266 href=#__codelineno-0-266></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;max_retries&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-267 name=__codelineno-0-267 href=#__codelineno-0-267></a>            <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-268 name=__codelineno-0-268 href=#__codelineno-0-268></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-269 name=__codelineno-0-269 href=#__codelineno-0-269></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-270 name=__codelineno-0-270 href=#__codelineno-0-270></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Invalid `max_retries` value skipped!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-271 name=__codelineno-0-271 href=#__codelineno-0-271></a>        <span class=c1># assign request timeout in synchronous patterns</span>
<a id=__codelineno-0-272 name=__codelineno-0-272 href=#__codelineno-0-272></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;request_timeout&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span> <span class=ow>and</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-273 name=__codelineno-0-273 href=#__codelineno-0-273></a>            <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;=</span> <span class=mi>4</span><span class=p>:</span>
<a id=__codelineno-0-274 name=__codelineno-0-274 href=#__codelineno-0-274></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>=</span> <span class=n>value</span> <span class=o>*</span> <span class=mi>1000</span>  <span class=c1># covert to milliseconds</span>
<a id=__codelineno-0-275 name=__codelineno-0-275 href=#__codelineno-0-275></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-276 name=__codelineno-0-276 href=#__codelineno-0-276></a>                <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Invalid `request_timeout` value skipped!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-277 name=__codelineno-0-277 href=#__codelineno-0-277></a>
<a id=__codelineno-0-278 name=__codelineno-0-278 href=#__codelineno-0-278></a>        <span class=c1># handle ZMQ flags</span>
<a id=__codelineno-0-279 name=__codelineno-0-279 href=#__codelineno-0-279></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;flag&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
<a id=__codelineno-0-280 name=__codelineno-0-280 href=#__codelineno-0-280></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-281 name=__codelineno-0-281 href=#__codelineno-0-281></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;copy&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-282 name=__codelineno-0-282 href=#__codelineno-0-282></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-283 name=__codelineno-0-283 href=#__codelineno-0-283></a>        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;track&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
<a id=__codelineno-0-284 name=__codelineno-0-284 href=#__codelineno-0-284></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span> <span class=o>=</span> <span class=n>value</span>
<a id=__codelineno-0-285 name=__codelineno-0-285 href=#__codelineno-0-285></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-286 name=__codelineno-0-286 href=#__codelineno-0-286></a>            <span class=k>pass</span>
<a id=__codelineno-0-287 name=__codelineno-0-287 href=#__codelineno-0-287></a>
<a id=__codelineno-0-288 name=__codelineno-0-288 href=#__codelineno-0-288></a>    <span class=c1># Handle Secure mode</span>
<a id=__codelineno-0-289 name=__codelineno-0-289 href=#__codelineno-0-289></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-290 name=__codelineno-0-290 href=#__codelineno-0-290></a>
<a id=__codelineno-0-291 name=__codelineno-0-291 href=#__codelineno-0-291></a>        <span class=c1># activate and log if overwriting is enabled</span>
<a id=__codelineno-0-292 name=__codelineno-0-292 href=#__codelineno-0-292></a>        <span class=k>if</span> <span class=n>overwrite_cert</span><span class=p>:</span>
<a id=__codelineno-0-293 name=__codelineno-0-293 href=#__codelineno-0-293></a>            <span class=k>if</span> <span class=ow>not</span> <span class=n>receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-294 name=__codelineno-0-294 href=#__codelineno-0-294></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-295 name=__codelineno-0-295 href=#__codelineno-0-295></a>                    <span class=s2>&quot;Overwriting ZMQ Authentication certificates over previous ones!&quot;</span>
<a id=__codelineno-0-296 name=__codelineno-0-296 href=#__codelineno-0-296></a>                <span class=p>)</span>
<a id=__codelineno-0-297 name=__codelineno-0-297 href=#__codelineno-0-297></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-298 name=__codelineno-0-298 href=#__codelineno-0-298></a>                <span class=n>overwrite_cert</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-0-299 name=__codelineno-0-299 href=#__codelineno-0-299></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-300 name=__codelineno-0-300 href=#__codelineno-0-300></a>                    <span class=s2>&quot;Overwriting ZMQ Authentication certificates is disabled for Client&#39;s end!&quot;</span>
<a id=__codelineno-0-301 name=__codelineno-0-301 href=#__codelineno-0-301></a>                <span class=p>)</span>
<a id=__codelineno-0-302 name=__codelineno-0-302 href=#__codelineno-0-302></a>
<a id=__codelineno-0-303 name=__codelineno-0-303 href=#__codelineno-0-303></a>        <span class=c1># Validate certificate generation paths</span>
<a id=__codelineno-0-304 name=__codelineno-0-304 href=#__codelineno-0-304></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-305 name=__codelineno-0-305 href=#__codelineno-0-305></a>            <span class=c1># check if custom certificates path is specified</span>
<a id=__codelineno-0-306 name=__codelineno-0-306 href=#__codelineno-0-306></a>            <span class=k>if</span> <span class=n>custom_cert_location</span><span class=p>:</span>
<a id=__codelineno-0-307 name=__codelineno-0-307 href=#__codelineno-0-307></a>                <span class=p>(</span>
<a id=__codelineno-0-308 name=__codelineno-0-308 href=#__codelineno-0-308></a>                    <span class=n>auth_cert_dir</span><span class=p>,</span>
<a id=__codelineno-0-309 name=__codelineno-0-309 href=#__codelineno-0-309></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-310 name=__codelineno-0-310 href=#__codelineno-0-310></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-311 name=__codelineno-0-311 href=#__codelineno-0-311></a>                <span class=p>)</span> <span class=o>=</span> <span class=n>generate_auth_certificates</span><span class=p>(</span>
<a id=__codelineno-0-312 name=__codelineno-0-312 href=#__codelineno-0-312></a>                    <span class=n>custom_cert_location</span><span class=p>,</span> <span class=n>overwrite</span><span class=o>=</span><span class=n>overwrite_cert</span><span class=p>,</span> <span class=n>logging</span><span class=o>=</span><span class=n>logging</span>
<a id=__codelineno-0-313 name=__codelineno-0-313 href=#__codelineno-0-313></a>                <span class=p>)</span>
<a id=__codelineno-0-314 name=__codelineno-0-314 href=#__codelineno-0-314></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-315 name=__codelineno-0-315 href=#__codelineno-0-315></a>                <span class=c1># otherwise auto-generate suitable path</span>
<a id=__codelineno-0-316 name=__codelineno-0-316 href=#__codelineno-0-316></a>                <span class=p>(</span>
<a id=__codelineno-0-317 name=__codelineno-0-317 href=#__codelineno-0-317></a>                    <span class=n>auth_cert_dir</span><span class=p>,</span>
<a id=__codelineno-0-318 name=__codelineno-0-318 href=#__codelineno-0-318></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-319 name=__codelineno-0-319 href=#__codelineno-0-319></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span>
<a id=__codelineno-0-320 name=__codelineno-0-320 href=#__codelineno-0-320></a>                <span class=p>)</span> <span class=o>=</span> <span class=n>generate_auth_certificates</span><span class=p>(</span>
<a id=__codelineno-0-321 name=__codelineno-0-321 href=#__codelineno-0-321></a>                    <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>expanduser</span><span class=p>(</span><span class=s2>&quot;~&quot;</span><span class=p>),</span> <span class=s2>&quot;.vidgear&quot;</span><span class=p>),</span>
<a id=__codelineno-0-322 name=__codelineno-0-322 href=#__codelineno-0-322></a>                    <span class=n>overwrite</span><span class=o>=</span><span class=n>overwrite_cert</span><span class=p>,</span>
<a id=__codelineno-0-323 name=__codelineno-0-323 href=#__codelineno-0-323></a>                    <span class=n>logging</span><span class=o>=</span><span class=n>logging</span><span class=p>,</span>
<a id=__codelineno-0-324 name=__codelineno-0-324 href=#__codelineno-0-324></a>                <span class=p>)</span>
<a id=__codelineno-0-325 name=__codelineno-0-325 href=#__codelineno-0-325></a>            <span class=c1># log it</span>
<a id=__codelineno-0-326 name=__codelineno-0-326 href=#__codelineno-0-326></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-327 name=__codelineno-0-327 href=#__codelineno-0-327></a>                <span class=s2>&quot;`</span><span class=si>{}</span><span class=s2>` is the default location for storing ZMQ authentication certificates/keys.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-328 name=__codelineno-0-328 href=#__codelineno-0-328></a>                    <span class=n>auth_cert_dir</span>
<a id=__codelineno-0-329 name=__codelineno-0-329 href=#__codelineno-0-329></a>                <span class=p>)</span>
<a id=__codelineno-0-330 name=__codelineno-0-330 href=#__codelineno-0-330></a>            <span class=p>)</span>
<a id=__codelineno-0-331 name=__codelineno-0-331 href=#__codelineno-0-331></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-332 name=__codelineno-0-332 href=#__codelineno-0-332></a>            <span class=c1># catch if any error occurred and disable Secure mode</span>
<a id=__codelineno-0-333 name=__codelineno-0-333 href=#__codelineno-0-333></a>            <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-334 name=__codelineno-0-334 href=#__codelineno-0-334></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>=</span> <span class=mi>0</span>
<a id=__codelineno-0-335 name=__codelineno-0-335 href=#__codelineno-0-335></a>            <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-336 name=__codelineno-0-336 href=#__codelineno-0-336></a>                <span class=s2>&quot;ZMQ Security Mechanism is disabled for this connection due to errors!&quot;</span>
<a id=__codelineno-0-337 name=__codelineno-0-337 href=#__codelineno-0-337></a>            <span class=p>)</span>
<a id=__codelineno-0-338 name=__codelineno-0-338 href=#__codelineno-0-338></a>
<a id=__codelineno-0-339 name=__codelineno-0-339 href=#__codelineno-0-339></a>    <span class=c1># Handle ssh tunneling if enabled</span>
<a id=__codelineno-0-340 name=__codelineno-0-340 href=#__codelineno-0-340></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-341 name=__codelineno-0-341 href=#__codelineno-0-341></a>        <span class=c1># SSH Tunnel Mode only available for server mode</span>
<a id=__codelineno-0-342 name=__codelineno-0-342 href=#__codelineno-0-342></a>        <span class=k>if</span> <span class=n>receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-343 name=__codelineno-0-343 href=#__codelineno-0-343></a>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;SSH Tunneling cannot be enabled for Client-end!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-344 name=__codelineno-0-344 href=#__codelineno-0-344></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-345 name=__codelineno-0-345 href=#__codelineno-0-345></a>            <span class=c1># check if SSH tunneling possible</span>
<a id=__codelineno-0-346 name=__codelineno-0-346 href=#__codelineno-0-346></a>            <span class=n>ssh_address</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span>
<a id=__codelineno-0-347 name=__codelineno-0-347 href=#__codelineno-0-347></a>            <span class=n>ssh_address</span><span class=p>,</span> <span class=n>ssh_port</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-348 name=__codelineno-0-348 href=#__codelineno-0-348></a>                <span class=n>ssh_address</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;:&quot;</span><span class=p>)</span>
<a id=__codelineno-0-349 name=__codelineno-0-349 href=#__codelineno-0-349></a>                <span class=k>if</span> <span class=s2>&quot;:&quot;</span> <span class=ow>in</span> <span class=n>ssh_address</span>
<a id=__codelineno-0-350 name=__codelineno-0-350 href=#__codelineno-0-350></a>                <span class=k>else</span> <span class=p>[</span><span class=n>ssh_address</span><span class=p>,</span> <span class=s2>&quot;22&quot;</span><span class=p>]</span>
<a id=__codelineno-0-351 name=__codelineno-0-351 href=#__codelineno-0-351></a>            <span class=p>)</span>  <span class=c1># default to port 22</span>
<a id=__codelineno-0-352 name=__codelineno-0-352 href=#__codelineno-0-352></a>            <span class=k>if</span> <span class=s2>&quot;47&quot;</span> <span class=ow>in</span> <span class=n>ssh_port</span><span class=p>:</span>
<a id=__codelineno-0-353 name=__codelineno-0-353 href=#__codelineno-0-353></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
<a id=__codelineno-0-354 name=__codelineno-0-354 href=#__codelineno-0-354></a>                    <span class=s2>&quot;:47&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span>
<a id=__codelineno-0-355 name=__codelineno-0-355 href=#__codelineno-0-355></a>                <span class=p>)</span>  <span class=c1># port-47 is reserved for testing</span>
<a id=__codelineno-0-356 name=__codelineno-0-356 href=#__codelineno-0-356></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-357 name=__codelineno-0-357 href=#__codelineno-0-357></a>                <span class=c1># extract ip for validation</span>
<a id=__codelineno-0-358 name=__codelineno-0-358 href=#__codelineno-0-358></a>                <span class=n>ssh_user</span><span class=p>,</span> <span class=n>ssh_ip</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-359 name=__codelineno-0-359 href=#__codelineno-0-359></a>                    <span class=n>ssh_address</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;@&quot;</span><span class=p>)</span>
<a id=__codelineno-0-360 name=__codelineno-0-360 href=#__codelineno-0-360></a>                    <span class=k>if</span> <span class=s2>&quot;@&quot;</span> <span class=ow>in</span> <span class=n>ssh_address</span>
<a id=__codelineno-0-361 name=__codelineno-0-361 href=#__codelineno-0-361></a>                    <span class=k>else</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>ssh_address</span><span class=p>]</span>
<a id=__codelineno-0-362 name=__codelineno-0-362 href=#__codelineno-0-362></a>                <span class=p>)</span>
<a id=__codelineno-0-363 name=__codelineno-0-363 href=#__codelineno-0-363></a>                <span class=c1># validate ip specified port</span>
<a id=__codelineno-0-364 name=__codelineno-0-364 href=#__codelineno-0-364></a>                <span class=k>assert</span> <span class=n>check_open_port</span><span class=p>(</span>
<a id=__codelineno-0-365 name=__codelineno-0-365 href=#__codelineno-0-365></a>                    <span class=n>ssh_ip</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>ssh_port</span><span class=p>)</span>
<a id=__codelineno-0-366 name=__codelineno-0-366 href=#__codelineno-0-366></a>                <span class=p>),</span> <span class=s2>&quot;[NetGear:ERROR] :: Host `</span><span class=si>{}</span><span class=s2>` is not available for SSH Tunneling at port-</span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-367 name=__codelineno-0-367 href=#__codelineno-0-367></a>                    <span class=n>ssh_address</span><span class=p>,</span> <span class=n>ssh_port</span>
<a id=__codelineno-0-368 name=__codelineno-0-368 href=#__codelineno-0-368></a>                <span class=p>)</span>
<a id=__codelineno-0-369 name=__codelineno-0-369 href=#__codelineno-0-369></a>
<a id=__codelineno-0-370 name=__codelineno-0-370 href=#__codelineno-0-370></a>    <span class=c1># Handle multiple exclusive modes if enabled</span>
<a id=__codelineno-0-371 name=__codelineno-0-371 href=#__codelineno-0-371></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-372 name=__codelineno-0-372 href=#__codelineno-0-372></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-373 name=__codelineno-0-373 href=#__codelineno-0-373></a>            <span class=s2>&quot;[NetGear:ERROR] :: Multi-Client and Multi-Server Mode cannot be enabled simultaneously!&quot;</span>
<a id=__codelineno-0-374 name=__codelineno-0-374 href=#__codelineno-0-374></a>        <span class=p>)</span>
<a id=__codelineno-0-375 name=__codelineno-0-375 href=#__codelineno-0-375></a>    <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-376 name=__codelineno-0-376 href=#__codelineno-0-376></a>        <span class=c1># check if Bidirectional Mode also enabled</span>
<a id=__codelineno-0-377 name=__codelineno-0-377 href=#__codelineno-0-377></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-378 name=__codelineno-0-378 href=#__codelineno-0-378></a>            <span class=c1># log it</span>
<a id=__codelineno-0-379 name=__codelineno-0-379 href=#__codelineno-0-379></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-380 name=__codelineno-0-380 href=#__codelineno-0-380></a>                <span class=s2>&quot;Bidirectional Data Transmission is also enabled for this connection!&quot;</span>
<a id=__codelineno-0-381 name=__codelineno-0-381 href=#__codelineno-0-381></a>            <span class=p>)</span>
<a id=__codelineno-0-382 name=__codelineno-0-382 href=#__codelineno-0-382></a>        <span class=c1># check if SSH Tunneling Mode also enabled</span>
<a id=__codelineno-0-383 name=__codelineno-0-383 href=#__codelineno-0-383></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-384 name=__codelineno-0-384 href=#__codelineno-0-384></a>            <span class=c1># raise error</span>
<a id=__codelineno-0-385 name=__codelineno-0-385 href=#__codelineno-0-385></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-386 name=__codelineno-0-386 href=#__codelineno-0-386></a>                <span class=s2>&quot;[NetGear:ERROR] :: SSH Tunneling and </span><span class=si>{}</span><span class=s2> Mode cannot be enabled simultaneously. Kindly refer docs!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-387 name=__codelineno-0-387 href=#__codelineno-0-387></a>                    <span class=s2>&quot;Multi-Server&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span>
<a id=__codelineno-0-388 name=__codelineno-0-388 href=#__codelineno-0-388></a>                <span class=p>)</span>
<a id=__codelineno-0-389 name=__codelineno-0-389 href=#__codelineno-0-389></a>            <span class=p>)</span>
<a id=__codelineno-0-390 name=__codelineno-0-390 href=#__codelineno-0-390></a>    <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-391 name=__codelineno-0-391 href=#__codelineno-0-391></a>        <span class=c1># log Bidirectional mode activation</span>
<a id=__codelineno-0-392 name=__codelineno-0-392 href=#__codelineno-0-392></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-393 name=__codelineno-0-393 href=#__codelineno-0-393></a>            <span class=s2>&quot;Bidirectional Data Transmission is enabled for this connection!&quot;</span>
<a id=__codelineno-0-394 name=__codelineno-0-394 href=#__codelineno-0-394></a>        <span class=p>)</span>
<a id=__codelineno-0-395 name=__codelineno-0-395 href=#__codelineno-0-395></a>    <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-396 name=__codelineno-0-396 href=#__codelineno-0-396></a>        <span class=c1># log Bidirectional mode activation</span>
<a id=__codelineno-0-397 name=__codelineno-0-397 href=#__codelineno-0-397></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-398 name=__codelineno-0-398 href=#__codelineno-0-398></a>            <span class=s2>&quot;SSH Tunneling is enabled for host:`</span><span class=si>{}</span><span class=s2>` with `</span><span class=si>{}</span><span class=s2>` back-end.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-399 name=__codelineno-0-399 href=#__codelineno-0-399></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-400 name=__codelineno-0-400 href=#__codelineno-0-400></a>                <span class=s2>&quot;paramiko&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=k>else</span> <span class=s2>&quot;pexpect&quot;</span><span class=p>,</span>
<a id=__codelineno-0-401 name=__codelineno-0-401 href=#__codelineno-0-401></a>            <span class=p>)</span>
<a id=__codelineno-0-402 name=__codelineno-0-402 href=#__codelineno-0-402></a>        <span class=p>)</span>
<a id=__codelineno-0-403 name=__codelineno-0-403 href=#__codelineno-0-403></a>
<a id=__codelineno-0-404 name=__codelineno-0-404 href=#__codelineno-0-404></a>    <span class=c1># define messaging context instance</span>
<a id=__codelineno-0-405 name=__codelineno-0-405 href=#__codelineno-0-405></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span> <span class=o>=</span> <span class=n>zmq</span><span class=o>.</span><span class=n>Context</span><span class=o>.</span><span class=n>instance</span><span class=p>()</span>
<a id=__codelineno-0-406 name=__codelineno-0-406 href=#__codelineno-0-406></a>
<a id=__codelineno-0-407 name=__codelineno-0-407 href=#__codelineno-0-407></a>    <span class=c1># initialize and assign receive mode to global variable</span>
<a id=__codelineno-0-408 name=__codelineno-0-408 href=#__codelineno-0-408></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span> <span class=o>=</span> <span class=n>receive_mode</span>
<a id=__codelineno-0-409 name=__codelineno-0-409 href=#__codelineno-0-409></a>
<a id=__codelineno-0-410 name=__codelineno-0-410 href=#__codelineno-0-410></a>    <span class=c1># check whether `receive_mode` is enabled</span>
<a id=__codelineno-0-411 name=__codelineno-0-411 href=#__codelineno-0-411></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-412 name=__codelineno-0-412 href=#__codelineno-0-412></a>
<a id=__codelineno-0-413 name=__codelineno-0-413 href=#__codelineno-0-413></a>        <span class=c1># define connection address</span>
<a id=__codelineno-0-414 name=__codelineno-0-414 href=#__codelineno-0-414></a>        <span class=k>if</span> <span class=n>address</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-415 name=__codelineno-0-415 href=#__codelineno-0-415></a>            <span class=n>address</span> <span class=o>=</span> <span class=s2>&quot;*&quot;</span>  <span class=c1># define address</span>
<a id=__codelineno-0-416 name=__codelineno-0-416 href=#__codelineno-0-416></a>
<a id=__codelineno-0-417 name=__codelineno-0-417 href=#__codelineno-0-417></a>        <span class=c1># check if multiserver_mode is enabled</span>
<a id=__codelineno-0-418 name=__codelineno-0-418 href=#__codelineno-0-418></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-419 name=__codelineno-0-419 href=#__codelineno-0-419></a>            <span class=c1># check if unique server port address list/tuple is assigned or not in multiserver_mode</span>
<a id=__codelineno-0-420 name=__codelineno-0-420 href=#__codelineno-0-420></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>port</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>)):</span>
<a id=__codelineno-0-421 name=__codelineno-0-421 href=#__codelineno-0-421></a>                <span class=c1># raise error if not</span>
<a id=__codelineno-0-422 name=__codelineno-0-422 href=#__codelineno-0-422></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-423 name=__codelineno-0-423 href=#__codelineno-0-423></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Incorrect port value! Kindly provide a list/tuple of Server ports while Multi-Server mode is enabled. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-424 name=__codelineno-0-424 href=#__codelineno-0-424></a>                <span class=p>)</span>
<a id=__codelineno-0-425 name=__codelineno-0-425 href=#__codelineno-0-425></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-426 name=__codelineno-0-426 href=#__codelineno-0-426></a>                <span class=c1># otherwise log it</span>
<a id=__codelineno-0-427 name=__codelineno-0-427 href=#__codelineno-0-427></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-428 name=__codelineno-0-428 href=#__codelineno-0-428></a>                    <span class=s2>&quot;Enabling Multi-Server Mode at PORTS: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-429 name=__codelineno-0-429 href=#__codelineno-0-429></a>                <span class=p>)</span>
<a id=__codelineno-0-430 name=__codelineno-0-430 href=#__codelineno-0-430></a>            <span class=c1># create port address buffer for keeping track of connected client&#39;s port(s)</span>
<a id=__codelineno-0-431 name=__codelineno-0-431 href=#__codelineno-0-431></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-432 name=__codelineno-0-432 href=#__codelineno-0-432></a>        <span class=c1># check if multiclient_mode is enabled</span>
<a id=__codelineno-0-433 name=__codelineno-0-433 href=#__codelineno-0-433></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-434 name=__codelineno-0-434 href=#__codelineno-0-434></a>            <span class=c1># check if unique server port address is assigned or not in multiclient_mode</span>
<a id=__codelineno-0-435 name=__codelineno-0-435 href=#__codelineno-0-435></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-436 name=__codelineno-0-436 href=#__codelineno-0-436></a>                <span class=c1># raise error if not</span>
<a id=__codelineno-0-437 name=__codelineno-0-437 href=#__codelineno-0-437></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-438 name=__codelineno-0-438 href=#__codelineno-0-438></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Kindly provide a unique &amp; valid port value at Client-end. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-439 name=__codelineno-0-439 href=#__codelineno-0-439></a>                <span class=p>)</span>
<a id=__codelineno-0-440 name=__codelineno-0-440 href=#__codelineno-0-440></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-441 name=__codelineno-0-441 href=#__codelineno-0-441></a>                <span class=c1># otherwise log it</span>
<a id=__codelineno-0-442 name=__codelineno-0-442 href=#__codelineno-0-442></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-443 name=__codelineno-0-443 href=#__codelineno-0-443></a>                    <span class=s2>&quot;Enabling Multi-Client Mode at PORT: </span><span class=si>{}</span><span class=s2> on this device!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-444 name=__codelineno-0-444 href=#__codelineno-0-444></a>                        <span class=n>port</span>
<a id=__codelineno-0-445 name=__codelineno-0-445 href=#__codelineno-0-445></a>                    <span class=p>)</span>
<a id=__codelineno-0-446 name=__codelineno-0-446 href=#__codelineno-0-446></a>                <span class=p>)</span>
<a id=__codelineno-0-447 name=__codelineno-0-447 href=#__codelineno-0-447></a>            <span class=c1># assign value to global variable</span>
<a id=__codelineno-0-448 name=__codelineno-0-448 href=#__codelineno-0-448></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__port</span> <span class=o>=</span> <span class=n>port</span>
<a id=__codelineno-0-449 name=__codelineno-0-449 href=#__codelineno-0-449></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-450 name=__codelineno-0-450 href=#__codelineno-0-450></a>            <span class=c1># otherwise assign local port address if None</span>
<a id=__codelineno-0-451 name=__codelineno-0-451 href=#__codelineno-0-451></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-452 name=__codelineno-0-452 href=#__codelineno-0-452></a>                <span class=n>port</span> <span class=o>=</span> <span class=s2>&quot;5555&quot;</span>
<a id=__codelineno-0-453 name=__codelineno-0-453 href=#__codelineno-0-453></a>
<a id=__codelineno-0-454 name=__codelineno-0-454 href=#__codelineno-0-454></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-455 name=__codelineno-0-455 href=#__codelineno-0-455></a>            <span class=c1># activate secure_mode threaded authenticator</span>
<a id=__codelineno-0-456 name=__codelineno-0-456 href=#__codelineno-0-456></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-457 name=__codelineno-0-457 href=#__codelineno-0-457></a>                <span class=c1># start an authenticator for this context</span>
<a id=__codelineno-0-458 name=__codelineno-0-458 href=#__codelineno-0-458></a>                <span class=n>z_auth</span> <span class=o>=</span> <span class=n>ThreadAuthenticator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=p>)</span>
<a id=__codelineno-0-459 name=__codelineno-0-459 href=#__codelineno-0-459></a>                <span class=n>z_auth</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-460 name=__codelineno-0-460 href=#__codelineno-0-460></a>                <span class=n>z_auth</span><span class=o>.</span><span class=n>allow</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>))</span>  <span class=c1># allow current address</span>
<a id=__codelineno-0-461 name=__codelineno-0-461 href=#__codelineno-0-461></a>
<a id=__codelineno-0-462 name=__codelineno-0-462 href=#__codelineno-0-462></a>                <span class=c1># check if `IronHouse` is activated</span>
<a id=__codelineno-0-463 name=__codelineno-0-463 href=#__codelineno-0-463></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-464 name=__codelineno-0-464 href=#__codelineno-0-464></a>                    <span class=c1># tell authenticator to use the certificate from given valid dir</span>
<a id=__codelineno-0-465 name=__codelineno-0-465 href=#__codelineno-0-465></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-466 name=__codelineno-0-466 href=#__codelineno-0-466></a>                        <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span>
<a id=__codelineno-0-467 name=__codelineno-0-467 href=#__codelineno-0-467></a>                    <span class=p>)</span>
<a id=__codelineno-0-468 name=__codelineno-0-468 href=#__codelineno-0-468></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-469 name=__codelineno-0-469 href=#__codelineno-0-469></a>                    <span class=c1># otherwise tell the authenticator how to handle the CURVE requests, if `StoneHouse` is activated</span>
<a id=__codelineno-0-470 name=__codelineno-0-470 href=#__codelineno-0-470></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-471 name=__codelineno-0-471 href=#__codelineno-0-471></a>                        <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=n>auth</span><span class=o>.</span><span class=n>CURVE_ALLOW_ANY</span>
<a id=__codelineno-0-472 name=__codelineno-0-472 href=#__codelineno-0-472></a>                    <span class=p>)</span>
<a id=__codelineno-0-473 name=__codelineno-0-473 href=#__codelineno-0-473></a>
<a id=__codelineno-0-474 name=__codelineno-0-474 href=#__codelineno-0-474></a>            <span class=c1># define thread-safe messaging socket</span>
<a id=__codelineno-0-475 name=__codelineno-0-475 href=#__codelineno-0-475></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>msg_pattern</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-0-476 name=__codelineno-0-476 href=#__codelineno-0-476></a>
<a id=__codelineno-0-477 name=__codelineno-0-477 href=#__codelineno-0-477></a>            <span class=c1># define pub-sub flag</span>
<a id=__codelineno-0-478 name=__codelineno-0-478 href=#__codelineno-0-478></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-479 name=__codelineno-0-479 href=#__codelineno-0-479></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>set_hwm</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-480 name=__codelineno-0-480 href=#__codelineno-0-480></a>
<a id=__codelineno-0-481 name=__codelineno-0-481 href=#__codelineno-0-481></a>            <span class=c1># enable specified secure mode for the socket</span>
<a id=__codelineno-0-482 name=__codelineno-0-482 href=#__codelineno-0-482></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-483 name=__codelineno-0-483 href=#__codelineno-0-483></a>                <span class=c1># load server key</span>
<a id=__codelineno-0-484 name=__codelineno-0-484 href=#__codelineno-0-484></a>                <span class=n>server_secret_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-485 name=__codelineno-0-485 href=#__codelineno-0-485></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span> <span class=s2>&quot;server.key_secret&quot;</span>
<a id=__codelineno-0-486 name=__codelineno-0-486 href=#__codelineno-0-486></a>                <span class=p>)</span>
<a id=__codelineno-0-487 name=__codelineno-0-487 href=#__codelineno-0-487></a>                <span class=n>server_public</span><span class=p>,</span> <span class=n>server_secret</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span>
<a id=__codelineno-0-488 name=__codelineno-0-488 href=#__codelineno-0-488></a>                    <span class=n>server_secret_file</span>
<a id=__codelineno-0-489 name=__codelineno-0-489 href=#__codelineno-0-489></a>                <span class=p>)</span>
<a id=__codelineno-0-490 name=__codelineno-0-490 href=#__codelineno-0-490></a>                <span class=c1># load  all CURVE keys</span>
<a id=__codelineno-0-491 name=__codelineno-0-491 href=#__codelineno-0-491></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_secretkey</span> <span class=o>=</span> <span class=n>server_secret</span>
<a id=__codelineno-0-492 name=__codelineno-0-492 href=#__codelineno-0-492></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_publickey</span> <span class=o>=</span> <span class=n>server_public</span>
<a id=__codelineno-0-493 name=__codelineno-0-493 href=#__codelineno-0-493></a>                <span class=c1># enable CURVE connection for this socket</span>
<a id=__codelineno-0-494 name=__codelineno-0-494 href=#__codelineno-0-494></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_server</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-495 name=__codelineno-0-495 href=#__codelineno-0-495></a>
<a id=__codelineno-0-496 name=__codelineno-0-496 href=#__codelineno-0-496></a>            <span class=c1># define exclusive socket options for patterns</span>
<a id=__codelineno-0-497 name=__codelineno-0-497 href=#__codelineno-0-497></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-498 name=__codelineno-0-498 href=#__codelineno-0-498></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt_string</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>SUBSCRIBE</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>
<a id=__codelineno-0-499 name=__codelineno-0-499 href=#__codelineno-0-499></a>
<a id=__codelineno-0-500 name=__codelineno-0-500 href=#__codelineno-0-500></a>            <span class=c1># if multiserver_mode is enabled, then assign port addresses to zmq socket</span>
<a id=__codelineno-0-501 name=__codelineno-0-501 href=#__codelineno-0-501></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-502 name=__codelineno-0-502 href=#__codelineno-0-502></a>                <span class=c1># bind socket to given server protocol, address and ports</span>
<a id=__codelineno-0-503 name=__codelineno-0-503 href=#__codelineno-0-503></a>                <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-504 name=__codelineno-0-504 href=#__codelineno-0-504></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span>
<a id=__codelineno-0-505 name=__codelineno-0-505 href=#__codelineno-0-505></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-506 name=__codelineno-0-506 href=#__codelineno-0-506></a>                    <span class=p>)</span>
<a id=__codelineno-0-507 name=__codelineno-0-507 href=#__codelineno-0-507></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-508 name=__codelineno-0-508 href=#__codelineno-0-508></a>                <span class=c1># bind socket to given protocol, address and port normally</span>
<a id=__codelineno-0-509 name=__codelineno-0-509 href=#__codelineno-0-509></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span>
<a id=__codelineno-0-510 name=__codelineno-0-510 href=#__codelineno-0-510></a>                    <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-511 name=__codelineno-0-511 href=#__codelineno-0-511></a>                <span class=p>)</span>
<a id=__codelineno-0-512 name=__codelineno-0-512 href=#__codelineno-0-512></a>
<a id=__codelineno-0-513 name=__codelineno-0-513 href=#__codelineno-0-513></a>            <span class=c1># additional settings</span>
<a id=__codelineno-0-514 name=__codelineno-0-514 href=#__codelineno-0-514></a>            <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-515 name=__codelineno-0-515 href=#__codelineno-0-515></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-516 name=__codelineno-0-516 href=#__codelineno-0-516></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-517 name=__codelineno-0-517 href=#__codelineno-0-517></a>                    <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-518 name=__codelineno-0-518 href=#__codelineno-0-518></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<a id=__codelineno-0-519 name=__codelineno-0-519 href=#__codelineno-0-519></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-520 name=__codelineno-0-520 href=#__codelineno-0-520></a>                        <span class=p>)</span>
<a id=__codelineno-0-521 name=__codelineno-0-521 href=#__codelineno-0-521></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-522 name=__codelineno-0-522 href=#__codelineno-0-522></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-523 name=__codelineno-0-523 href=#__codelineno-0-523></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-524 name=__codelineno-0-524 href=#__codelineno-0-524></a>                    <span class=p>)</span>
<a id=__codelineno-0-525 name=__codelineno-0-525 href=#__codelineno-0-525></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span> <span class=o>=</span> <span class=n>msg_pattern</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-0-526 name=__codelineno-0-526 href=#__codelineno-0-526></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-527 name=__codelineno-0-527 href=#__codelineno-0-527></a>
<a id=__codelineno-0-528 name=__codelineno-0-528 href=#__codelineno-0-528></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-529 name=__codelineno-0-529 href=#__codelineno-0-529></a>                    <span class=s2>&quot;Reliable transmission is enabled for this pattern with max-retries: </span><span class=si>{}</span><span class=s2> and timeout: </span><span class=si>{}</span><span class=s2> secs.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-530 name=__codelineno-0-530 href=#__codelineno-0-530></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>/</span> <span class=mi>1000</span>
<a id=__codelineno-0-531 name=__codelineno-0-531 href=#__codelineno-0-531></a>                    <span class=p>)</span>
<a id=__codelineno-0-532 name=__codelineno-0-532 href=#__codelineno-0-532></a>                <span class=p>)</span>
<a id=__codelineno-0-533 name=__codelineno-0-533 href=#__codelineno-0-533></a>
<a id=__codelineno-0-534 name=__codelineno-0-534 href=#__codelineno-0-534></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-535 name=__codelineno-0-535 href=#__codelineno-0-535></a>            <span class=c1># otherwise log and raise error</span>
<a id=__codelineno-0-536 name=__codelineno-0-536 href=#__codelineno-0-536></a>            <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-537 name=__codelineno-0-537 href=#__codelineno-0-537></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-538 name=__codelineno-0-538 href=#__codelineno-0-538></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-539 name=__codelineno-0-539 href=#__codelineno-0-539></a>                    <span class=s2>&quot;Failed to activate Secure Mode: `</span><span class=si>{}</span><span class=s2>` for this connection!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-540 name=__codelineno-0-540 href=#__codelineno-0-540></a>                        <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-541 name=__codelineno-0-541 href=#__codelineno-0-541></a>                    <span class=p>)</span>
<a id=__codelineno-0-542 name=__codelineno-0-542 href=#__codelineno-0-542></a>                <span class=p>)</span>
<a id=__codelineno-0-543 name=__codelineno-0-543 href=#__codelineno-0-543></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-544 name=__codelineno-0-544 href=#__codelineno-0-544></a>                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-545 name=__codelineno-0-545 href=#__codelineno-0-545></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Receive Mode failed to activate </span><span class=si>{}</span><span class=s2> Mode at address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-546 name=__codelineno-0-546 href=#__codelineno-0-546></a>                        <span class=s2>&quot;Multi-Server&quot;</span>
<a id=__codelineno-0-547 name=__codelineno-0-547 href=#__codelineno-0-547></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span>
<a id=__codelineno-0-548 name=__codelineno-0-548 href=#__codelineno-0-548></a>                        <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span><span class=p>,</span>
<a id=__codelineno-0-549 name=__codelineno-0-549 href=#__codelineno-0-549></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span>
<a id=__codelineno-0-550 name=__codelineno-0-550 href=#__codelineno-0-550></a>                        <span class=n>pattern</span><span class=p>,</span>
<a id=__codelineno-0-551 name=__codelineno-0-551 href=#__codelineno-0-551></a>                    <span class=p>)</span>
<a id=__codelineno-0-552 name=__codelineno-0-552 href=#__codelineno-0-552></a>                <span class=p>)</span>
<a id=__codelineno-0-553 name=__codelineno-0-553 href=#__codelineno-0-553></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-554 name=__codelineno-0-554 href=#__codelineno-0-554></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-555 name=__codelineno-0-555 href=#__codelineno-0-555></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-556 name=__codelineno-0-556 href=#__codelineno-0-556></a>                        <span class=s2>&quot;Failed to activate Bidirectional Mode for this connection!&quot;</span>
<a id=__codelineno-0-557 name=__codelineno-0-557 href=#__codelineno-0-557></a>                    <span class=p>)</span>
<a id=__codelineno-0-558 name=__codelineno-0-558 href=#__codelineno-0-558></a>                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-559 name=__codelineno-0-559 href=#__codelineno-0-559></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Receive Mode failed to bind address: </span><span class=si>{}</span><span class=s2> and pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-560 name=__codelineno-0-560 href=#__codelineno-0-560></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-561 name=__codelineno-0-561 href=#__codelineno-0-561></a>                    <span class=p>)</span>
<a id=__codelineno-0-562 name=__codelineno-0-562 href=#__codelineno-0-562></a>                <span class=p>)</span>
<a id=__codelineno-0-563 name=__codelineno-0-563 href=#__codelineno-0-563></a>
<a id=__codelineno-0-564 name=__codelineno-0-564 href=#__codelineno-0-564></a>        <span class=c1># Handle threaded queue mode</span>
<a id=__codelineno-0-565 name=__codelineno-0-565 href=#__codelineno-0-565></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-566 name=__codelineno-0-566 href=#__codelineno-0-566></a>            <span class=s2>&quot;Threaded Queue Mode is enabled by default for this connection.&quot;</span>
<a id=__codelineno-0-567 name=__codelineno-0-567 href=#__codelineno-0-567></a>        <span class=p>)</span>
<a id=__codelineno-0-568 name=__codelineno-0-568 href=#__codelineno-0-568></a>
<a id=__codelineno-0-569 name=__codelineno-0-569 href=#__codelineno-0-569></a>        <span class=c1># define deque and assign it to global var</span>
<a id=__codelineno-0-570 name=__codelineno-0-570 href=#__codelineno-0-570></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span> <span class=o>=</span> <span class=n>deque</span><span class=p>(</span><span class=n>maxlen</span><span class=o>=</span><span class=mi>96</span><span class=p>)</span>  <span class=c1># max len 96 to check overflow</span>
<a id=__codelineno-0-571 name=__codelineno-0-571 href=#__codelineno-0-571></a>
<a id=__codelineno-0-572 name=__codelineno-0-572 href=#__codelineno-0-572></a>        <span class=c1># initialize and start threaded recv_handler</span>
<a id=__codelineno-0-573 name=__codelineno-0-573 href=#__codelineno-0-573></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__recv_handler</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;NetGear&quot;</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>())</span>
<a id=__codelineno-0-574 name=__codelineno-0-574 href=#__codelineno-0-574></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-575 name=__codelineno-0-575 href=#__codelineno-0-575></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-576 name=__codelineno-0-576 href=#__codelineno-0-576></a>
<a id=__codelineno-0-577 name=__codelineno-0-577 href=#__codelineno-0-577></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>:</span>
<a id=__codelineno-0-578 name=__codelineno-0-578 href=#__codelineno-0-578></a>            <span class=c1># finally log progress</span>
<a id=__codelineno-0-579 name=__codelineno-0-579 href=#__codelineno-0-579></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-580 name=__codelineno-0-580 href=#__codelineno-0-580></a>                <span class=s2>&quot;Successfully Binded to address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-581 name=__codelineno-0-581 href=#__codelineno-0-581></a>                    <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-582 name=__codelineno-0-582 href=#__codelineno-0-582></a>                <span class=p>)</span>
<a id=__codelineno-0-583 name=__codelineno-0-583 href=#__codelineno-0-583></a>            <span class=p>)</span>
<a id=__codelineno-0-584 name=__codelineno-0-584 href=#__codelineno-0-584></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-585 name=__codelineno-0-585 href=#__codelineno-0-585></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-586 name=__codelineno-0-586 href=#__codelineno-0-586></a>                    <span class=s2>&quot;JPEG Frame-Compression is activated for this connection with Colorspace:`</span><span class=si>{}</span><span class=s2>`, Quality:`</span><span class=si>{}</span><span class=s2>`%, Fastdct:`</span><span class=si>{}</span><span class=s2>`, and Fastupsample:`</span><span class=si>{}</span><span class=s2>`.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-587 name=__codelineno-0-587 href=#__codelineno-0-587></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-588 name=__codelineno-0-588 href=#__codelineno-0-588></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-589 name=__codelineno-0-589 href=#__codelineno-0-589></a>                        <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-590 name=__codelineno-0-590 href=#__codelineno-0-590></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-591 name=__codelineno-0-591 href=#__codelineno-0-591></a>                        <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-592 name=__codelineno-0-592 href=#__codelineno-0-592></a>                        <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-593 name=__codelineno-0-593 href=#__codelineno-0-593></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-594 name=__codelineno-0-594 href=#__codelineno-0-594></a>                        <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-595 name=__codelineno-0-595 href=#__codelineno-0-595></a>                    <span class=p>)</span>
<a id=__codelineno-0-596 name=__codelineno-0-596 href=#__codelineno-0-596></a>                <span class=p>)</span>
<a id=__codelineno-0-597 name=__codelineno-0-597 href=#__codelineno-0-597></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-598 name=__codelineno-0-598 href=#__codelineno-0-598></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-599 name=__codelineno-0-599 href=#__codelineno-0-599></a>                    <span class=s2>&quot;Successfully enabled ZMQ Security Mechanism: `</span><span class=si>{}</span><span class=s2>` for this connection.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-600 name=__codelineno-0-600 href=#__codelineno-0-600></a>                        <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-601 name=__codelineno-0-601 href=#__codelineno-0-601></a>                    <span class=p>)</span>
<a id=__codelineno-0-602 name=__codelineno-0-602 href=#__codelineno-0-602></a>                <span class=p>)</span>
<a id=__codelineno-0-603 name=__codelineno-0-603 href=#__codelineno-0-603></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Multi-threaded Receive Mode is successfully enabled.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-604 name=__codelineno-0-604 href=#__codelineno-0-604></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Unique System ID is </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__id</span><span class=p>))</span>
<a id=__codelineno-0-605 name=__codelineno-0-605 href=#__codelineno-0-605></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Receive Mode is now activated.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-606 name=__codelineno-0-606 href=#__codelineno-0-606></a>
<a id=__codelineno-0-607 name=__codelineno-0-607 href=#__codelineno-0-607></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-608 name=__codelineno-0-608 href=#__codelineno-0-608></a>
<a id=__codelineno-0-609 name=__codelineno-0-609 href=#__codelineno-0-609></a>        <span class=c1># otherwise default to `Send Mode`</span>
<a id=__codelineno-0-610 name=__codelineno-0-610 href=#__codelineno-0-610></a>
<a id=__codelineno-0-611 name=__codelineno-0-611 href=#__codelineno-0-611></a>        <span class=c1># define connection address</span>
<a id=__codelineno-0-612 name=__codelineno-0-612 href=#__codelineno-0-612></a>        <span class=k>if</span> <span class=n>address</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-613 name=__codelineno-0-613 href=#__codelineno-0-613></a>            <span class=n>address</span> <span class=o>=</span> <span class=s2>&quot;localhost&quot;</span>
<a id=__codelineno-0-614 name=__codelineno-0-614 href=#__codelineno-0-614></a>
<a id=__codelineno-0-615 name=__codelineno-0-615 href=#__codelineno-0-615></a>        <span class=c1># check if multiserver_mode is enabled</span>
<a id=__codelineno-0-616 name=__codelineno-0-616 href=#__codelineno-0-616></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-617 name=__codelineno-0-617 href=#__codelineno-0-617></a>            <span class=c1># check if unique server port address is assigned or not in multiserver_mode</span>
<a id=__codelineno-0-618 name=__codelineno-0-618 href=#__codelineno-0-618></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-619 name=__codelineno-0-619 href=#__codelineno-0-619></a>                <span class=c1># raise error if not</span>
<a id=__codelineno-0-620 name=__codelineno-0-620 href=#__codelineno-0-620></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-621 name=__codelineno-0-621 href=#__codelineno-0-621></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Kindly provide a unique &amp; valid port value at Server-end. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-622 name=__codelineno-0-622 href=#__codelineno-0-622></a>                <span class=p>)</span>
<a id=__codelineno-0-623 name=__codelineno-0-623 href=#__codelineno-0-623></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-624 name=__codelineno-0-624 href=#__codelineno-0-624></a>                <span class=c1># otherwise log it</span>
<a id=__codelineno-0-625 name=__codelineno-0-625 href=#__codelineno-0-625></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-626 name=__codelineno-0-626 href=#__codelineno-0-626></a>                    <span class=s2>&quot;Enabling Multi-Server Mode at PORT: </span><span class=si>{}</span><span class=s2> on this device!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-627 name=__codelineno-0-627 href=#__codelineno-0-627></a>                        <span class=n>port</span>
<a id=__codelineno-0-628 name=__codelineno-0-628 href=#__codelineno-0-628></a>                    <span class=p>)</span>
<a id=__codelineno-0-629 name=__codelineno-0-629 href=#__codelineno-0-629></a>                <span class=p>)</span>
<a id=__codelineno-0-630 name=__codelineno-0-630 href=#__codelineno-0-630></a>            <span class=c1># assign value to global variable</span>
<a id=__codelineno-0-631 name=__codelineno-0-631 href=#__codelineno-0-631></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__port</span> <span class=o>=</span> <span class=n>port</span>
<a id=__codelineno-0-632 name=__codelineno-0-632 href=#__codelineno-0-632></a>        <span class=c1># check if multiclient_mode is enabled</span>
<a id=__codelineno-0-633 name=__codelineno-0-633 href=#__codelineno-0-633></a>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-634 name=__codelineno-0-634 href=#__codelineno-0-634></a>            <span class=c1># check if unique client port address list/tuple is assigned or not in multiclient_mode</span>
<a id=__codelineno-0-635 name=__codelineno-0-635 href=#__codelineno-0-635></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>port</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>)):</span>
<a id=__codelineno-0-636 name=__codelineno-0-636 href=#__codelineno-0-636></a>                <span class=c1># raise error if not</span>
<a id=__codelineno-0-637 name=__codelineno-0-637 href=#__codelineno-0-637></a>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-638 name=__codelineno-0-638 href=#__codelineno-0-638></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Incorrect port value! Kindly provide a list/tuple of Client ports while Multi-Client mode is enabled. For more information refer VidGear docs.&quot;</span>
<a id=__codelineno-0-639 name=__codelineno-0-639 href=#__codelineno-0-639></a>                <span class=p>)</span>
<a id=__codelineno-0-640 name=__codelineno-0-640 href=#__codelineno-0-640></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-641 name=__codelineno-0-641 href=#__codelineno-0-641></a>                <span class=c1># otherwise log it</span>
<a id=__codelineno-0-642 name=__codelineno-0-642 href=#__codelineno-0-642></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-643 name=__codelineno-0-643 href=#__codelineno-0-643></a>                    <span class=s2>&quot;Enabling Multi-Client Mode at PORTS: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-644 name=__codelineno-0-644 href=#__codelineno-0-644></a>                <span class=p>)</span>
<a id=__codelineno-0-645 name=__codelineno-0-645 href=#__codelineno-0-645></a>            <span class=c1># create port address buffer for keeping track of connected client ports</span>
<a id=__codelineno-0-646 name=__codelineno-0-646 href=#__codelineno-0-646></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-647 name=__codelineno-0-647 href=#__codelineno-0-647></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-648 name=__codelineno-0-648 href=#__codelineno-0-648></a>            <span class=c1># otherwise assign local port address if None</span>
<a id=__codelineno-0-649 name=__codelineno-0-649 href=#__codelineno-0-649></a>            <span class=k>if</span> <span class=n>port</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-650 name=__codelineno-0-650 href=#__codelineno-0-650></a>                <span class=n>port</span> <span class=o>=</span> <span class=s2>&quot;5555&quot;</span>
<a id=__codelineno-0-651 name=__codelineno-0-651 href=#__codelineno-0-651></a>
<a id=__codelineno-0-652 name=__codelineno-0-652 href=#__codelineno-0-652></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-653 name=__codelineno-0-653 href=#__codelineno-0-653></a>            <span class=c1># activate secure_mode threaded authenticator</span>
<a id=__codelineno-0-654 name=__codelineno-0-654 href=#__codelineno-0-654></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-655 name=__codelineno-0-655 href=#__codelineno-0-655></a>                <span class=c1># start an authenticator for this context</span>
<a id=__codelineno-0-656 name=__codelineno-0-656 href=#__codelineno-0-656></a>                <span class=n>z_auth</span> <span class=o>=</span> <span class=n>ThreadAuthenticator</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=p>)</span>
<a id=__codelineno-0-657 name=__codelineno-0-657 href=#__codelineno-0-657></a>                <span class=n>z_auth</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
<a id=__codelineno-0-658 name=__codelineno-0-658 href=#__codelineno-0-658></a>                <span class=n>z_auth</span><span class=o>.</span><span class=n>allow</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>))</span>  <span class=c1># allow current address</span>
<a id=__codelineno-0-659 name=__codelineno-0-659 href=#__codelineno-0-659></a>
<a id=__codelineno-0-660 name=__codelineno-0-660 href=#__codelineno-0-660></a>                <span class=c1># check if `IronHouse` is activated</span>
<a id=__codelineno-0-661 name=__codelineno-0-661 href=#__codelineno-0-661></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-662 name=__codelineno-0-662 href=#__codelineno-0-662></a>                    <span class=c1># tell authenticator to use the certificate from given valid dir</span>
<a id=__codelineno-0-663 name=__codelineno-0-663 href=#__codelineno-0-663></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-664 name=__codelineno-0-664 href=#__codelineno-0-664></a>                        <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span>
<a id=__codelineno-0-665 name=__codelineno-0-665 href=#__codelineno-0-665></a>                    <span class=p>)</span>
<a id=__codelineno-0-666 name=__codelineno-0-666 href=#__codelineno-0-666></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-667 name=__codelineno-0-667 href=#__codelineno-0-667></a>                    <span class=c1># otherwise tell the authenticator how to handle the CURVE requests, if `StoneHouse` is activated</span>
<a id=__codelineno-0-668 name=__codelineno-0-668 href=#__codelineno-0-668></a>                    <span class=n>z_auth</span><span class=o>.</span><span class=n>configure_curve</span><span class=p>(</span>
<a id=__codelineno-0-669 name=__codelineno-0-669 href=#__codelineno-0-669></a>                        <span class=n>domain</span><span class=o>=</span><span class=s2>&quot;*&quot;</span><span class=p>,</span> <span class=n>location</span><span class=o>=</span><span class=n>auth</span><span class=o>.</span><span class=n>CURVE_ALLOW_ANY</span>
<a id=__codelineno-0-670 name=__codelineno-0-670 href=#__codelineno-0-670></a>                    <span class=p>)</span>
<a id=__codelineno-0-671 name=__codelineno-0-671 href=#__codelineno-0-671></a>
<a id=__codelineno-0-672 name=__codelineno-0-672 href=#__codelineno-0-672></a>            <span class=c1># define thread-safe messaging socket</span>
<a id=__codelineno-0-673 name=__codelineno-0-673 href=#__codelineno-0-673></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>msg_pattern</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<a id=__codelineno-0-674 name=__codelineno-0-674 href=#__codelineno-0-674></a>
<a id=__codelineno-0-675 name=__codelineno-0-675 href=#__codelineno-0-675></a>            <span class=c1># if req/rep pattern, define additional flags</span>
<a id=__codelineno-0-676 name=__codelineno-0-676 href=#__codelineno-0-676></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
<a id=__codelineno-0-677 name=__codelineno-0-677 href=#__codelineno-0-677></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>REQ_RELAXED</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-678 name=__codelineno-0-678 href=#__codelineno-0-678></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>REQ_CORRELATE</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-679 name=__codelineno-0-679 href=#__codelineno-0-679></a>
<a id=__codelineno-0-680 name=__codelineno-0-680 href=#__codelineno-0-680></a>            <span class=c1># if pub/sub pattern, define additional optimizer</span>
<a id=__codelineno-0-681 name=__codelineno-0-681 href=#__codelineno-0-681></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-682 name=__codelineno-0-682 href=#__codelineno-0-682></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>set_hwm</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-683 name=__codelineno-0-683 href=#__codelineno-0-683></a>
<a id=__codelineno-0-684 name=__codelineno-0-684 href=#__codelineno-0-684></a>            <span class=c1># enable specified secure mode for the socket</span>
<a id=__codelineno-0-685 name=__codelineno-0-685 href=#__codelineno-0-685></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-686 name=__codelineno-0-686 href=#__codelineno-0-686></a>                <span class=c1># load client key</span>
<a id=__codelineno-0-687 name=__codelineno-0-687 href=#__codelineno-0-687></a>                <span class=n>client_secret_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-688 name=__codelineno-0-688 href=#__codelineno-0-688></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_secretkeys_dir</span><span class=p>,</span> <span class=s2>&quot;client.key_secret&quot;</span>
<a id=__codelineno-0-689 name=__codelineno-0-689 href=#__codelineno-0-689></a>                <span class=p>)</span>
<a id=__codelineno-0-690 name=__codelineno-0-690 href=#__codelineno-0-690></a>                <span class=n>client_public</span><span class=p>,</span> <span class=n>client_secret</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span>
<a id=__codelineno-0-691 name=__codelineno-0-691 href=#__codelineno-0-691></a>                    <span class=n>client_secret_file</span>
<a id=__codelineno-0-692 name=__codelineno-0-692 href=#__codelineno-0-692></a>                <span class=p>)</span>
<a id=__codelineno-0-693 name=__codelineno-0-693 href=#__codelineno-0-693></a>                <span class=c1># load  all CURVE keys</span>
<a id=__codelineno-0-694 name=__codelineno-0-694 href=#__codelineno-0-694></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_secretkey</span> <span class=o>=</span> <span class=n>client_secret</span>
<a id=__codelineno-0-695 name=__codelineno-0-695 href=#__codelineno-0-695></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_publickey</span> <span class=o>=</span> <span class=n>client_public</span>
<a id=__codelineno-0-696 name=__codelineno-0-696 href=#__codelineno-0-696></a>                <span class=c1># load server key</span>
<a id=__codelineno-0-697 name=__codelineno-0-697 href=#__codelineno-0-697></a>                <span class=n>server_public_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<a id=__codelineno-0-698 name=__codelineno-0-698 href=#__codelineno-0-698></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__auth_publickeys_dir</span><span class=p>,</span> <span class=s2>&quot;server.key&quot;</span>
<a id=__codelineno-0-699 name=__codelineno-0-699 href=#__codelineno-0-699></a>                <span class=p>)</span>
<a id=__codelineno-0-700 name=__codelineno-0-700 href=#__codelineno-0-700></a>                <span class=n>server_public</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>auth</span><span class=o>.</span><span class=n>load_certificate</span><span class=p>(</span><span class=n>server_public_file</span><span class=p>)</span>
<a id=__codelineno-0-701 name=__codelineno-0-701 href=#__codelineno-0-701></a>                <span class=c1># inject public key to make a CURVE connection.</span>
<a id=__codelineno-0-702 name=__codelineno-0-702 href=#__codelineno-0-702></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>curve_serverkey</span> <span class=o>=</span> <span class=n>server_public</span>
<a id=__codelineno-0-703 name=__codelineno-0-703 href=#__codelineno-0-703></a>
<a id=__codelineno-0-704 name=__codelineno-0-704 href=#__codelineno-0-704></a>            <span class=c1># check if multi-client_mode is enabled</span>
<a id=__codelineno-0-705 name=__codelineno-0-705 href=#__codelineno-0-705></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-706 name=__codelineno-0-706 href=#__codelineno-0-706></a>                <span class=c1># bind socket to given server protocol, address and ports</span>
<a id=__codelineno-0-707 name=__codelineno-0-707 href=#__codelineno-0-707></a>                <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-708 name=__codelineno-0-708 href=#__codelineno-0-708></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
<a id=__codelineno-0-709 name=__codelineno-0-709 href=#__codelineno-0-709></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-710 name=__codelineno-0-710 href=#__codelineno-0-710></a>                    <span class=p>)</span>
<a id=__codelineno-0-711 name=__codelineno-0-711 href=#__codelineno-0-711></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-712 name=__codelineno-0-712 href=#__codelineno-0-712></a>                <span class=c1># handle SSH tuneling if enabled</span>
<a id=__codelineno-0-713 name=__codelineno-0-713 href=#__codelineno-0-713></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-714 name=__codelineno-0-714 href=#__codelineno-0-714></a>                    <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-715 name=__codelineno-0-715 href=#__codelineno-0-715></a>                    <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-716 name=__codelineno-0-716 href=#__codelineno-0-716></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-717 name=__codelineno-0-717 href=#__codelineno-0-717></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>),</span>
<a id=__codelineno-0-718 name=__codelineno-0-718 href=#__codelineno-0-718></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-719 name=__codelineno-0-719 href=#__codelineno-0-719></a>                        <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-720 name=__codelineno-0-720 href=#__codelineno-0-720></a>                        <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-721 name=__codelineno-0-721 href=#__codelineno-0-721></a>                        <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-722 name=__codelineno-0-722 href=#__codelineno-0-722></a>                    <span class=p>)</span>
<a id=__codelineno-0-723 name=__codelineno-0-723 href=#__codelineno-0-723></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-724 name=__codelineno-0-724 href=#__codelineno-0-724></a>                    <span class=c1># connect socket to given protocol, address and port</span>
<a id=__codelineno-0-725 name=__codelineno-0-725 href=#__codelineno-0-725></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
<a id=__codelineno-0-726 name=__codelineno-0-726 href=#__codelineno-0-726></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-727 name=__codelineno-0-727 href=#__codelineno-0-727></a>                    <span class=p>)</span>
<a id=__codelineno-0-728 name=__codelineno-0-728 href=#__codelineno-0-728></a>
<a id=__codelineno-0-729 name=__codelineno-0-729 href=#__codelineno-0-729></a>            <span class=c1># additional settings</span>
<a id=__codelineno-0-730 name=__codelineno-0-730 href=#__codelineno-0-730></a>            <span class=k>if</span> <span class=n>pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-731 name=__codelineno-0-731 href=#__codelineno-0-731></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-732 name=__codelineno-0-732 href=#__codelineno-0-732></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-0-733 name=__codelineno-0-733 href=#__codelineno-0-733></a>                    <span class=k>for</span> <span class=n>pt</span> <span class=ow>in</span> <span class=n>port</span><span class=p>:</span>
<a id=__codelineno-0-734 name=__codelineno-0-734 href=#__codelineno-0-734></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
<a id=__codelineno-0-735 name=__codelineno-0-735 href=#__codelineno-0-735></a>                            <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>pt</span><span class=p>)</span>
<a id=__codelineno-0-736 name=__codelineno-0-736 href=#__codelineno-0-736></a>                        <span class=p>)</span>
<a id=__codelineno-0-737 name=__codelineno-0-737 href=#__codelineno-0-737></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-738 name=__codelineno-0-738 href=#__codelineno-0-738></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span> <span class=o>=</span> <span class=p>(</span>
<a id=__codelineno-0-739 name=__codelineno-0-739 href=#__codelineno-0-739></a>                        <span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
<a id=__codelineno-0-740 name=__codelineno-0-740 href=#__codelineno-0-740></a>                    <span class=p>)</span>
<a id=__codelineno-0-741 name=__codelineno-0-741 href=#__codelineno-0-741></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span> <span class=o>=</span> <span class=n>msg_pattern</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<a id=__codelineno-0-742 name=__codelineno-0-742 href=#__codelineno-0-742></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-743 name=__codelineno-0-743 href=#__codelineno-0-743></a>
<a id=__codelineno-0-744 name=__codelineno-0-744 href=#__codelineno-0-744></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-745 name=__codelineno-0-745 href=#__codelineno-0-745></a>                    <span class=s2>&quot;Reliable transmission is enabled for this pattern with max-retries: </span><span class=si>{}</span><span class=s2> and timeout: </span><span class=si>{}</span><span class=s2> secs.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-746 name=__codelineno-0-746 href=#__codelineno-0-746></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>/</span> <span class=mi>1000</span>
<a id=__codelineno-0-747 name=__codelineno-0-747 href=#__codelineno-0-747></a>                    <span class=p>)</span>
<a id=__codelineno-0-748 name=__codelineno-0-748 href=#__codelineno-0-748></a>                <span class=p>)</span>
<a id=__codelineno-0-749 name=__codelineno-0-749 href=#__codelineno-0-749></a>
<a id=__codelineno-0-750 name=__codelineno-0-750 href=#__codelineno-0-750></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-751 name=__codelineno-0-751 href=#__codelineno-0-751></a>            <span class=c1># otherwise log and raise error</span>
<a id=__codelineno-0-752 name=__codelineno-0-752 href=#__codelineno-0-752></a>            <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-753 name=__codelineno-0-753 href=#__codelineno-0-753></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-754 name=__codelineno-0-754 href=#__codelineno-0-754></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-755 name=__codelineno-0-755 href=#__codelineno-0-755></a>                    <span class=s2>&quot;Failed to activate Secure Mode: `</span><span class=si>{}</span><span class=s2>` for this connection!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-756 name=__codelineno-0-756 href=#__codelineno-0-756></a>                        <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-757 name=__codelineno-0-757 href=#__codelineno-0-757></a>                    <span class=p>)</span>
<a id=__codelineno-0-758 name=__codelineno-0-758 href=#__codelineno-0-758></a>                <span class=p>)</span>
<a id=__codelineno-0-759 name=__codelineno-0-759 href=#__codelineno-0-759></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-760 name=__codelineno-0-760 href=#__codelineno-0-760></a>                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-761 name=__codelineno-0-761 href=#__codelineno-0-761></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Send Mode failed to activate </span><span class=si>{}</span><span class=s2> Mode at address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-762 name=__codelineno-0-762 href=#__codelineno-0-762></a>                        <span class=s2>&quot;Multi-Server&quot;</span>
<a id=__codelineno-0-763 name=__codelineno-0-763 href=#__codelineno-0-763></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span>
<a id=__codelineno-0-764 name=__codelineno-0-764 href=#__codelineno-0-764></a>                        <span class=k>else</span> <span class=s2>&quot;Multi-Client&quot;</span><span class=p>,</span>
<a id=__codelineno-0-765 name=__codelineno-0-765 href=#__codelineno-0-765></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span>
<a id=__codelineno-0-766 name=__codelineno-0-766 href=#__codelineno-0-766></a>                        <span class=n>pattern</span><span class=p>,</span>
<a id=__codelineno-0-767 name=__codelineno-0-767 href=#__codelineno-0-767></a>                    <span class=p>)</span>
<a id=__codelineno-0-768 name=__codelineno-0-768 href=#__codelineno-0-768></a>                <span class=p>)</span>
<a id=__codelineno-0-769 name=__codelineno-0-769 href=#__codelineno-0-769></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-770 name=__codelineno-0-770 href=#__codelineno-0-770></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span><span class=p>:</span>
<a id=__codelineno-0-771 name=__codelineno-0-771 href=#__codelineno-0-771></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-772 name=__codelineno-0-772 href=#__codelineno-0-772></a>                        <span class=s2>&quot;Failed to activate Bidirectional Mode for this connection!&quot;</span>
<a id=__codelineno-0-773 name=__codelineno-0-773 href=#__codelineno-0-773></a>                    <span class=p>)</span>
<a id=__codelineno-0-774 name=__codelineno-0-774 href=#__codelineno-0-774></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-775 name=__codelineno-0-775 href=#__codelineno-0-775></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span>
<a id=__codelineno-0-776 name=__codelineno-0-776 href=#__codelineno-0-776></a>                        <span class=s2>&quot;Failed to initiate SSH Tunneling Mode for this server with `</span><span class=si>{}</span><span class=s2>` back-end!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-777 name=__codelineno-0-777 href=#__codelineno-0-777></a>                            <span class=s2>&quot;paramiko&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span> <span class=k>else</span> <span class=s2>&quot;pexpect&quot;</span>
<a id=__codelineno-0-778 name=__codelineno-0-778 href=#__codelineno-0-778></a>                        <span class=p>)</span>
<a id=__codelineno-0-779 name=__codelineno-0-779 href=#__codelineno-0-779></a>                    <span class=p>)</span>
<a id=__codelineno-0-780 name=__codelineno-0-780 href=#__codelineno-0-780></a>                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-781 name=__codelineno-0-781 href=#__codelineno-0-781></a>                    <span class=s2>&quot;[NetGear:ERROR] :: Send Mode failed to connect address: </span><span class=si>{}</span><span class=s2> and pattern: </span><span class=si>{}</span><span class=s2>! Kindly recheck all parameters.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-782 name=__codelineno-0-782 href=#__codelineno-0-782></a>                        <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-783 name=__codelineno-0-783 href=#__codelineno-0-783></a>                    <span class=p>)</span>
<a id=__codelineno-0-784 name=__codelineno-0-784 href=#__codelineno-0-784></a>                <span class=p>)</span>
<a id=__codelineno-0-785 name=__codelineno-0-785 href=#__codelineno-0-785></a>
<a id=__codelineno-0-786 name=__codelineno-0-786 href=#__codelineno-0-786></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span><span class=p>:</span>
<a id=__codelineno-0-787 name=__codelineno-0-787 href=#__codelineno-0-787></a>            <span class=c1># finally log progress</span>
<a id=__codelineno-0-788 name=__codelineno-0-788 href=#__codelineno-0-788></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-789 name=__codelineno-0-789 href=#__codelineno-0-789></a>                <span class=s2>&quot;Successfully connected to address: </span><span class=si>{}</span><span class=s2> with pattern: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-790 name=__codelineno-0-790 href=#__codelineno-0-790></a>                    <span class=p>(</span><span class=n>protocol</span> <span class=o>+</span> <span class=s2>&quot;://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>address</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;:&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>port</span><span class=p>)),</span> <span class=n>pattern</span>
<a id=__codelineno-0-791 name=__codelineno-0-791 href=#__codelineno-0-791></a>                <span class=p>)</span>
<a id=__codelineno-0-792 name=__codelineno-0-792 href=#__codelineno-0-792></a>            <span class=p>)</span>
<a id=__codelineno-0-793 name=__codelineno-0-793 href=#__codelineno-0-793></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-794 name=__codelineno-0-794 href=#__codelineno-0-794></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-795 name=__codelineno-0-795 href=#__codelineno-0-795></a>                    <span class=s2>&quot;JPEG Frame-Compression is activated for this connection with Colorspace:`</span><span class=si>{}</span><span class=s2>`, Quality:`</span><span class=si>{}</span><span class=s2>`%, Fastdct:`</span><span class=si>{}</span><span class=s2>`, and Fastupsample:`</span><span class=si>{}</span><span class=s2>`.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-796 name=__codelineno-0-796 href=#__codelineno-0-796></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-797 name=__codelineno-0-797 href=#__codelineno-0-797></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-798 name=__codelineno-0-798 href=#__codelineno-0-798></a>                        <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-799 name=__codelineno-0-799 href=#__codelineno-0-799></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-800 name=__codelineno-0-800 href=#__codelineno-0-800></a>                        <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-801 name=__codelineno-0-801 href=#__codelineno-0-801></a>                        <span class=s2>&quot;enabled&quot;</span>
<a id=__codelineno-0-802 name=__codelineno-0-802 href=#__codelineno-0-802></a>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-803 name=__codelineno-0-803 href=#__codelineno-0-803></a>                        <span class=k>else</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span>
<a id=__codelineno-0-804 name=__codelineno-0-804 href=#__codelineno-0-804></a>                    <span class=p>)</span>
<a id=__codelineno-0-805 name=__codelineno-0-805 href=#__codelineno-0-805></a>                <span class=p>)</span>
<a id=__codelineno-0-806 name=__codelineno-0-806 href=#__codelineno-0-806></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>:</span>
<a id=__codelineno-0-807 name=__codelineno-0-807 href=#__codelineno-0-807></a>                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-808 name=__codelineno-0-808 href=#__codelineno-0-808></a>                    <span class=s2>&quot;Enabled ZMQ Security Mechanism: `</span><span class=si>{}</span><span class=s2>` for this connection.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-809 name=__codelineno-0-809 href=#__codelineno-0-809></a>                        <span class=n>valid_security_mech</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>__secure_mode</span><span class=p>]</span>
<a id=__codelineno-0-810 name=__codelineno-0-810 href=#__codelineno-0-810></a>                    <span class=p>)</span>
<a id=__codelineno-0-811 name=__codelineno-0-811 href=#__codelineno-0-811></a>                <span class=p>)</span>
<a id=__codelineno-0-812 name=__codelineno-0-812 href=#__codelineno-0-812></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Unique System ID is </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__id</span><span class=p>))</span>
<a id=__codelineno-0-813 name=__codelineno-0-813 href=#__codelineno-0-813></a>            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-814 name=__codelineno-0-814 href=#__codelineno-0-814></a>                <span class=s2>&quot;Send Mode is successfully activated and ready to send data.&quot;</span>
<a id=__codelineno-0-815 name=__codelineno-0-815 href=#__codelineno-0-815></a>            <span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 class="doc doc-heading" id=vidgear.gears.netgear.NetGear.close> <code class="highlight language-python"><span class=n>close</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span></code> <a class=headerlink href=#vidgear.gears.netgear.NetGear.close title="Anchor link to this section for reference">âš“</a></h3> <div class="doc doc-contents "> <p>Safely terminates the threads, and NetGear resources.</p> <details class=quote> <summary>Source code in <code>vidgear/gears/netgear.py</code></summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span> <span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=sd>    Safely terminates the threads, and NetGear resources.</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=c1># log it</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>        <span class=s2>&quot;Terminating various </span><span class=si>{}</span><span class=s2> Processes.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>            <span class=s2>&quot;Receive Mode&quot;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span> <span class=k>else</span> <span class=s2>&quot;Send Mode&quot;</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>        <span class=p>)</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    <span class=p>)</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=c1>#  whether `receive_mode` is enabled or not</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>        <span class=c1># check whether queue mode is empty</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__queue</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=p>:</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>        <span class=c1># call immediate termination</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>        <span class=c1># wait until stream resources are released (producer thread might be still grabbing frame)</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>            <span class=c1># properly handle thread exit</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__thread</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminating. Please wait...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>        <span class=c1># properly close the socket</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>(</span><span class=n>linger</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminated Successfully!&quot;</span><span class=p>)</span>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>        <span class=c1># indicate that process should be terminated</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>        <span class=c1># check if all attempts of reconnecting failed, then skip to closure</span>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>        <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>)</span> <span class=ow>or</span> <span class=p>(</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>        <span class=p>):</span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>            <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>                <span class=c1># properly close the socket</span>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>            <span class=k>except</span> <span class=n>ZMQError</span><span class=p>:</span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>                <span class=k>pass</span>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>            <span class=k>finally</span><span class=p>:</span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>                <span class=c1># exit</span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>                <span class=k>return</span>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span><span class=p>:</span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>            <span class=c1># check if multiserver_mode</span>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>            <span class=c1># send termination flag to client with its unique port</span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>            <span class=n>term_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>terminate_flag</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>            <span class=c1># otherwise send termination flag to client</span>
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>            <span class=n>term_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>terminate_flag</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>                <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=p>:</span>
<a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>term_dict</span><span class=p>)</span>
<a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>term_dict</span><span class=p>)</span>
<a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>
<a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>            <span class=c1># check for confirmation if available within 1/5 timeout</span>
<a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminating. Please wait...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span> <span class=o>//</span> <span class=mi>5</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>):</span>
<a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>()</span>
<a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a>            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=n>ZMQError</span><span class=p>):</span>
<a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>                <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
<a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>        <span class=k>finally</span><span class=p>:</span>
<a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a>            <span class=c1># properly close the socket</span>
<a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Terminated Successfully!&quot;</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 class="doc doc-heading" id=vidgear.gears.netgear.NetGear.recv> <code class="highlight language-python"><span class=n>recv</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>return_data</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <a class=headerlink href=#vidgear.gears.netgear.NetGear.recv title="Anchor link to this section for reference">âš“</a></h3> <div class="doc doc-contents "> <p>A Receiver end method, that extracts received frames synchronously from monitored deque, while maintaining a fixed-length frame buffer in the memory, and blocks the thread if the deque is full.</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>return_data</code></td> <td><code>any</code></td> <td><p>inputs return data <em>(of any datatype)</em>, for sending back to Server.</p></td> <td><code>None</code></td> </tr> </tbody> </table> <p><strong>Returns:</strong> A n-dimensional numpy array.</p> <details class=quote> <summary>Source code in <code>vidgear/gears/netgear.py</code></summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span> <span class=nf>recv</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>return_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=sd>    A Receiver end method, that extracts received frames synchronously from monitored deque, while maintaining a</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=sd>    fixed-length frame buffer in the memory, and blocks the thread if the deque is full.</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=sd>    Parameters:</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=sd>        return_data (any): inputs return data _(of any datatype)_, for sending back to Server.</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=sd>    **Returns:** A n-dimensional numpy array.</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=c1># check whether `receive mode` is activated</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>):</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>        <span class=c1># raise value error and exit</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>            <span class=s2>&quot;[NetGear:ERROR] :: `recv()` function cannot be used while receive_mode is disabled. Kindly refer vidgear docs!&quot;</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>        <span class=p>)</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>    <span class=c1># handle Bidirectional return data</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>    <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>return_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__return_data</span> <span class=o>=</span> <span class=n>return_data</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>    <span class=c1># check whether or not termination flag is enabled</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>    <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span><span class=p>:</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>        <span class=k>try</span><span class=p>:</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>            <span class=c1># check if queue is empty</span>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>                <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>__queue</span><span class=o>.</span><span class=n>popleft</span><span class=p>()</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.00001</span><span class=p>)</span>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>                <span class=k>continue</span>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>        <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>            <span class=k>break</span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>    <span class=c1># otherwise return NoneType</span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-method"> <h3 class="doc doc-heading" id=vidgear.gears.netgear.NetGear.send> <code class="highlight language-python"><span class=n>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>frame</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <a class=headerlink href=#vidgear.gears.netgear.NetGear.send title="Anchor link to this section for reference">âš“</a></h3> <div class="doc doc-contents "> <p>A Server end method, that sends the data and frames over the network to Client(s).</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>frame</code></td> <td><code>numpy.ndarray</code></td> <td><p>inputs numpy array(frame).</p></td> <td><em>required</em></td> </tr> <tr> <td><code>message</code></td> <td><code>any</code></td> <td><p>input for sending additional data <em>(of any datatype except <code>numpy.ndarray</code>)</em> to Client(s).</p></td> <td><code>None</code></td> </tr> </tbody> </table> <p><strong>Returns:</strong> Data <em>(of any datatype)</em> in selected exclusive modes, otherwise None-type.</p> <details class=quote> <summary>Source code in <code>vidgear/gears/netgear.py</code></summary> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>frame</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=sd>    A Server end method, that sends the data and frames over the network to Client(s).</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=sd>    Parameters:</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=sd>        frame (numpy.ndarray): inputs numpy array(frame).</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=sd>        message (any): input for sending additional data _(of any datatype except `numpy.ndarray`)_ to Client(s).</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=sd>    **Returns:** Data _(of any datatype)_ in selected exclusive modes, otherwise None-type.</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=c1># check whether `receive_mode` is disabled</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__receive_mode</span><span class=p>:</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>        <span class=c1># raise value error and exit</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>            <span class=s2>&quot;[NetGear:ERROR] :: `send()` function cannot be used while receive_mode is enabled. Kindly refer vidgear docs!&quot;</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>        <span class=p>)</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>message</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>):</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>            <span class=s2>&quot;Skipped unsupported `message` of datatype: </span><span class=si>{}</span><span class=s2>!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>                <span class=nb>type</span><span class=p>(</span><span class=n>message</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>            <span class=p>)</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>        <span class=p>)</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>        <span class=n>message</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>    <span class=c1># define exit_flag and assign value</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>    <span class=n>exit_flag</span> <span class=o>=</span> <span class=kc>True</span> <span class=k>if</span> <span class=p>(</span><span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span><span class=p>)</span> <span class=k>else</span> <span class=kc>False</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>    <span class=c1># check whether exit_flag is False</span>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>    <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>exit_flag</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=p>(</span><span class=n>frame</span><span class=o>.</span><span class=n>flags</span><span class=p>[</span><span class=s2>&quot;C_CONTIGUOUS&quot;</span><span class=p>]):</span>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>        <span class=c1># check whether the incoming frame is contiguous</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>        <span class=n>frame</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ascontiguousarray</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>frame</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>    <span class=c1># handle JPEG compression encoding</span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>:</span>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span><span class=p>:</span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>            <span class=k>if</span> <span class=n>frame</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>                <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>                <span class=n>frame</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>expand_dims</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>            <span class=n>frame</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>                <span class=n>frame</span><span class=p>,</span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>                <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>                <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>                <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>            <span class=p>)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>            <span class=n>frame</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>encode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>                <span class=n>frame</span><span class=p>,</span>
<a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>                <span class=n>quality</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_quality</span><span class=p>,</span>
<a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>                <span class=n>colorspace</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>                <span class=n>colorsubsampling</span><span class=o>=</span><span class=s2>&quot;422&quot;</span><span class=p>,</span>
<a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>                <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>            <span class=p>)</span>
<a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>
<a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>    <span class=c1># check if multiserver_mode is activated and assign values with unique port</span>
<a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>    <span class=n>msg_dict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__port</span><span class=p>)</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiserver_mode</span> <span class=k>else</span> <span class=nb>dict</span><span class=p>()</span>
<a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>
<a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>    <span class=c1># prepare the exclusive json dict</span>
<a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>    <span class=n>msg_dict</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
<a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>        <span class=nb>dict</span><span class=p>(</span>
<a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>            <span class=n>terminate_flag</span><span class=o>=</span><span class=n>exit_flag</span><span class=p>,</span>
<a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>            <span class=n>compression</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>                <span class=s2>&quot;dct&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span><span class=p>,</span>
<a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>                <span class=s2>&quot;ups&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span><span class=p>,</span>
<a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a>                <span class=s2>&quot;colorspace&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_colorspace</span><span class=p>,</span>
<a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>            <span class=p>}</span>
<a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span>
<a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a>            <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a>            <span class=n>message</span><span class=o>=</span><span class=n>message</span><span class=p>,</span>
<a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>            <span class=n>pattern</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span><span class=p>),</span>
<a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a>            <span class=n>dtype</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>frame</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a>            <span class=n>shape</span><span class=o>=</span><span class=n>frame</span><span class=o>.</span><span class=n>shape</span> <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression</span><span class=p>)</span> <span class=k>else</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a>        <span class=p>)</span>
<a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a>    <span class=p>)</span>
<a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>
<a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>    <span class=c1># send the json dict</span>
<a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send_json</span><span class=p>(</span><span class=n>msg_dict</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span> <span class=o>|</span> <span class=n>zmq</span><span class=o>.</span><span class=n>SNDMORE</span><span class=p>)</span>
<a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a>    <span class=c1># send the frame array with correct flags</span>
<a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>send</span><span class=p>(</span>
<a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a>        <span class=n>frame</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>,</span> <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span> <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span>
<a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a>    <span class=p>)</span>
<a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a>
<a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a>    <span class=c1># check if synchronous patterns, then wait for confirmation</span>
<a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__pattern</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
<a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a>        <span class=c1># check if Bidirectional data transmission is enabled</span>
<a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__bi_mode</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a>
<a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a>            <span class=c1># handles return data</span>
<a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a>            <span class=n>recvd_data</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a>
<a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a>            <span class=n>socks</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span><span class=p>))</span>
<a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a>            <span class=k>if</span> <span class=n>socks</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span> <span class=o>==</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>:</span>
<a id=__codelineno-0-95 name=__codelineno-0-95 href=#__codelineno-0-95></a>                <span class=c1># handle return data</span>
<a id=__codelineno-0-96 name=__codelineno-0-96 href=#__codelineno-0-96></a>                <span class=n>recv_json</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv_json</span><span class=p>(</span><span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>)</span>
<a id=__codelineno-0-97 name=__codelineno-0-97 href=#__codelineno-0-97></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-98 name=__codelineno-0-98 href=#__codelineno-0-98></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;No response from Client, Reconnecting again...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-99 name=__codelineno-0-99 href=#__codelineno-0-99></a>                <span class=c1># Socket is confused. Close and remove it.</span>
<a id=__codelineno-0-100 name=__codelineno-0-100 href=#__codelineno-0-100></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-101 name=__codelineno-0-101 href=#__codelineno-0-101></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-102 name=__codelineno-0-102 href=#__codelineno-0-102></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span>
<a id=__codelineno-0-103 name=__codelineno-0-103 href=#__codelineno-0-103></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-0-104 name=__codelineno-0-104 href=#__codelineno-0-104></a>
<a id=__codelineno-0-105 name=__codelineno-0-105 href=#__codelineno-0-105></a>                <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>):</span>
<a id=__codelineno-0-106 name=__codelineno-0-106 href=#__codelineno-0-106></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span><span class=p>:</span>
<a id=__codelineno-0-107 name=__codelineno-0-107 href=#__codelineno-0-107></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
<a id=__codelineno-0-108 name=__codelineno-0-108 href=#__codelineno-0-108></a>                            <span class=s2>&quot;All Clients failed to respond on multiple attempts.&quot;</span>
<a id=__codelineno-0-109 name=__codelineno-0-109 href=#__codelineno-0-109></a>                        <span class=p>)</span>
<a id=__codelineno-0-110 name=__codelineno-0-110 href=#__codelineno-0-110></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-111 name=__codelineno-0-111 href=#__codelineno-0-111></a>                        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
<a id=__codelineno-0-112 name=__codelineno-0-112 href=#__codelineno-0-112></a>                            <span class=s2>&quot;Client failed to respond on multiple attempts.&quot;</span>
<a id=__codelineno-0-113 name=__codelineno-0-113 href=#__codelineno-0-113></a>                        <span class=p>)</span>
<a id=__codelineno-0-114 name=__codelineno-0-114 href=#__codelineno-0-114></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-115 name=__codelineno-0-115 href=#__codelineno-0-115></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-116 name=__codelineno-0-116 href=#__codelineno-0-116></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Client(s) seems to be offline, Abandoning.&quot;</span>
<a id=__codelineno-0-117 name=__codelineno-0-117 href=#__codelineno-0-117></a>                    <span class=p>)</span>
<a id=__codelineno-0-118 name=__codelineno-0-118 href=#__codelineno-0-118></a>
<a id=__codelineno-0-119 name=__codelineno-0-119 href=#__codelineno-0-119></a>                <span class=c1># Create new connection</span>
<a id=__codelineno-0-120 name=__codelineno-0-120 href=#__codelineno-0-120></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span><span class=p>)</span>
<a id=__codelineno-0-121 name=__codelineno-0-121 href=#__codelineno-0-121></a>                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
<a id=__codelineno-0-122 name=__codelineno-0-122 href=#__codelineno-0-122></a>                    <span class=k>for</span> <span class=n>_connection</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>:</span>
<a id=__codelineno-0-123 name=__codelineno-0-123 href=#__codelineno-0-123></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>_connection</span><span class=p>)</span>
<a id=__codelineno-0-124 name=__codelineno-0-124 href=#__codelineno-0-124></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-125 name=__codelineno-0-125 href=#__codelineno-0-125></a>                    <span class=c1># handle SSH tunneling if enabled</span>
<a id=__codelineno-0-126 name=__codelineno-0-126 href=#__codelineno-0-126></a>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-127 name=__codelineno-0-127 href=#__codelineno-0-127></a>                        <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-128 name=__codelineno-0-128 href=#__codelineno-0-128></a>                        <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-129 name=__codelineno-0-129 href=#__codelineno-0-129></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-130 name=__codelineno-0-130 href=#__codelineno-0-130></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span>
<a id=__codelineno-0-131 name=__codelineno-0-131 href=#__codelineno-0-131></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-132 name=__codelineno-0-132 href=#__codelineno-0-132></a>                            <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-133 name=__codelineno-0-133 href=#__codelineno-0-133></a>                            <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-134 name=__codelineno-0-134 href=#__codelineno-0-134></a>                            <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-135 name=__codelineno-0-135 href=#__codelineno-0-135></a>                        <span class=p>)</span>
<a id=__codelineno-0-136 name=__codelineno-0-136 href=#__codelineno-0-136></a>                    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-137 name=__codelineno-0-137 href=#__codelineno-0-137></a>                        <span class=c1># connect normally</span>
<a id=__codelineno-0-138 name=__codelineno-0-138 href=#__codelineno-0-138></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>)</span>
<a id=__codelineno-0-139 name=__codelineno-0-139 href=#__codelineno-0-139></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-140 name=__codelineno-0-140 href=#__codelineno-0-140></a>                <span class=c1># return None for mean-time</span>
<a id=__codelineno-0-141 name=__codelineno-0-141 href=#__codelineno-0-141></a>                <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-142 name=__codelineno-0-142 href=#__codelineno-0-142></a>
<a id=__codelineno-0-143 name=__codelineno-0-143 href=#__codelineno-0-143></a>            <span class=c1># save the unique port addresses</span>
<a id=__codelineno-0-144 name=__codelineno-0-144 href=#__codelineno-0-144></a>            <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-145 name=__codelineno-0-145 href=#__codelineno-0-145></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-146 name=__codelineno-0-146 href=#__codelineno-0-146></a>                <span class=ow>and</span> <span class=ow>not</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span>
<a id=__codelineno-0-147 name=__codelineno-0-147 href=#__codelineno-0-147></a>            <span class=p>):</span>
<a id=__codelineno-0-148 name=__codelineno-0-148 href=#__codelineno-0-148></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__port_buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>])</span>
<a id=__codelineno-0-149 name=__codelineno-0-149 href=#__codelineno-0-149></a>
<a id=__codelineno-0-150 name=__codelineno-0-150 href=#__codelineno-0-150></a>            <span class=k>if</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;return_type&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;ndarray&quot;</span><span class=p>:</span>
<a id=__codelineno-0-151 name=__codelineno-0-151 href=#__codelineno-0-151></a>                <span class=n>recv_array</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span>
<a id=__codelineno-0-152 name=__codelineno-0-152 href=#__codelineno-0-152></a>                    <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_flag</span><span class=p>,</span>
<a id=__codelineno-0-153 name=__codelineno-0-153 href=#__codelineno-0-153></a>                    <span class=n>copy</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_copy</span><span class=p>,</span>
<a id=__codelineno-0-154 name=__codelineno-0-154 href=#__codelineno-0-154></a>                    <span class=n>track</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_track</span><span class=p>,</span>
<a id=__codelineno-0-155 name=__codelineno-0-155 href=#__codelineno-0-155></a>                <span class=p>)</span>
<a id=__codelineno-0-156 name=__codelineno-0-156 href=#__codelineno-0-156></a>                <span class=c1># check if encoding was enabled</span>
<a id=__codelineno-0-157 name=__codelineno-0-157 href=#__codelineno-0-157></a>                <span class=k>if</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>]:</span>
<a id=__codelineno-0-158 name=__codelineno-0-158 href=#__codelineno-0-158></a>                    <span class=c1># decode JPEG frame</span>
<a id=__codelineno-0-159 name=__codelineno-0-159 href=#__codelineno-0-159></a>                    <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>simplejpeg</span><span class=o>.</span><span class=n>decode_jpeg</span><span class=p>(</span>
<a id=__codelineno-0-160 name=__codelineno-0-160 href=#__codelineno-0-160></a>                        <span class=n>recv_array</span><span class=p>,</span>
<a id=__codelineno-0-161 name=__codelineno-0-161 href=#__codelineno-0-161></a>                        <span class=n>colorspace</span><span class=o>=</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>],</span>
<a id=__codelineno-0-162 name=__codelineno-0-162 href=#__codelineno-0-162></a>                        <span class=n>fastdct</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastdct</span>
<a id=__codelineno-0-163 name=__codelineno-0-163 href=#__codelineno-0-163></a>                        <span class=ow>or</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;dct&quot;</span><span class=p>],</span>
<a id=__codelineno-0-164 name=__codelineno-0-164 href=#__codelineno-0-164></a>                        <span class=n>fastupsample</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__jpeg_compression_fastupsample</span>
<a id=__codelineno-0-165 name=__codelineno-0-165 href=#__codelineno-0-165></a>                        <span class=ow>or</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;ups&quot;</span><span class=p>],</span>
<a id=__codelineno-0-166 name=__codelineno-0-166 href=#__codelineno-0-166></a>                    <span class=p>)</span>
<a id=__codelineno-0-167 name=__codelineno-0-167 href=#__codelineno-0-167></a>                    <span class=c1># check if valid frame returned</span>
<a id=__codelineno-0-168 name=__codelineno-0-168 href=#__codelineno-0-168></a>                    <span class=k>if</span> <span class=n>recvd_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-0-169 name=__codelineno-0-169 href=#__codelineno-0-169></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-170 name=__codelineno-0-170 href=#__codelineno-0-170></a>                        <span class=c1># otherwise raise error and exit</span>
<a id=__codelineno-0-171 name=__codelineno-0-171 href=#__codelineno-0-171></a>                        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-172 name=__codelineno-0-172 href=#__codelineno-0-172></a>                            <span class=s2>&quot;[NetGear:ERROR] :: Received compressed frame `</span><span class=si>{}</span><span class=s2>` decoding failed with flag: </span><span class=si>{}</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
<a id=__codelineno-0-173 name=__codelineno-0-173 href=#__codelineno-0-173></a>                                <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>],</span>
<a id=__codelineno-0-174 name=__codelineno-0-174 href=#__codelineno-0-174></a>                                <span class=bp>self</span><span class=o>.</span><span class=n>__ex_compression_params</span><span class=p>,</span>
<a id=__codelineno-0-175 name=__codelineno-0-175 href=#__codelineno-0-175></a>                            <span class=p>)</span>
<a id=__codelineno-0-176 name=__codelineno-0-176 href=#__codelineno-0-176></a>                        <span class=p>)</span>
<a id=__codelineno-0-177 name=__codelineno-0-177 href=#__codelineno-0-177></a>
<a id=__codelineno-0-178 name=__codelineno-0-178 href=#__codelineno-0-178></a>                    <span class=k>if</span> <span class=p>(</span>
<a id=__codelineno-0-179 name=__codelineno-0-179 href=#__codelineno-0-179></a>                        <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;compression&quot;</span><span class=p>][</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;GRAY&quot;</span>
<a id=__codelineno-0-180 name=__codelineno-0-180 href=#__codelineno-0-180></a>                        <span class=ow>and</span> <span class=n>recvd_data</span><span class=o>.</span><span class=n>ndim</span> <span class=o>==</span> <span class=mi>3</span>
<a id=__codelineno-0-181 name=__codelineno-0-181 href=#__codelineno-0-181></a>                    <span class=p>):</span>
<a id=__codelineno-0-182 name=__codelineno-0-182 href=#__codelineno-0-182></a>                        <span class=c1># patch for https://gitlab.com/jfolz/simplejpeg/-/issues/11</span>
<a id=__codelineno-0-183 name=__codelineno-0-183 href=#__codelineno-0-183></a>                        <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>squeeze</span><span class=p>(</span><span class=n>recvd_data</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-0-184 name=__codelineno-0-184 href=#__codelineno-0-184></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-185 name=__codelineno-0-185 href=#__codelineno-0-185></a>                    <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>frombuffer</span><span class=p>(</span>
<a id=__codelineno-0-186 name=__codelineno-0-186 href=#__codelineno-0-186></a>                        <span class=n>recv_array</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;array_dtype&quot;</span><span class=p>]</span>
<a id=__codelineno-0-187 name=__codelineno-0-187 href=#__codelineno-0-187></a>                    <span class=p>)</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;array_shape&quot;</span><span class=p>])</span>
<a id=__codelineno-0-188 name=__codelineno-0-188 href=#__codelineno-0-188></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-189 name=__codelineno-0-189 href=#__codelineno-0-189></a>                <span class=n>recvd_data</span> <span class=o>=</span> <span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;data&quot;</span><span class=p>]</span>
<a id=__codelineno-0-190 name=__codelineno-0-190 href=#__codelineno-0-190></a>
<a id=__codelineno-0-191 name=__codelineno-0-191 href=#__codelineno-0-191></a>            <span class=k>return</span> <span class=p>(</span>
<a id=__codelineno-0-192 name=__codelineno-0-192 href=#__codelineno-0-192></a>                <span class=p>(</span><span class=n>recv_json</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>],</span> <span class=n>recvd_data</span><span class=p>)</span>
<a id=__codelineno-0-193 name=__codelineno-0-193 href=#__codelineno-0-193></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__multiclient_mode</span>
<a id=__codelineno-0-194 name=__codelineno-0-194 href=#__codelineno-0-194></a>                <span class=k>else</span> <span class=n>recvd_data</span>
<a id=__codelineno-0-195 name=__codelineno-0-195 href=#__codelineno-0-195></a>            <span class=p>)</span>
<a id=__codelineno-0-196 name=__codelineno-0-196 href=#__codelineno-0-196></a>        <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-197 name=__codelineno-0-197 href=#__codelineno-0-197></a>            <span class=c1># otherwise log normally</span>
<a id=__codelineno-0-198 name=__codelineno-0-198 href=#__codelineno-0-198></a>            <span class=n>socks</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__request_timeout</span><span class=p>))</span>
<a id=__codelineno-0-199 name=__codelineno-0-199 href=#__codelineno-0-199></a>            <span class=k>if</span> <span class=n>socks</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span> <span class=o>==</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>:</span>
<a id=__codelineno-0-200 name=__codelineno-0-200 href=#__codelineno-0-200></a>                <span class=n>recv_confirmation</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>recv</span><span class=p>()</span>
<a id=__codelineno-0-201 name=__codelineno-0-201 href=#__codelineno-0-201></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-202 name=__codelineno-0-202 href=#__codelineno-0-202></a>                <span class=n>logger</span><span class=o>.</span><span class=n>critical</span><span class=p>(</span><span class=s2>&quot;No response from Client, Reconnecting again...&quot;</span><span class=p>)</span>
<a id=__codelineno-0-203 name=__codelineno-0-203 href=#__codelineno-0-203></a>                <span class=c1># Socket is confused. Close and remove it.</span>
<a id=__codelineno-0-204 name=__codelineno-0-204 href=#__codelineno-0-204></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>zmq</span><span class=o>.</span><span class=n>LINGER</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-0-205 name=__codelineno-0-205 href=#__codelineno-0-205></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<a id=__codelineno-0-206 name=__codelineno-0-206 href=#__codelineno-0-206></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>)</span>
<a id=__codelineno-0-207 name=__codelineno-0-207 href=#__codelineno-0-207></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span> <span class=o>-=</span> <span class=mi>1</span>
<a id=__codelineno-0-208 name=__codelineno-0-208 href=#__codelineno-0-208></a>
<a id=__codelineno-0-209 name=__codelineno-0-209 href=#__codelineno-0-209></a>                <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__max_retries</span><span class=p>):</span>
<a id=__codelineno-0-210 name=__codelineno-0-210 href=#__codelineno-0-210></a>                    <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Client failed to respond on repeated attempts.&quot;</span><span class=p>)</span>
<a id=__codelineno-0-211 name=__codelineno-0-211 href=#__codelineno-0-211></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__terminate</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-0-212 name=__codelineno-0-212 href=#__codelineno-0-212></a>                    <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
<a id=__codelineno-0-213 name=__codelineno-0-213 href=#__codelineno-0-213></a>                        <span class=s2>&quot;[NetGear:ERROR] :: Client seems to be offline, Abandoning!&quot;</span>
<a id=__codelineno-0-214 name=__codelineno-0-214 href=#__codelineno-0-214></a>                    <span class=p>)</span>
<a id=__codelineno-0-215 name=__codelineno-0-215 href=#__codelineno-0-215></a>
<a id=__codelineno-0-216 name=__codelineno-0-216 href=#__codelineno-0-216></a>                <span class=c1># Create new connection</span>
<a id=__codelineno-0-217 name=__codelineno-0-217 href=#__codelineno-0-217></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__msg_context</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_pattern</span><span class=p>)</span>
<a id=__codelineno-0-218 name=__codelineno-0-218 href=#__codelineno-0-218></a>                <span class=c1># handle SSH tunneling if enabled</span>
<a id=__codelineno-0-219 name=__codelineno-0-219 href=#__codelineno-0-219></a>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>:</span>
<a id=__codelineno-0-220 name=__codelineno-0-220 href=#__codelineno-0-220></a>                    <span class=c1># establish tunnel connection</span>
<a id=__codelineno-0-221 name=__codelineno-0-221 href=#__codelineno-0-221></a>                    <span class=n>ssh</span><span class=o>.</span><span class=n>tunnel_connection</span><span class=p>(</span>
<a id=__codelineno-0-222 name=__codelineno-0-222 href=#__codelineno-0-222></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span>
<a id=__codelineno-0-223 name=__codelineno-0-223 href=#__codelineno-0-223></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>,</span>
<a id=__codelineno-0-224 name=__codelineno-0-224 href=#__codelineno-0-224></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_mode</span><span class=p>,</span>
<a id=__codelineno-0-225 name=__codelineno-0-225 href=#__codelineno-0-225></a>                        <span class=n>keyfile</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_keyfile</span><span class=p>,</span>
<a id=__codelineno-0-226 name=__codelineno-0-226 href=#__codelineno-0-226></a>                        <span class=n>password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__ssh_tunnel_pwd</span><span class=p>,</span>
<a id=__codelineno-0-227 name=__codelineno-0-227 href=#__codelineno-0-227></a>                        <span class=n>paramiko</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>__paramiko_present</span><span class=p>,</span>
<a id=__codelineno-0-228 name=__codelineno-0-228 href=#__codelineno-0-228></a>                    <span class=p>)</span>
<a id=__codelineno-0-229 name=__codelineno-0-229 href=#__codelineno-0-229></a>                <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-0-230 name=__codelineno-0-230 href=#__codelineno-0-230></a>                    <span class=c1># connect normally</span>
<a id=__codelineno-0-231 name=__codelineno-0-231 href=#__codelineno-0-231></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__connection_address</span><span class=p>)</span>
<a id=__codelineno-0-232 name=__codelineno-0-232 href=#__codelineno-0-232></a>                <span class=bp>self</span><span class=o>.</span><span class=n>__poll</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__msg_socket</span><span class=p>,</span> <span class=n>zmq</span><span class=o>.</span><span class=n>POLLIN</span><span class=p>)</span>
<a id=__codelineno-0-233 name=__codelineno-0-233 href=#__codelineno-0-233></a>
<a id=__codelineno-0-234 name=__codelineno-0-234 href=#__codelineno-0-234></a>                <span class=k>return</span> <span class=kc>None</span>
<a id=__codelineno-0-235 name=__codelineno-0-235 href=#__codelineno-0-235></a>
<a id=__codelineno-0-236 name=__codelineno-0-236 href=#__codelineno-0-236></a>            <span class=c1># log confirmation</span>
<a id=__codelineno-0-237 name=__codelineno-0-237 href=#__codelineno-0-237></a>            <span class=bp>self</span><span class=o>.</span><span class=n>__logging</span> <span class=ow>and</span> <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>recv_confirmation</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <p>&nbsp;</p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 11, 2021</span> </small> </div> <footer class=sponsorship> <hr> <a href=https://ko-fi.com/W7W8WTYO> <span class="twemoji heart-throb-hover"> <img alt=â¤ class="twemoji heart" src=https://twemoji.maxcdn.com/v/latest/svg/2764.svg title=Donate> </span> </a> <hr> </footer> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../streamgear/ class="md-footer__link md-footer__link--prev" aria-label="Previous: StreamGear API" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> StreamGear API </div> </div> </a> <a href=../stabilizer/ class="md-footer__link md-footer__link--next" aria-label="Next: Stabilizer Class" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Stabilizer Class </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2019 Abhishek Thakur(@abhiTronix) </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/abhiTronix target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://gitter.im/vidgear/community target=_blank rel=noopener title=gitter.im class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"/></svg> </a> <a href=https://www.linkedin.com/in/abhishek-singh-thakur-a37845a5 target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://dev.to/abhitronix target=_blank rel=noopener title=dev.to class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["header.autohide", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.092fa1f6.min.js", "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.5a9542cf.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>